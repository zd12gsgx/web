window.__require=function e(t,s,a){function c(r,n){if(!s[r]){if(!t[r]){var i=r.split("/");if(i=i[i.length-1],!t[i]){var l="function"==typeof __require&&__require;if(!n&&l)return l(i,!0);if(o)return o(i,!0);throw new Error("Cannot find module '"+r+"'")}r=i}var u=s[r]={exports:{}};t[r][0].call(u.exports,function(e){return c(t[r][1][e]||e)},u,u.exports,e,t,s,a)}return s[r].exports}for(var o="function"==typeof __require&&__require,r=0;r<a.length;r++)c(a[r]);return c}({HttpUtils:[function(e,t,s){"use strict";cc._RF.push(t,"d4501+egmNNIIprQ7p5fVv7","HttpUtils"),s.requestGet=function(e,t,s){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState&&a.status>=200&&a.status<400){var e=a.responseText;t&&t(e)}else s&&s()},a.open("GET",e,!0),a.send()},s.requestPost=function(e,t,s,a){s=s||function(){},a=a||function(){};var c=JSON.stringify(t),o=cc.loader.getXMLHttpRequest();o.timeout=6e4;var r=!1,n=e;console.log("RequestURL:"+n),o.open("POST",n,!0),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),cc.sys.isNative&&o.setRequestHeader("Accept-Encoding","gzip,deflate","text/html;charset=UTF-8"),o.onreadystatechange=function(){if(cc.log(" xhr.onreadystatechange"),cc.log("state:"+o.readyState+" status:"+o.status),4===o.readyState&&o.status>=200&&o.status<300){var e;cc.log("http res("+o.responseText.length+"):"+o.responseText);try{e=JSON.parse(o.responseText),s(e)}catch(t){cc.error("err:"+t),e=null,a()}}else 4!==o.readyState||r||(r=!0,cc.error("\u7f51\u7edc\u5f02\u5e38"),a()),cc.log("state:"+o.readyState+" status:"+o.status)},o.onerror=function(){cc.log(" xhr.onerror"),r||(r=!0,cc.error("\u7f51\u7edc\u5f02\u5e38"),a())},o.send(c)},cc._RF.pop()},{}],Loading:[function(e,t){"use strict";cc._RF.push(t,"25df6QFTPBIvr+dS1rpZHFj","Loading");var s=e("SaveData"),a=e("TTUtils"),c=e("ShareUtils"),o=e("HttpUtils");cc.isSpider=cc.sys.platform===cc.sys.OPPO_GAME||cc.sys.platform===cc.sys.VIVO_GAME||!!window.ks,cc.isFireworks=!0,cc.mgf={},cc.mgf.version=105,cc.mgf.v1=1,cc.mgf.v2=1,cc.mgf.v3=1,cc.mgf.opacity=75,cc.mgf.b1=1,cc.Class({extends:cc.Component,properties:{label:cc.Label,spBar1:cc.Sprite,_fakeCount:0,_fakeUpdate:!0},onLoad:function(){},start:function(){var e=this;s.load(),a.login(),c.initShareMenu(),window.ks||window.qq||cc.sys.platform!==cc.sys.WECHAT_GAME?(cc.mgf.v1=0,cc.mgf.v2=0,cc.mgf.v3=0):o.requestGet("https://tesaga.coding.net/p/game/d/config/git/raw/master/zhslwsb_wx.json?rnd="+ +new Date,function(e){try{var t=JSON.parse(e),s=t.v;cc.mgf.version=cc.mgf.version||0,console.log("version",cc.mgf.version,s),cc.mgf.version==s?(cc.mgf.v1=0,cc.mgf.v2=0,cc.mgf.v3=0):(cc.mgf.v1=t.v1,cc.mgf.v2=t.v2,cc.mgf.v3=t.v3)}catch(a){}},function(){}),cc.sys.platform===cc.sys.OPPO_GAME?o.requestGet("https://tesaga.coding.net/p/game/d/config/git/raw/master/zhslwsb_oppo.json?rnd="+ +new Date,function(e){try{var t=JSON.parse(e),s=t.v;cc.mgf.version=cc.mgf.version||0,console.log("version",cc.mgf.version,s),cc.mgf.version==s?(cc.mgf.opacity=255,cc.mgf.b1=0):(cc.mgf.opacity=t.opacity,cc.mgf.b1=t.b1)}catch(a){}},function(){}):(cc.mgf.opacity=255,cc.mgf.b1=0),cc.assetManager.loadBundle("mainScene",function(t){if(t)return console.error(t);e.launch(),console.log("load subpackage successfully.")})},updateProgress1:function(e){e=Math.ceil(e/5),this.label.string="\u52a0\u8f7d\u914d\u7f6e..."+e+"%",this.spBar1.fillRange=e/100},updateProgress2:function(e){e=Math.ceil(20+4*e/5),this.label.string="\u52a0\u8f7d\u4e2d..."+e+"%",this.spBar1.fillRange=e/100},launch:function(){var e=this,t=0;cc.director.preloadScene("game",function(s,a){s/a>.2&&(e._fakeUpdate=!1),0==a?e.updateProgress2(100):(t=Math.max(t,s/a),e.updateProgress2(100*t))},function(){cc.director.loadScene("game")})},update:function(){this._fakeUpdate&&(this._fakeCount++,this._fakeCount>100?this._fakeUpdate=!1:this.updateProgress1(this._fakeCount))}}),cc._RF.pop()},{HttpUtils:"HttpUtils",SaveData:"SaveData",ShareUtils:"ShareUtils",TTUtils:"TTUtils"}],SaveData:[function(e,t,s){"use strict";cc._RF.push(t,"b6e30vGCudH1Z5myDQnVqYf","SaveData"),s.data={highScore:0,newUser:!0,skillLevels:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],privacyAgreement:!1,startBurst:!1,energy:5,eryTimeTag:0,rank:0,isFreeSkill:!1,curDay:0,energyToday:0,skillToday:0,reviveToday:0,fireworks:0,rankCount:0};var a="mgf_save_data_dragon2";s.load=function(){var e=cc.sys.localStorage.getItem(a);try{if(e){var t=JSON.parse(e);this.data.highScore=t.highScore||0,this.data.newUser=t.newUser||!1,this.data.skillLevels=t.skillLevels||this.data.skillLevels,this.data.privacyAgreement=t.privacyAgreement||this.data.privacyAgreement,this.data.startBurst=t.startBurst||this.data.startBurst,this.data.energy=void 0===t.energy?5:t.energy,this.data.eryTimeTag=t.eryTimeTag||0,this.data.rank=t.rank||0,this.data.curDay=t.curDay||0,this.data.energyToday=t.energyToday||0,this.data.skillToday=t.skillToday||0,this.data.reviveToday=t.reviveToday||0,this.data.isFreeSkill=t.isFreeSkill||!1,this.data.fireworks=t.fireworks||0,this.data.rankCount=t.rankCount||0}}catch(s){cc.error(s)}finally{this.updateCurDay()}},s.save=function(){cc.sys.localStorage.setItem(a,JSON.stringify(this.data))},s.updateHighScore=function(e){this.data.highScore=Math.max(e,this.data.highScore)},s.updateCurDay=function(){var e,t=((e=new Date).setHours(0,0,0,0),Math.floor(e.getTime()/1e3/24/3600));t!==this.data.curDay&&(this.data.curDay=t,this.data.energyToday=0,this.data.skillToday=0,this.data.reviveToday=0)},cc._RF.pop()},{}],ShareData:[function(e,t,s){"use strict";cc._RF.push(t,"a089arzAV9Fr5HS/jEAk+MJ","ShareData"),s.datas=[{titles:["\u6211\u7684\u874c\u86aa\u53ef\u4ee5\u62535\u4e2a\u795e\u9f99","\u7528\u7535\u9cd7\u7684\u7535\u7535\u7535\u9cd7\u7535\u9cd7\u4f1a\u6b7b\u5417","\u6211\u517b\u4e86\u53ea\u4f1a\u55b7\u706b\u7684\u9752\u86d9"],imgUrls:[],screenshot:!0}],s.SHARE_APP_ID=0,cc._RF.pop()},{}],ShareUtils:[function(e,t,s){"use strict";cc._RF.push(t,"c35a1vRkCpGeZ/rHc/gabic","ShareUtils");var a=e("ShareData"),c=null;cc.sys.platform==cc.sys.WECHAT_GAME&&(window.qq?qq.onShow(function(e){console.log(e),e.query||(e.query={id:0})}):wx.onShow(function(){})),s.initShareMenu=function(){window.ks||(window.qq?(qq.showShareMenu(),qq.onShareAppMessage(function(){var e=Math.floor(Math.random()*a.datas.length),t=o(e);return t.imageUrl=canvas.toTempFilePathSync({destWidth:500,destHeight:400}),t})):cc.sys.platform==cc.sys.WECHAT_GAME&&(console.log("initShareMenu"),wx.showShareMenu(),wx.onShareAppMessage(function(){var e=Math.floor(Math.random()*a.datas.length),t=o(e);return t.screenshot=!0,t.query="id=10&pic="+e,console.log("ddd,,"+t),t})))},s.share=function(e,t,n,i,l,u,h){console.log("\u5206\u4eab"),t=t||!1,n=n||!1,(i=i||{}).id=e,l=l||0;var f=null,g=e;if(t&&(g=Math.floor(Math.random()*a.datas.length)),f=o(g),i.pic=g,i.leuokShareIn=g+1,f.screenshot=n,f.success=u,f.fail=h,console.log("======query======"),console.log(i),cc.sys.platform==cc.sys.WECHAT_GAME){var d=0,p="";for(var y in i)p+=d>0?"&":"",p+=y+"="+i[y],d++;f.query=p,console.log("data.query=="+p)}f.screenshot?f.imageUrl?cc.sys.platform==cc.sys.WECHAT_GAME&&r(f):s.screenshot(l,function(){cc.sys.platform==cc.sys.WECHAT_GAME&&(f.imageUrl=c,r(f))}):r(f)};var o=function(e){var t=a.datas[e],s={query:"",title:"",imageUrl:null,screenshot:!1};if(t){if(s.screenshot=t.screenshot,t.titles.length>0){var c=Math.floor(Math.random()*t.titles.length);s.title=t.titles[c]}t.imgUrls.length>0&&(c=Math.floor(Math.random()*t.imgUrls.length),s.imageUrl=t.imgUrls[c])}return s},r=function(e){cc.sys.platform==cc.sys.WECHAT_GAME&&(window.qq?qq.shareAppMessage(e):wx.shareAppMessage(e))};s.screenshot=function(e,t,s){if(cc.sys.platform==cc.sys.WECHAT_GAME){var a=canvas.width,o=a,r=a/5*4,n=canvas.height/2-r/2+e;canvas.toTempFilePath({x:0,y:n,width:o,height:r,destWidth:o,destHeight:r,fileType:"jpg",quality:1,success:function(e){c=e.tempFilePath,t&&t()},fail:s})}},cc._RF.pop()},{ShareData:"ShareData"}],TTUtils:[function(e,t,s){"use strict";cc._RF.push(t,"f326aBYiS5E55gO9nplifYF","TTUtils");var a=null,c=null,o=[],r=!0;s.login=function(){cc.sys.platform===cc.sys.BYTEDANCE_GAME&&(console.log("TT\u767b\u9646\u4e2d"),tt.login({force:!1,success:function(e){console.log("res.code=",e.code),console.log("res.anonymousCode=",e.anonymousCode)},fail:function(){console.log("login\u8c03\u7528\u5931\u8d25")}}))},s.recordStart=function(){cc.sys.platform===cc.sys.BYTEDANCE_GAME&&(o=[],r=!0,a||cc.sys.platform===cc.sys.BYTEDANCE_GAME&&((a=tt.getGameRecorderManager()).onStart(function(){console.log("\u5f55\u5c4f\u5f00\u59cb")}),a.onPause(function(){console.log("\u6062\u590d\u6682\u505c")}),a.onResume(function(){console.log("\u6062\u590d\u5f55\u5c4f")}),a.onStop(function(e){console.log("\u5f55\u5c4f\u7ed3\u675f"),console.log(e.videoPath),c=e.videoPath,o.length>0&&a.clipVideo({path:c,timeRange:[10,0],clipRange:o,success:function(e){c=e.videoPath}})})),a.start({duration:300}))},s.recordPause=function(){a&&a.pause()},s.recordResume=function(){a&&a.resume()},s.recordStop=function(){a&&(a.stop(),console.log("\u5f55\u5c4f\u7ed3\u675f"))},s.recordClip=function(e,t,s){a&&a.recordClip({timeRange:[e,t],success:function(e){console.log(e.index),r&&s?o.splice(0,0,e.index):o.push(e.index)}})},s.shareRecord=function(e,t){if(cc.sys.platform===cc.sys.BYTEDANCE_GAME)if(""!=c)try{tt.shareAppMessage({channel:"video",templateId:"2hgljagjel2115hu06",extra:{videoPath:c,hashtag_list:["\u5408\u6210\u795e\u9f99\u65e0\u53cc\u7248"],videoTopics:["\u5408\u6210\u795e\u9f99\u65e0\u53cc\u7248"]},success:function(t){e&&e(t),console.log("\u5206\u4eab\u89c6\u9891\u6210\u529f")},fail:function(e){console.log(e),t&&t(e),cc.director.emit("show_toast","\u5f55\u5c4f\u5206\u4eab\u5931\u8d25"),console.log("\u5206\u4eab\u89c6\u9891\u5931\u8d25")}})}catch(s){}else cc.director.emit("show_toast","\u5f55\u5c4f\u5206\u4eab\u5931\u8d25")},cc._RF.pop()},{}]},{},["HttpUtils","Loading","SaveData","ShareData","ShareUtils","TTUtils"]);