window.__require=function t(e,i,s){function n(a,c){if(!i[a]){if(!e[a]){var r=a.split("/");if(r=r[r.length-1],!e[r]){var h="function"==typeof __require&&__require;if(!c&&h)return h(r,!0);if(o)return o(r,!0);throw new Error("Cannot find module '"+a+"'")}a=r}var l=i[a]={exports:{}};e[a][0].call(l.exports,function(t){return n(e[a][1][t]||t)},l,l.exports,t,e,i,s)}return i[a].exports}for(var o="function"==typeof __require&&__require,a=0;a<s.length;a++)n(s[a]);return n}({AI:[function(t,e){"use strict";cc._RF.push(e,"42e3ffCY8VKsoJIfOqnhqc+","AI");var i=t("MathUtils"),s=cc.Enum({MOVE:-1,ATTACK:-1,ESCAPE:-1});cc.Class({extends:cc.Component,properties:{_role:null,_curStatus:s.MOVE,_target:null,_detectCD:0,_statusCD:0,_attackCD:0,_escapeCD:0},getStatusMin:function(){return 1.5},getStatusMax:function(){return 3},getDetectInterval:function(){return 1},getDetectR:function(){return 500},getAttackPer:function(){return 10},getEscapePer:function(){return 20},getAttackCD:function(){return 3},getEscapeCD:function(){return 2},getUsers:function(){return[]},getEnemys:function(){return[]},checkAttackUser:function(t,e,i){return i},checkEscapeUser:function(t,e,i){return i},checkEscapeEnemy:function(t,e,i){return i},getMapWidth:function(){return this.node.parent.width},getMapHeight:function(){return this.node.parent.height},getR:function(){return 200},onLoad:function(){this._role=this.getComponent("Role"),this._detectCD=Math.random()*this.getDetectInterval(),this._role.startRun()},runAI:function(t){if(!this._role._isUser)switch(this._detectCD-=t,this._attackCD-=t,this._escapeCD-=t,this._detectCD<=0&&(this.checkAround(),this._detectCD=this.getDetectInterval()),this._curStatus){case s.ATTACK:this.runAttack(t);break;case s.ESCAPE:this.runEscape(t);break;case s.MOVE:this.runMove(t)}},runMove:function(t){this._statusCD-=t,this._statusCD<=0&&(this.setStatus(s.MOVE),this._role._angle=360*Math.random())},changeToMove:function(){this.setStatus(s.MOVE),this._role._angle+=180*Math.random()-90},runAttack:function(t){if(this._statusCD-=t,!this._target._isAlive||this._statusCD<=0)this._target=null,this._attackCD=this.getAttackCD()||0,this.changeToMove();else{var e=this._target.node.x-this.node.x,s=this._target.node.y-this.node.y;this._role._angle=i.atan2(cc.v2(e,s))}},runEscape:function(t){if(this._statusCD-=t,!this._target._isAlive||this._statusCD<=0)this._target=null,this._escapeCD=this.getEscapeCD()||0,this.changeToMove();else{var e=this._target.node.x-this.node.x,s=this._target.node.y-this.node.y;this._role._angle=i.atan2(cc.v2(e,s))+180}},checkAround:function(){if(this._role){for(var t=this.getEnemys(),e=this.getUsers(),i=this.getDetectR(),n=this.getAttackPer(),o=this.getEscapePer(),a=null,c=null,r=0;r<e.length;r++){var h=e[r],l=h.node.x-this.node.x,d=h.node.y-this.node.y;l*l+d*d<=i*i&&(a=this.checkAttackUser(this._role,h,a),c=this.checkEscapeUser(this._role,h,c))}if(!c)for(var u=0;u<t.length;u++){var f=t[u];if(f!==this._role&&f._valid&&f._isAlive){var p=f.node.x-this.node.x,m=f.node.y-this.node.y;p*p+m*m<=i*i&&(c=this.checkEscapeEnemy(this._role,f,c))}}var _=100*Math.random();a&&_<n&&this._attackCD<=0?(this.setStatus(s.ATTACK),this._target=a):c&&_<o&&this._escapeCD<=0&&(this.setStatus(s.ESCAPE),this._target=c)}},setStatus:function(t){this._curStatus=t;var e=this.getStatusMin(),i=(this.getStatusMax()-e)*Math.random();this._statusCD=e+i},checkEdge:function(){var t=this.getR(),e=this.getMapWidth()/2-t,i=this.getMapHeight()/2-t,s=-e,n=-i,o=this.node.x,a=this.node.y,c=this._role._angle%360;c+=c<0?360:0;var r=!1,h=!1;o<=s?(r=!0,c>90&&c<180?c=90:c>=180&&c<270&&(c=270)):o>=e&&(h=!0,c>=0&&c<90?c=90:c>270&&c<360&&(c=270)),a<=n?(c>180&&c<270?c=180:c>=270&&c<360&&(c=0),r&&(c=Math.min(c,90)),h&&(c=Math.max(c,90))):a>=i&&(c>=0&&c<90?c=360:c>=90&&c<180&&(c=180),r&&(c=Math.max(c,360)),h&&(c=Math.min(c,180))),this._role._angle=c},update:function(t){this.runAI(t)}}),cc._RF.pop()},{MathUtils:"MathUtils"}],AdBase:[function(t,e){"use strict";cc._RF.push(e,"6e2aeb9a/RJsI5QnpmgZFaF","AdBase"),cc.Class({extends:cc.Class,showBanner:function(t,e){e&&e()},hideBanner:function(){},showVideo:function(t,e){e&&e(!0)},showInterstitial:function(t,e){e&&e()},showBoxAd:function(){},showCustomAd:function(){},hideCustomAd:function(){},compareVersion:function(t,e){e=e||[],t=(""+(t=t||[])).split("."),e=(""+e).split(".");for(var i=Math.max(t.length,e.length);t.length<i;)t.push("0");for(;e.length<i;)e.push("0");for(var s=0;s<i;s++){var n=parseInt(t[s]),o=parseInt(e[s]);if(n>o)return 1;if(n<o)return-1}return 0}}),cc._RF.pop()},{}],AdKs:[function(t,e){"use strict";cc._RF.push(e,"d8205rwBxBD7KGNy9S19MPy","AdKs");var i=t("./AdBase"),s=["2300002338_01"],n=["2300002338_02"],o=null;cc.Class({extends:i,showBanner:function(){},hideBanner:function(){},showVideo:function(t,e,i){cc.director.emit("block_on"),cc.director.emit("sound_pause",!0);var n=ks.createRewardedVideoAd({adUnitId:s[t]}),o=function(){console.log("onLoad")},a=function t(e){i&&i(),console.log("onError"+e),n.offLoad(o),n.offClose(c),n.offError(t),cc.director.emit("block_off"),cc.director.emit("sound_pause",!1)},c=function t(i){cc.director.resume(),i&&i.isEnded||void 0===i?e(!0):e(!1),console.log("onClose"),n.offLoad(o),n.offClose(t),n.offError(a),cc.director.emit("block_off"),cc.director.emit("sound_pause",!1)};n.onLoad(o),n.onError(a),n.onClose(c),n.show().catch(function(t){console.log(t.errMsg),n.offLoad(o),n.offClose(c),n.offError(a)})},showInterstitial:function(t,e,i){o&&o.destroy();var s=n[t];o=ks.createInterstitialAd({adUnitId:s});var a=function t(e){i&&i(),o.offError(t),console.log("\u5e7f\u544a\u7ec4\u4ef6\u51fa\u73b0\u95ee\u9898",e)};o.onError(a),o.show().then(function(){e&&e(),o.offError(a)})}}),cc._RF.pop()},{"./AdBase":"AdBase"}],AdManagerBase:[function(t,e){"use strict";cc._RF.push(e,"f24e2IXOFJMR6c/T7gKIz31","AdManagerBase"),cc.Class({extends:cc.Class,onGameInit:function(){},onSkillSelect:function(){},init:function(){},onDestroy:function(){}}),cc._RF.pop()},{}],AdOppo:[function(t,e){"use strict";cc._RF.push(e,"cc7c6jD0SxBzooxXfd906Ul","AdOppo");var i=t("./AdBase"),s=["459749"],n=["459765"];cc.Class({extends:i,showBanner:function(){},hideBanner:function(){},showVideo:function(t,e,i){cc.director.emit("block_on"),cc.director.emit("sound_pause",!0);var n=qg.createRewardedVideoAd({adUnitId:s[t]}),o=function(){console.log("onLoad"),n.show()},a=function(t){i&&i(),console.log("onError",t),cc.director.emit("block_off"),cc.director.emit("sound_pause",!1)},c=function(t){cc.director.resume(),t&&t.isEnded||void 0===t?e(!0):e(!1),console.log("onClose"),cc.director.emit("block_off"),cc.director.emit("sound_pause",!1)};n.offLoad(o),n.offClose(c),n.offError(a),n.onLoad(o),n.onError(a),n.onClose(c),n.load()},showInterstitial:function(){cc.director.emit("oppo_intersitial")},showBoxAd:function(t,e,i){if(qg.getSystemInfoSync().platformVersionCode>=1076){var s=qg.createGamePortalAd({adUnitId:n[t]}),o=function(){console.log("\u4e92\u63a8\u76d2\u5b50\u4e5d\u5bab\u683c\u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),s.show(),e&&e()},a=function(){console.log("\u4e92\u63a8\u76d2\u5b50\u4e5d\u5bab\u683c\u5e7f\u544a\u5173\u95ed"),s.destroy().then(function(){console.log("destroy success")}).catch(function(t){console.log("destroy fail with:"+t.errCode+","+t.errMsg)})},c=function(t){console.log(t),i&&i()};s.offLoad(o),s.offClose(a),s.offError(c),s.onLoad(o),s.onClose(a),s.onError(c),s.load().then(function(){console.log("load success")}).catch(function(t){console.log("load fail with:"+t.errCode+","+t.errMsg)})}else console.log("\u5feb\u5e94\u7528\u5e73\u53f0\u7248\u672c\u53f7\u4f4e\u4e8e1076\uff0c\u6682\u4e0d\u652f\u6301\u4e92\u63a8\u76d2\u5b50\u76f8\u5173 API"),i&&i()}}),cc._RF.pop()},{"./AdBase":"AdBase"}],AdQQ:[function(t,e){"use strict";cc._RF.push(e,"10942agd/lFE46pf6sXAiZh","AdQQ");var i=t("./AdBase"),s=["e07bc840964482fadb26736b5823275d"],n=["26e4efce5a7f5a699047b48980253ac0"],o=["be3e567c3f051d079a7234af7b1a2c87"],a=["bd35861c46802559cb6e707f4efa0a45"],c=null,r=null,h=null;cc.Class({extends:i,showBanner:function(t,e,i){var n=qq.getSystemInfoSync();c&&c.destroy();var o=n.windowWidth,a=n.windowHeight;(c=qq.createBannerAd({adUnitId:s[t],style:{width:320}})).onResize(function(t){c.style.top=a-t.height,c.style.left=(o-t.width)/2,c.show().then(function(){console.log("show ok"),e&&e()}).catch(function(t){console.log("show error",t),i&&i()})})},hideBanner:function(){c&&c.hide()},showVideo:function(t,e,i){cc.director.emit("block_on"),cc.director.emit("sound_pause",!0);var s=qq.createRewardedVideoAd({adUnitId:n[t]}),o=function(){console.log("onLoad")},a=function(t){i&&i(),console.log("onError",t),cc.director.emit("block_off"),cc.director.emit("sound_pause",!1)},c=function(t){cc.director.resume(),t&&t.isEnded||void 0===t?e(!0):e(!1),console.log("onClose"),cc.director.emit("block_off"),cc.director.emit("sound_pause",!1)};s.offLoad(o),s.offClose(c),s.offError(a),s.onLoad(o),s.onError(a),s.onClose(c),s.show().catch(function(){s.load().then(function(){return s.show()})})},showInterstitial:function(t,e,i){r&&r.destroy();var s=o[t];if(qq.createInterstitialAd){r=qq.createInterstitialAd({adUnitId:s});var n=function t(){r.show().then(function(){e&&e(),r.offLoad(t),r.offError(a)})},a=function t(e){i&&i(),r.offLoad(n),r.offError(t),console.log("\u5e7f\u544a\u7ec4\u4ef6\u51fa\u73b0\u95ee\u9898",e)};r.onLoad(n),r.onError(a)}else i&&i()},showBoxAd:function(t,e,i){(h=qq.createAppBox({adUnitId:a[t]})).onClose(function(){h.destroy(),h=null}),h.load().then(function(){h.show(),e&&e()}).catch(function(){i&&i()})}}),cc._RF.pop()},{"./AdBase":"AdBase"}],AdTT:[function(t,e){"use strict";cc._RF.push(e,"d08e3ArD/JDt45yYOVoSHHV","AdTT");var i=t("AdBase"),s=["2d7iblce1lgf2xnlcg"],n=["b4mb78kkkdpni3cih5"],o=["1a9c3kdf1eo36molao"],a=null,c=!1,r=null;cc.Class({extends:i,showBanner:function(t,e,i){c=!1;var n=tt.getSystemInfoSync();a&&a.destroy();var o=n.windowWidth,r=n.windowHeight;(a=tt.createBannerAd({adUnitId:s[t],adIntervals:30,style:{width:200,top:r-112.5-20,left:(o-200)/2}})).onResize(function(t){console.log(o,r),console.log(t.width,t.height),a.style.top=r-t.height,a.style.left=(o-t.width)/2}),a.onLoad(function(){console.log("onLoad"),c||a.show().then(function(){e&&e()}).catch(function(t){i&&i(),console.log("\u5e7f\u544a\u7ec4\u4ef6\u51fa\u73b0\u95ee\u9898",t)})}),a.onError(function(t){i&&i(),console.log("\u5e7f\u544a\u7ec4\u4ef6\u51fa\u73b0\u95ee\u98981",t)})},hideBanner:function(){a&&(a.hide(),c=!0)},showVideo:function(t,e,i){cc.director.emit("block_on"),cc.director.emit("sound_pause",!0);var s=tt.createRewardedVideoAd({adUnitId:n[t]}),o=function(){console.log("onLoad")},a=function t(e){i&&i(),console.log("onError"+e),s.offLoad(o),s.offClose(c),s.offError(t),cc.director.emit("block_off"),cc.director.emit("sound_pause",!1)},c=function t(i){cc.director.resume(),i&&i.isEnded||void 0===i?e(!0):e(!1),console.log("onClose"),s.offLoad(o),s.offClose(t),s.offError(a),cc.director.emit("block_off"),cc.director.emit("sound_pause",!1)};s.onLoad(o),s.onError(a),s.onClose(c),s.show().catch(function(t){console.log(t.errMsg),s.offLoad(o),s.offClose(c),s.offError(a)})},showInterstitial:function(t,e,i){r&&r.destroy();var s=o[t];r=tt.createInterstitialAd({adUnitId:s});var n=function t(){r.show().then(function(){e&&e(),r.offLoad(t),r.offError(a)})},a=function t(e){i&&i(),r.offLoad(n),r.offError(t),console.log("\u5e7f\u544a\u7ec4\u4ef6\u51fa\u73b0\u95ee\u9898",e)};r.onLoad(n),r.onError(a)}}),cc._RF.pop()},{AdBase:"AdBase"}],AdUc:[function(t,e){"use strict";cc._RF.push(e,"97896Yxe0hDQbwK8QXIktSv","AdUc");var i=t("./AdBase"),s=null,n=null;cc.Class({extends:i,showBanner:function(t,e,i){s&&s.destroy(),(s=uc.createBannerAd({style:{width:300,gravity:7}})).onLoad(function(){s.show(),e&&e(),console.log("Banner\u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),s.onError(function(t){console.log(t),i&&i()})},hideBanner:function(){s&&s.hide()},showVideo:function(t,e,i){var s=uc.createRewardVideoAd();s.offClose(),s.offLoad(),s.offError(),s.onLoad(function(){console.log("\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),s.onError(function(t){console.log(t),i&&i()}),s.onClose(function(t){t&&t.isEnded?e(!0):e(!1)}),s.show().then().catch(function(t){console.log(t),i&&i()})},showInterstitial:function(t,e,i){n&&(n.offClose(),n.offLoad(),n.offError()),n=uc.createInterstitialAd();var s=!1;n.onLoad(function(){console.log("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),s||(s=!0,e&&e(),n.show().then().catch(function(t){return console.log(t)}))}),n.onError(function(t){console.log(t),i&&i()}),n.onClose(function(){}),n.load().then().catch(function(t){return console.log(t)})}}),cc._RF.pop()},{"./AdBase":"AdBase"}],AdUtils:[function(t,e,i){"use strict";cc._RF.push(e,"4fd61ZZl/9ALrWFKoe34++g","AdUtils");var s=t("AdTT"),n=t("AdQQ"),o=t("AdWx"),a=t("AdKs"),c=t("AdUc"),r=t("AdOppo"),h=t("AdVivo"),l=t("AdBase"),d=null;d=window.ks?new a:window.qq?new n:window.uc?new c:cc.sys.platform===cc.sys.OPPO_GAME?new r:cc.sys.platform===cc.sys.VIVO_GAME?new h:cc.sys.platform===cc.sys.BYTEDANCE_GAME?new s:cc.sys.platform===cc.sys.WECHAT_GAME?new o:new l,i.showBanner=function(t,e,i){d.showBanner(t,e,i)},i.hideBanner=function(){d.hideBanner()},i.stopBanner=function(){d.hideBanner()},i.showVideo=function(t,e,i){d.showVideo(t,e,i)},i.showInterstitial=function(t,e,i){d.showInterstitial(t,e,i)},i.showBoxAd=function(t,e,i){d.showBoxAd(t,e,i)},i.showCustomAd=function(t,e,i,s,n){d.showCustomAd(t,e,i,s,n)},i.hideCustomAd=function(t){d.hideCustomAd(t)},cc._RF.pop()},{AdBase:"AdBase",AdKs:"AdKs",AdOppo:"AdOppo",AdQQ:"AdQQ",AdTT:"AdTT",AdUc:"AdUc",AdVivo:"AdVivo",AdWx:"AdWx"}],AdVivo:[function(t,e){"use strict";cc._RF.push(e,"1f9100OolNCzoYMYv3RjNns","AdVivo");var i=t("./AdBase"),s=["2a9691e9e9a640759bcd97146d37e5ea"],n=["4ba4a989aef9415d96a604337b24d35c"];cc.Class({extends:i,showBanner:function(){},hideBanner:function(){},showVideo:function(t,e,i){cc.director.emit("block_on"),cc.director.emit("sound_pause",!0);var n=qg.createRewardedVideoAd({posId:s[t]});n.onError(function(t){console.log("\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25",t),i&&i()}),n.onLoad(function(t){console.log("\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u52a0\u8f7d\u5b8c\u6210-onload\u89e6\u53d1",JSON.stringify(t)),n.show().then(function(){console.log("\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u5c55\u793a\u5b8c\u6210")}).catch(function(t){console.log("\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u5c55\u793a\u5931\u8d25",JSON.stringify(t)),i&&i(),cc.director.emit("block_off"),cc.director.emit("sound_pause",!1)})}),n.onClose(function(t){console.log("\u89c6\u9891\u5e7f\u544a\u5173\u95ed\u56de\u8c03"),t&&t.isEnded?(console.log("\u6b63\u5e38\u64ad\u653e\u7ed3\u675f\uff0c\u53ef\u4ee5\u4e0b\u53d1\u6e38\u620f\u5956\u52b1"),e(!0)):(console.log("\u64ad\u653e\u4e2d\u9014\u9000\u51fa\uff0c\u4e0d\u4e0b\u53d1\u6e38\u620f\u5956\u52b1"),e(!1)),cc.director.emit("block_off"),cc.director.emit("sound_pause",!1)})},showInterstitial:function(){cc.director.emit("vivo_intersitial")},showBoxAd:function(t,e,i){qg.createBoxBannerAd?(boxBannerAd=qg.createBoxBannerAd({posId:n[t]}),boxBannerAd.onError(function(t){console.log("\u76d2\u5b50\u6a2a\u5e45\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25",t),i&&i()}),boxBannerAd.show().then(function(){console.log("show success"),e&&e()})):console.log("\u6682\u4e0d\u652f\u6301\u4e92\u63a8\u76d2\u5b50\u76f8\u5173 API")}}),cc._RF.pop()},{"./AdBase":"AdBase"}],AdWx:[function(t,e){"use strict";cc._RF.push(e,"3f7c2gfElBKM4Po/Ops55cZ","AdWx");var i=t("./AdBase"),s=["adunit-f2a32417e4f57b62"],n=["adunit-5753174237e27af3"],o=["adunit-e0980ad2cefc14b1"],a=["adunit-8baae67886d7a855","adunit-55f92c6e9cbe9ee2","adunit-b33db4817091df3f"],c=null,r=null,h=[null,null,null];cc.Class({extends:i,showBanner:function(t,e,i){c&&(c.destroy(),c=null);var n=wx.getSystemInfoSync(),o=n.SDKVersion;if(this.compareVersion(o,"2.0.4")>=0){var a=n.screenWidth,r=n.screenHeight,h=cc.view.getDesignResolutionSize(),l=a/h.width*h.height,d=a/h.width*100+(r-l)/2;c=wx.createBannerAd({adUnitId:s[t],adIntervals:30,style:{left:0,top:0,width:a}});var u=!1;c.onLoad(function(){e&&e()}),c.onError(function(){i&&i()}),c.onResize(function(){if(!u)if(c.style.realHeight>d){u=!0;var t=a*d/c.style.realHeight;t=cc.misc.clampf(t,300,9999),c.style.width=t,c.style.top=r-c.style.realHeight*(t/c.style.realWidth),c.style.left=(a-c.style.width)/2}else c.style.top=r-c.style.realHeight,r/a>2&&(c.style.top=c.style.top-34)}),c.show()}else i&&i()},hideBanner:function(){c&&c.hide()},showVideo:function(t,e,i){cc.director.emit("block_on"),cc.director.emit("sound_pause",!0);var s=wx.createRewardedVideoAd({adUnitId:n[t]}),o=function(){console.log("onLoad")},a=function(t){i&&i(),console.log("onError",t),cc.director.emit("block_off"),cc.director.emit("sound_pause",!1)},c=function(t){cc.director.resume(),t&&t.isEnded||void 0===t?e(!0):e(!1),console.log("onClose"),cc.director.emit("block_off"),cc.director.emit("sound_pause",!1)};s.offLoad(o),s.offClose(c),s.offError(a),s.onLoad(o),s.onError(a),s.onClose(c),s.show().catch(function(){s.load().then(function(){return s.show()})})},showInterstitial:function(t,e,i){var s=wx.getSystemInfoSync().SDKVersion;if(this.compareVersion(s,"2.6.0")>=0){r&&(r.destroy(),r=null);var n=o[t];(r=wx.createInterstitialAd({adUnitId:n})).onLoad(function(){e&&e()}),r.onError(function(){i&&i(),r.destroy(),r=null}),r.onClose(function(){r.destroy(),r=null}),r.show()}},showCustomAd:function(t,e,i,s,n){void 0===e&&(e=.5),void 0===i&&(i=.5),void 0===s&&(s=0),void 0===n&&(n=0);var o=wx.getSystemInfoSync(),c=o.SDKVersion;if(this.compareVersion(c,"2.11.1")>=0){h[t]&&h[t].destroy();var r=o.screenWidth*e+s,l=o.screenHeight*i+n,d=wx.createCustomAd({adUnitId:a[t],adIntervals:30,style:{left:r,top:l,fixed:!0}});h[t]=d,d.onLoad(function(){console.log("\u81ea\u5b9a\u4e49\u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),d.onError(function(t){console.error("\u81ea\u5b9a\u4e49\u5e7f\u544a\u52a0\u8f7d\u51fa\u9519\uff1a"+t.errCode),console.error(t.errMsg),d.offLoad(),d.offError()}),d.onClose(function(){d.destroy(),h[t]=null}),d.show()}},hideCustomAd:function(t){h[t]&&(h[t].destroy(),h[t]=null)}}),cc._RF.pop()},{"./AdBase":"AdBase"}],BlockComp:[function(t,e){"use strict";cc._RF.push(e,"61cd6LOakdNypWXWU0KkDfJ","BlockComp"),cc.Class({extends:cc.Component,properties:{},blockOn:function(){var t=this.getComponent(cc.BlockInputEvents);t&&(t.enabled=!0)},blockOff:function(){var t=this.getComponent(cc.BlockInputEvents);t&&(t.enabled=!1)},onLoad:function(){cc.director.on("block_on",this.blockOn,this),cc.director.on("block_off",this.blockOff,this)},onDestroy:function(){cc.director.off("block_on",this.blockOn,this),cc.director.off("block_off",this.blockOff,this)},start:function(){this.addComponent(cc.BlockInputEvents).enabled=!1}}),cc._RF.pop()},{}],CameraController:[function(t,e){"use strict";cc._RF.push(e,"dceb85mhjlJip9QmCz6K58u","CameraController");var i=cc.Class({extends:cc.Component,properties:{targetNode:{default:null,type:cc.Node},_shake:null,_zoomTo:1,_zoomDelta:0},statics:{CAMERA_OFFX:0,CAMERA_OFFY:0,instance:null},ctor:function(){i.instance=this},onLoad:function(){this.camera=this.getComponent(cc.Camera),this._shake=this.getComponent("Shake"),cc.director.on("camera_ratio",this.zoomAnim,this)},onDestroy:function(){cc.director.off("camera_ratio",this.zoomAnim,this)},zoomAnim:function(t,e){if(e=e||0,this._zoomTo=t,e<=0)this.camera.zoomRatio=t,this._zoomDelta=0;else{var i=t-this.camera.zoomRatio;this._zoomDelta=i/e}},lateUpdate:function(t){var e=this.targetNode;if(e){cc.visibleRect;var s=e.x+i.CAMERA_OFFX,n=e.y+i.CAMERA_OFFY;this._shake&&(s+=this._shake._offX,n+=this._shake._offY),this.node.position=cc.v3(s,n,this.node.z);var o=this.camera.zoomRatio;if(this._zoomTo!=o){var a=this._zoomDelta*t;o+=a,Math.abs(o-this._zoomTo)<Math.abs(a)?this.camera.zoomRatio=this._zoomTo:this.camera.zoomRatio=o}}}});cc._RF.pop()},{}],CustomTouchPad:[function(t,e){"use strict";cc._RF.push(e,"56878BiOLBOAKReCCWkncEG","CustomTouchPad");var i=t("TouchPad"),s=t("ParticleGdx");cc.Class({extends:i,properties:{effClick:s},onTouchStart:function(t){this._super(t),this.effClick.startRun()},onTouchMove:function(t){this.effClick.node.x+=t.getDeltaX(),this.effClick.node.y+=t.getDeltaY(),this._super(t)},onTouchEnd:function(t){this._super(t),this.effClick.stop()}}),cc._RF.pop()},{ParticleGdx:"ParticleGdx",TouchPad:"TouchPad"}],DecorationManager:[function(t,e){"use strict";cc._RF.push(e,"c3512pELK1GubMzbnpul8OP","DecorationManager");var i=cc.Class({name:"DecorationData",properties:{prefab:cc.Prefab,per:100}}),s=cc.Class({extends:cc.Component,properties:{gridX:20,gridY:20,num:30,datas:[i]},statics:{instance:null},ctor:function(){s.instance=this},init:function(){this.clearAll(),this.generate()},generate:function(){for(var t=[],e=0;e<this.gridX*this.gridY;e++)t.push(e);for(var i=-this.node.width*this.node.anchorX,s=-this.node.height*this.node.anchorY,n=this.node.width/this.gridX,o=this.node.height/this.gridY,a=0;a<this.num&&!(t.length<=0);a++)for(var c=100*Math.random(),r=0,h=0;h<this.datas.length;h++){var l=this.datas[h];if(c<(r+=l.per)){var d=cc.instantiate(l.prefab),u=Math.floor(Math.random()*t.length),f=i+n*(t[u]%this.gridX),p=s+o*Math.floor(t[u]/this.gridX);f+=Math.floor(Math.random()*(n-d.width)+d.width/2),p+=Math.floor(Math.random()*(o-d.height)+d.height/2),d.position=cc.v3(f,p,0),this.node.addChild(d),t.splice(u,1);break}}},clearAll:function(){this.node.desroyAllChildren()},start:function(){this.generate()}});cc._RF.pop()},{}],EffectManager:[function(t,e){"use strict";cc._RF.push(e,"9f0c2a6bu5F8bRgkYzaOTqu","EffectManager"),cc.Class({extends:cc.Component,ctor:function(){this.m_ndEftShieldLoop=null,this.m_ndEftSkillBlade=null,this.m_arrEftText=[],this.m_bIsShowEftText=!1},properties:{m_ndMap:cc.Node,m_arrColor:[cc.Color],m_pfEftText:cc.Prefab,m_pfUpgrade:cc.Prefab,m_pfItemDis:cc.Prefab,m_pfEmyDis:cc.Prefab,m_pfEmyDisFire:cc.Prefab,m_pfEmyStun:cc.Prefab,m_pfShieldLoop:cc.Prefab,m_pfShieldBroke:cc.Prefab,m_pfBurstStart:cc.Prefab,m_pfBurstEnd:cc.Prefab,m_pfBurstLoop:cc.Prefab,m_pfBurstStart2:cc.Prefab,m_pfBurstEnd2:cc.Prefab,m_pfBurstLoop2:cc.Prefab,m_pfSkillStart:cc.Prefab,m_pfSkBladeLoop:cc.Prefab,m_pfSkFireLoop:cc.Prefab,m_pfSkLightLine:cc.Prefab,m_pfSkLightHit:cc.Prefab,m_pfSkWatermelon:cc.Prefab,_isPause:!1},onLoad:function(){this.m_arrEftText=[],cc.director.on("add_effect_text",this.onAddEffectText,this),cc.director.on("add_effect_upgrade",this.onAddEffectUpgrade,this),cc.director.on("add_effect_emyDis",this.onAddEffectEnemyDisappear,this),cc.director.on("add_effect_emyDisFire",this.onAddEffectEnemyDisappearFire,this),cc.director.on("add_effect_itemDis",this.onAddEffectItemDisappear,this),cc.director.on("add_effect_stun",this.onAddEffectStun,this),cc.director.on("add_effect_shield",this.onAddEffectShield,this),cc.director.on("add_effect_burst",this.onAddEffectBurst,this),cc.director.on("add_effect_skillStart",this.onAddEffectSkillStart,this),cc.director.on("add_effect_skBlade",this.onAddEffectSkillBlade,this),cc.director.on("add_effect_skFire",this.onAddEffectSkillFireLoop,this),cc.director.on("add_effect_skLightLine",this.onAddEffectSkillLightLine,this),cc.director.on("add_effect_skLightHit",this.onAddEffectSkillLightHit,this),cc.director.on("add_effect_skWatermelonStart",this.onAddEffectSkillWatermelonStart,this),cc.director.on("add_effect_skWatermelonHit",this.onAddEffectSkillWatermelonHit,this),cc.director.on("game_pause",this.onGamePause,this)},onDestroy:function(){cc.director.off("add_effect_text",this.onAddEffectText,this),cc.director.off("add_effect_upgrade",this.onAddEffectUpgrade,this),cc.director.off("add_effect_emyDis",this.onAddEffectEnemyDisappear,this),cc.director.off("add_effect_emyDisFire",this.onAddEffectEnemyDisappearFire,this),cc.director.off("add_effect_itemDis",this.onAddEffectItemDisappear,this),cc.director.off("add_effect_stun",this.onAddEffectStun,this),cc.director.off("add_effect_shield",this.onAddEffectShield,this),cc.director.off("add_effect_burst",this.onAddEffectBurst,this),cc.director.off("add_effect_skillStart",this.onAddEffectSkillStart,this),cc.director.off("add_effect_skBlade",this.onAddEffectSkillBlade,this),cc.director.off("add_effect_skFire",this.onAddEffectSkillFireLoop,this),cc.director.off("add_effect_skLightLine",this.onAddEffectSkillLightLine,this),cc.director.off("add_effect_skLightHit",this.onAddEffectSkillLightHit,this),cc.director.off("add_effect_skWatermelonStart",this.onAddEffectSkillWatermelonStart,this),cc.director.off("add_effect_skWatermelonHit",this.onAddEffectSkillWatermelonHit,this),cc.director.off("game_pause",this.onGamePause,this)},onGamePause:function(t){this._isPause=t},update:function(){this._isPause||this.runEftText()},runEftText:function(){var t=this;if(!this.m_bIsShowEftText&&0!==this.m_arrEftText.length){this.m_bIsShowEftText=!0;var e=this.m_arrEftText.shift(),i=cc.instantiate(this.m_pfEftText);i.getComponent(cc.Label).string=e.txt,i.color=this.m_arrColor[e.color],this.node.addChild(i),cc.tween(i).by(.25,{y:150},{easing:"cubicOut"}).delay(.15).call(function(){t.m_bIsShowEftText=!1}).to(.2,{scale:1===e.color?4:1,opacity:0}).removeSelf().start()}},onAddEffectText:function(t,e){this.m_arrEftText.push({txt:t,color:e})},onAddEffectUpgrade:function(){var t=cc.instantiate(this.m_pfUpgrade);this.node.addChild(t)},onAddEffectShield:function(t,e){if(this.m_ndEftShieldLoop||(this.m_ndEftShieldLoop=cc.instantiate(this.m_pfShieldLoop),this.node.addChild(this.m_ndEftShieldLoop)),this.m_ndEftShieldLoop.active=t,e){var i=cc.instantiate(this.m_pfShieldBroke);this.node.addChild(i)}},onAddEffectBurst:function(e,i,s,n){void 0===n&&(n=!1);var o=e.getChildByName(n?"eftBurst2":"eftBurst");if(s){var a=cc.instantiate(n?this.m_pfBurstStart2:this.m_pfBurstStart);if(this.node.addChild(a),!o){(o=cc.instantiate(n?this.m_pfBurstLoop2:this.m_pfBurstLoop)).name=n?"eftBurst2":"eftBurst";var c=t("CameraController").instance.camera.zoomRatio;o.scale=i/c,e.addChild(o)}}else{var r=cc.instantiate(n?this.m_pfBurstEnd2:this.m_pfBurstEnd);this.node.addChild(r),o&&o.removeFromParent()}},onAddEffectItemDisappear:function(e){var i=cc.instantiate(this.m_pfItemDis);i.position=e;var s=t("CameraController").instance.camera.zoomRatio;i.scale=1/s,this.m_ndMap.addChild(i)},onAddEffectStun:function(t,e,i){var s=t.getChildByName("tagStun");if(i){if(!s){var n=cc.instantiate(this.m_pfEmyStun);n.scale=e,n.name="tagStun",t.addChild(n)}}else s&&s.removeFromParent()},onAddEffectSkillStart:function(){var t=cc.instantiate(this.m_pfSkillStart);this.node.addChild(t)},onAddEffectSkillBlade:function(t){this.m_ndEftSkillBlade||(this.m_ndEftSkillBlade=cc.instantiate(this.m_pfSkBladeLoop),this.node.addChild(this.m_ndEftSkillBlade)),this.m_ndEftSkillBlade.active=t},onAddEffectEnemyDisappear:function(t,e){var i=cc.instantiate(this.m_pfEmyDis);i.position=t,i.scale=e,this.m_ndMap.addChild(i)},onAddEffectEnemyDisappearFire:function(t,e){var i=cc.instantiate(this.m_pfEmyDisFire);i.position=t,i.scale=e,this.m_ndMap.addChild(i)},onAddEffectSkillFireLoop:function(e,i){var s=e.getChildByName("skFire");if(i){if(!s){(s=cc.instantiate(this.m_pfSkFireLoop)).name="skFire";var n=t("CameraController").instance.camera.zoomRatio;s.scale=1/n,e.addChild(s)}}else s&&s.removeFromParent()},onAddEffectSkillLightLine:function(t,e){var i=e.sub(t),s=cc.v2(i.x,i.y),n=180*s.signAngle(cc.v2(0,1))/Math.PI,o=cc.instantiate(this.m_pfSkLightLine);this.node.addChild(o),o.angle=-n,o.scaleY=s.mag()/128},onAddEffectSkillLightHit:function(t,e){var i=cc.instantiate(this.m_pfSkLightHit);i.position=t,i.scale=e,this.m_ndMap.addChild(i)},onAddEffectSkillWatermelonStart:function(){var t=cc.instantiate(this.m_pfSkWatermelon);this.node.addChild(t)},onAddEffectSkillWatermelonHit:function(t,e){var i=cc.instantiate(this.m_pfUpgrade);i.position=t,i.scale=e,this.m_ndMap.addChild(i)}}),cc._RF.pop()},{CameraController:"CameraController"}],EffectReciver:[function(t,e){"use strict";cc._RF.push(e,"a7d2exBYQRHL7UDGAXjsQzw","EffectReciver"),cc.Class({extends:cc.Component,properties:{prefab:cc.Prefab},onAddEffect:function(t,e){if(t===this.prefab.name){var i=cc.instantiate(this.prefab);e&&(null!=e.pos&&(i.position=e.pos),null!=e.scale&&(i.scale=e.scale)),this.node.addChild(i)}},onLoad:function(){cc.director.on("add_effect",this.onAddEffect,this)},onDestroy:function(){cc.director.off("add_effect",this.onAddEffect,this)},start:function(){}}),cc._RF.pop()},{}],EnergyBar:[function(t,e){"use strict";cc._RF.push(e,"0c9482NQ99NiLoCbP/TqZEA","EnergyBar");var i=t("SaveData");cc.Class({extends:cc.Component,properties:{m_lbCount:cc.Label},onLoad:function(){this.refreshEnergy(),this.node.on("touchend",this.onTouchEnd,this)},onDestroy:function(){this.node.off("touchend",this.onTouchEnd,this)},refreshEnergy:function(){this.m_lbCount.string=i.data.energy.toString()},showEnergy:function(t){this.node.active=t},onTouchEnd:function(){cc.director.emit("play_sound","click"),i.data.energy<5?cc.director.emit("show_energy_supply",!0):cc.director.emit("show_toast","\u4f53\u529b\u5df2\u6ee1\uff01")}}),cc._RF.pop()},{SaveData:void 0}],EnergySupply:[function(t,e){"use strict";cc._RF.push(e,"0d6eeNp4EJBtoRLURXIxjrG","EnergySupply");var i=t("AdUtils"),s=t("MathUtils"),n=t("SaveData");cc.Class({extends:cc.Component,properties:{m_ndPanel:cc.Node},showEnergySupply:function(t){this.node.active=t,t&&(i.showInterstitial(0),cc.director.emit("show_toast","\u4f53\u529b\u4e0d\u591f\u4e86"),s.addActionPopup(this.m_ndPanel),n.data.energyToday++)},onClickBtnClose:function(){1===n.data.energyToday&&cc.mgf.v1?this.onClickBtnSupply():(cc.director.emit("play_sound","click"),this.showEnergySupply(!1))},onClickBtnSupply:function(){var t=this;i.showVideo(0,function(e){e?(n.data.energy=5,n.save(),cc.director.emit("show_toast","\u4f53\u529b\u5df2\u8865\u6ee1\uff01"),cc.director.emit("refresh_energy"),t.showEnergySupply(!1)):cc.director.emit("show_toast","\u770b\u5b8c\u89c6\u9891\u624d\u80fd\u83b7\u5f97\u5956\u52b1\u54e6")},function(){cc.director.emit("show_toast","\u64ad\u653e\u89c6\u9891\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5")})}}),cc._RF.pop()},{AdUtils:"AdUtils",MathUtils:"MathUtils",SaveData:void 0}],FireWorks:[function(t,e){"use strict";function i(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=s(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=t[Symbol.iterator]()).next.bind(i)}function s(t,e){if(t){if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(t,e):void 0}}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}cc._RF.push(e,"e480cWstLFCPpw4SoYkPHkM","FireWorks");var o=t("SaveData"),a=t("ParticleGdx"),c=t("MathUtils"),r=t("AdUtils");cc.Class({extends:cc.Component,ctor:function(){this.m_bIsBlack=!1,this.m_arrFWCD=[0,0,0,0]},properties:{m_block:cc.BlockInputEvents,m_arrSpIcon:[cc.Sprite],m_arrNdTail:[cc.Node],m_arrPBoom:[a],m_arrNdAdTag:[cc.Node]},onLoad:function(){},refreshFw:function(){for(var t=0;t<this.m_arrSpIcon.length;t++){var e=t<o.data.fireworks;this.m_arrSpIcon[t].node.active=e,this.m_arrNdAdTag[t].active=!e}this.m_block.enabled=!1,this.m_block.node.opacity=0;for(var s,n=i(this.m_arrNdTail);!(s=n()).done;)s.value.active=!1;for(var a,c=i(this.m_arrPBoom);!(a=c()).done;)a.value.node.active=!1},start:function(){},onClickBtnFw:function(t,e){var i=this;cc.director.emit("play_sound","click");var s=parseInt(e);s>=o.data.fireworks?r.showVideo(0,function(t){t?i.playFirework([0,1,2,3]):cc.director.emit("show_toast","\u770b\u5b8c\u89c6\u9891\u624d\u80fd\u653e\u70df\u82b1\u54e6")},function(){cc.director.emit("show_toast","\u64ad\u653e\u89c6\u9891\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5")}):this.m_arrFWCD[s]>0||this.playFirework([s])},playFirework:function(t){for(var e=this,i=0;i<t.length;i++){var s=t[i];this.m_arrFWCD[s]=10}if(this.m_block.enabled)for(var n=0;n<t.length;n++)this.startFirework(t[n]);else this.m_block.enabled=!0,cc.director.emit("show_energy",!1),cc.Tween.stopAllByTarget(this.m_block.node),cc.tween(this.m_block.node).to(.5,{opacity:220}).call(function(){for(var i=0;i<t.length;i++)e.startFirework(t[i]);e.m_block.node.on("touchend",e.onTouchBg,e)}).start()},update:function(t){for(var e=0;e<this.m_arrSpIcon.length&&this.m_arrSpIcon[e].node.active;e++)this.m_arrFWCD[e]>0&&(this.m_arrFWCD[e]-=t,this.m_arrFWCD[e]=Math.max(0,this.m_arrFWCD[e])),this.m_arrSpIcon[e].fillRange=(10-this.m_arrFWCD[e])/10},onTouchBg:function(){cc.director.emit("show_energy",!0),this.m_block.enabled=!1,this.m_block.node.opacity=0,this.m_block.node.off("touchend",this.onTouchBg,this)},startFirework:function(t){console.log("start : "+t),cc.director.emit("play_sound","fw_start");var e=this.m_arrNdTail[t],i=this.m_arrPBoom[t];i.node.active=!1,e.position=cc.v3(0,0),e.active=!0;var s=c.randomInt(600,850);cc.Tween.stopAllByTarget(e),cc.tween(e).to(1.5,{y:s},{easing:cc.easing.quadOut}).call(function(){i.node.position=e.position,i.node.active=!0,i.reset(),i.startRun(),e.position=cc.v3(0,-9999),cc.director.emit("play_sound","fw_boom")}).start()}}),cc._RF.pop()},{AdUtils:"AdUtils",MathUtils:"MathUtils",ParticleGdx:"ParticleGdx",SaveData:void 0}],FishAI:[function(t,e){"use strict";cc._RF.push(e,"0fdf6+NUchCsrRLT4RGfYmH","FishAI");var i=t("AI"),s=t("UserFishes"),n=t("FishManager");cc.Class({extends:i,properties:{detectR:500},getDetectR:function(){return this.detectR},getUsers:function(){return[s.instance]},getEnemys:function(){return n.instance._enemys},checkAttackUser:function(t,e,i){return t.level>e.getLevel()?e:i},checkEscapeUser:function(t,e,i){return t.level<=e.getLevel()?e:i},checkEscapeEnemy:function(t,e,i){return t.level<e.level?e:i},start:function(){}}),cc._RF.pop()},{AI:"AI",FishManager:"FishManager",UserFishes:"UserFishes"}],FishManager:[function(t,e){"use strict";cc._RF.push(e,"eab92W+5QdI0oZzoYu+DA1U","FishManager");var i=t("SaveData"),s=t("GenerateFishData"),n=s.DataModeRank,o=s.MAX_FISH,a=s.DataModeEndless,c=s.DataModeSurvival,r=s.RankModeFish,h=s.CAMERA_RATIOS,l=t("UserFishes"),d=cc.Class({extends:cc.Component,properties:{prefabs:[cc.Prefab],_users:[],_enemys:[],_enemyCounts:[],_isPause:!1},statics:{instance:null},ctor:function(){d.instance=this},onGameInit:function(){this.clearAll(),this._isPause=!1},onGameStart:function(){this.initUser(),this.initEnemys()},onAddFish:function(t){var e=this.generateFish(t.level);e&&(e._isUser=t.user||!1,t.pos&&(e.node.active=!1,e.node.position=t.pos,e.node.active=!0),e._isUser?(e.node.group="fish_user",e.node.removeComponent("FishAI"),this._users.push(e),t.isFirst&&(l.instance._lastLevel=t.level,l.instance._maxLevel=t.level,cc.director.emit("camera_ratio",h[Math.floor(t.level/2)],0))):(e.node.group="fish_enemy",e.setAngle(360*Math.random()),e._speed=200,this._enemyCounts[t.level]++,this._enemys.push(e),!1===t.ai&&(e.node.removeComponent("FishAI"),e.startRun())),null!=t.angle&&e.setAngle(t.angle),null!=t.removeCD&&(e._removeCD=t.removeCD),null!=t.speed&&(e._speed=t.speed),this._isPause&&e.pause(!0),cc.director.emit("fish_added",e),this.node.addChild(e.node,-t.level))},onFishRemoved:function(t){if(t._isUser){for(var e=0;e<this._users.length;e++)if(this._users[e]===t){this._users.splice(e,1);break}}else{this._enemyCounts[t.level]--;for(var i=0;i<this._enemys.length;i++)if(this._enemys[i]===t){this._enemys.splice(i,1);break}}},generateFish:function(t){var e=t;cc.isSpider&&e<=1&&(e+=19);var i=cc.instantiate(this.prefabs[e]);return i?i.getComponent("Fish"):null},clearAll:function(){this.node.destroyAllChildren(),this._users=[],this._enemys=[],this._enemyCounts.length=this.prefabs.length-2;for(var t=0;t<this._enemyCounts.length;t++)this._enemyCounts[t]=0},initUser:function(){var t=this.getInitFishId();this.onAddFish({level:t,user:!0,pos:cc.v3(),isFirst:!0})},getInitFishId:function(){switch(cc.RankMode){case 0:return r[i.data.rank].start;case 1:case 2:return 0}},initEnemys:function(){for(var t=0;t<o;t++)this.generateEnemy()},generateEnemy:function(){if(!(this._enemys.length>=o)){var e=t("UserFishes").instance.getLevel(),i=this.getEnemyData(e);if(i)for(var s=0,n=0;n<i.pers.length;n++){var a=i.start+n;if(s=o*i.pers[n]/100,a=Math.min(Math.max(0,a),this.prefabs.length-2-2),this._enemyCounts[a]<s){this.onAddFish({level:a,user:!1,pos:this.getRndPos()});break}}}},getEnemyData:function(t){switch(cc.RankMode){case 0:return n[i.data.rank];case 1:return a[t];case 2:return c}},getRndPos:function(){var e,i,s,n,o,a,c=t("CameraController").instance.camera,r=c.node.position,h=c.zoomRatio,l=0,d=99999999;do{if(l>=50){e=o,i=a;break}e=(Math.random()-.5)*this.node.width,i=(Math.random()-.5)*this.node.height,(s=Math.abs(r.x-e)*h)+(n=Math.abs(r.y-i)*h)<d&&(d=s+n,o=e,a=i),l++}while(s<460||n<850);return cc.v3(e,i,0)},onClearFish:function(t){for(var e=this._enemys.length-1;e>=0;e--){var i=this._enemys[e];i.level!==t||i.isInScreen()||this._enemys[e].removeSelf()}},onClearBigFish:function(t){for(var e=this._enemys.length-1;e>=0;e--){var i=this._enemys[e];i.level>=t&&!i.isInScreen()&&this._enemys[e].removeSelf()}},onGamePause:function(t){this._isPause=t;for(var e=0;e<this._users.length;e++)this._users[e].pause(t);for(var i=0;i<this._enemys.length;i++)this._enemys[i].pause(t)},killFish1280:function(){for(var e=t("UserFishes").instance.node,i=0;i<this._enemys.length;i++){var s=this._enemys[i],n=Math.abs(e.x-s.node.x),o=Math.abs(e.y-s.node.y);n<=1280&&o<=1280&&s.removeSelf()}},tadpoleEvolution:function(){for(var t=0;t<this._enemys.length;t++){var e=this._enemys[t];e.level>0||(e.removeSelf(),this.onAddFish({level:1,user:!1,pos:e.node.position,angle:e._angle}))}for(var i=0;i<this._users.length;i++){var s=this._users[i];s.level>0||(s.removeSelf(),this.onAddFish({level:1,user:!0,pos:s.node.position,angle:s._angle}))}},allEvolution:function(){for(var e=t("UserFishes").instance.node,i=this._enemys.length-1;i>=0;i--){var s=this._enemys[i];if(!(s.level>=17)){var n=Math.abs(e.x-s.node.x),o=Math.abs(e.y-s.node.y);n<=1280&&o<=1280&&(s.removeSelf(),this.onAddFish({level:s.level+1,user:!1,pos:s.node.position,angle:s._angle}))}}},initTadpoleGroup:function(){cc.director.emit("add_effect_text",cc.isSpider?"\u4e00\u5927\u7fa4\u5c0f\u8718\u86db\u6b63\u5728\u9760\u8fd1":"\u4e00\u5927\u7fa4\u5c0f\u874c\u86aa\u6b63\u5728\u9760\u8fd1",0);var e,i,s,n=t("UserFishes").instance.node,o=t("CameraController").instance.camera.zoomRatio,a=cc.visibleRect,c=a.width/o,r=a.height/o,h=Math.floor(4*Math.random()),l=cc.v2(),d=cc.v2();switch(h){case 0:s=0,e=n.x-c/2-50,i=n.y+500,d.y=-100,l.x=-100;break;case 1:s=90,e=n.x-500,i=n.y-r/2-50,d.x=100,l.y=-100;break;case 2:s=180,e=n.x+c/2+50,i=n.y-500,d.y=100,l.x=100;break;case 3:s=270,e=n.x+r/2+50,i=n.y+500,d.x=-100,l.y=100}for(var u=0;u<10;u++)for(var f=0;f<10;f++){var p=e+u*l.x+f*d.x,m=i+u*l.y+f*d.y;p+=50*(Math.random()-.5),m+=50*(Math.random()-.5),this.onAddFish({level:0,pos:cc.v3(p,m,0),user:!1,ai:!1,angle:s,speed:300+200*(Math.random()-.5),removeCD:10})}},initDrgonGroup:function(){cc.director.emit("add_effect_text","\u4e00\u5927\u7fa4\u86df\u9f99\u6b63\u5728\u9760\u8fd1",0);for(var e=t("MathUtils"),i=t("UserFishes").instance.node,s=t("CameraController").instance.camera.zoomRatio,n=cc.visibleRect,o=n.width/s,a=n.height/s,c=e.atan2(cc.v2(o,a)),r=1200,h=i.x+o/2,l=i.y+a/2,d=e.cos(c),u=e.sin(c),f=0;f<5;f++){var p=h+r*d*(f+.5),m=l+r*u*(f+.5);this.onAddFish({level:17,pos:cc.v3(p,m,0),user:!1,ai:!1,angle:c+180,removeCD:20}),p=h-o-r*d*(f+.5),this.onAddFish({level:17,pos:cc.v3(p,m,0),user:!1,ai:!1,angle:-c,removeCD:20})}},onLoad:function(){cc.director.on("game_init",this.onGameInit,this),cc.director.on("game_start",this.onGameStart,this),cc.director.on("add_fish",this.onAddFish,this),cc.director.on("fish_removed",this.onFishRemoved,this),cc.director.on("clear_fish",this.onClearFish,this),cc.director.on("game_pause",this.onGamePause,this),cc.director.on("tadpole_evolution",this.tadpoleEvolution,this),cc.director.on("all_evolution",this.allEvolution,this),cc.director.on("tadpole_group",this.initTadpoleGroup,this),cc.director.on("dragon_group",this.initDrgonGroup,this),cc.director.on("clear_big_fish",this.onClearBigFish,this)},onDestroy:function(){cc.director.off("game_init",this.onGameInit,this),cc.director.off("game_start",this.onGameStart,this),cc.director.off("add_fish",this.onAddFish,this),cc.director.off("fish_removed",this.onFishRemoved,this),cc.director.off("clear_fish",this.onClearFish,this),cc.director.off("game_pause",this.onGamePause,this),cc.director.off("tadpole_evolution",this.tadpoleEvolution,this),cc.director.off("all_evolution",this.allEvolution,this),cc.director.off("tadpole_group",this.initTadpoleGroup,this),cc.director.off("dragon_group",this.initDrgonGroup,this),cc.director.off("clear_big_fish",this.onClearBigFish,this)},start:function(){},update:function(){this.generateEnemy()}});cc._RF.pop()},{CameraController:"CameraController",GenerateFishData:"GenerateFishData",MathUtils:"MathUtils",SaveData:void 0,UserFishes:"UserFishes"}],Fish:[function(t,e){"use strict";cc._RF.push(e,"ca575qGTAlCNZ6qp210oar9","Fish");var i=t("Role"),s=t("CameraController"),n=t("../data/GenerateFishData").EFFECTSCALE;cc.Class({extends:i,properties:{level:0,_isPause:!1,_isFreeze:!1,_freezeTime:0,_removeFlag:!1,_removeCD:0},runMove:function(t){if(!this._isFreeze){var e=this._speed;this._speed/=s.instance.camera.zoomRatio,this._super(t),this._speed=e}},removeSelf:function(){this._isAlive=!1,this._removeFlag=!0,cc.director.emit("fish_removed",this)},checkRemoveFlag:function(){this._removeFlag&&cc.isValid(this)&&this.node.destroy()},getR:function(){return 20+10*this.level},checkEdge:function(t){var e=this.getR(),i=this.node.parent.width/2-e,s=this.node.parent.height/2-e;t.x=Math.min(Math.max(-i,t.x),i),t.y=Math.min(Math.max(-s,t.y),s)},isInScreen:function(){var e=t("CameraController").instance.camera,i=e.node.position,s=e.zoomRatio,n=Math.abs(this.node.x-i.x)*s,o=Math.abs(this.node.y-i.y)*s;return n<=460&&o<=850},onBeginContact:function(e,i,s){if(this._isAlive){var o=s.getComponent("Fish"),a=t("UserFishes").instance;if(o&&o._isAlive){var c=n[o.level],r=o.level,h=o.node.position;this._isUser?this.level>=r?(o.removeSelf(),cc.director.emit("add_score",Math.pow(3,r),h),cc.director.emit("add_effect_emyDis",o.node.position,c),cc.director.emit("add_fish",{level:r,user:!0}),cc.director.emit("play_sound","eat"),t("VibrateUtils").vibrateShort()):a._isBurst&&(o.removeSelf(),cc.director.emit("add_effect_emyDis",o.node.position,c),cc.director.emit("add_score",Math.pow(3,r),h),cc.director.emit("play_sound","eat"),t("VibrateUtils").vibrateShort()):o._isUser?a._isBurst||a._isInvincible||this.level>r&&(a._isShield?a.shieldBreak():(cc.director.emit("add_effect_emyDis",o.node.position,c),cc.director.emit("play_sound","hit"),o.removeSelf()),t("VibrateUtils").vibrateShort()):this.level>r&&o.isInScreen()&&(cc.director.emit("add_effect_emyDis",o.node.position,c),o.removeSelf())}}},pause:function(t){this._isPause=t;var e=this.drawNode&&this.drawNode.getComponent("sp.Skeleton");e&&(e.paused=t||this._isFreeze)},runRemoveCD:function(t){this._removeFlag||this._removeCD<=0||(this._removeCD-=t,this._removeCD<=0&&this.removeSelf())},freeze:function(t){this._isFreeze=!0,this._freezeTime=t;var e=this.drawNode&&this.drawNode.getComponent("sp.Skeleton");e&&(e.paused=!0);var i=n[this.level];cc.director.emit("add_effect_stun",this.node,i,!0)},runFreeze:function(t){this._isFreeze&&(this._freezeTime-=t,this._freezeTime<=0&&(this._isFreeze=!1,this.freezeEnd()))},freezeEnd:function(){var t=this.drawNode&&this.drawNode.getComponent("sp.Skeleton");t&&(t.paused=this._isPause),cc.director.emit("add_effect_stun",this.node,1,!1)},onLoad:function(){this._angleSpeed=this._isUser?10800:360},start:function(){},update:function(t){this._isPause||(this._super(t),this.runFreeze(t),this.runRemoveCD(t))},lateUpdate:function(){this.checkRemoveFlag()}}),cc._RF.pop()},{"../data/GenerateFishData":"GenerateFishData",CameraController:"CameraController",Role:"Role",UserFishes:"UserFishes",VibrateUtils:"VibrateUtils"}],GameLose:[function(t,e){"use strict";cc._RF.push(e,"c9fe1HJ/h1FrLynC9Rd+xWN","GameLose");var i=t("TTUtils"),s=t("AdUtils"),n=t("ShareUtils"),o=t("../data/GenerateFishData").FishNames,a=t("MathUtils");cc.Class({extends:cc.Component,properties:{lbLevel:cc.Label,lbPer:cc.Label,lbScore:cc.Label,animParent:cc.Node,m_ndMode0:cc.Node,m_ndMode1:cc.Node},show:function(t){var e=this;switch(this.node.active=!0,cc.director.emit("show_energy",!0),s.showInterstitial(0),s.showBanner(0),s.showCustomAd(1,.5,.5,-160,-320),cc.sys.platform===cc.sys.BYTEDANCE_GAME&&(i.recordStop(),this.showTTShare()),this.m_ndMode0.active=!1,this.m_ndMode1.active=!1,cc.RankMode){case 0:this.m_ndMode0.active=!0;break;case 1:this.m_ndMode1.active=!0;var n=cc.assetManager.getBundle("mainScene");this.animParent.destroyAllChildren(),n.load("prefabs/fish/fish"+t.level,cc.Prefab,function(t,i){if(t)console.error(t);else{var s=cc.instantiate(i);s.removeComponent("FishAI"),s.position=cc.v3(),s.scale=1,s.angle=90,s.group="ui",s.children[0].group="ui",e.animParent.addChild(s)}}),this.lbLevel.string=o[t.level],this.lbScore.string=t.score,this.lbPer.string=t.per+""}},hide:function(){cc.director.emit("show_energy",!1),this.node.active=!1,s.hideCustomAd(1)},onConitnueClicked:function(){cc.director.emit("play_sound","click"),a.checkEnergy()&&(this.hide(),cc.director.emit("game_init"))},onRankListClicked:function(){cc.director.emit("rank_list"),cc.director.emit("play_sound","click")},onBackClicked:function(){this.hide(),cc.director.emit("main_menu"),cc.director.emit("play_sound","click")},showTTShare:function(){cc.director.emit("tt_share")},onShareClicked:function(){cc.director.emit("play_sound","click"),cc.sys.platform===cc.sys.BYTEDANCE_GAME?this.showTTShare():cc.sys.platform===cc.sys.WECHAT_GAME&&n.share(0,!0,!0,{},0)},onClickBtnNextRank:function(){},start:function(){}}),cc._RF.pop()},{"../data/GenerateFishData":"GenerateFishData",AdUtils:"AdUtils",MathUtils:"MathUtils",ShareUtils:void 0,TTUtils:void 0}],GameUI:[function(t,e){"use strict";cc._RF.push(e,"f947ahmlXtI/LiJU1JjK5sT","GameUI");var i,s=(i=t("AdUtils"))&&i.__esModule?i:{default:i},n=t("Game");cc.Class({extends:cc.Component,properties:{lbScore:cc.Label,pfScore:cc.Prefab,scoreParent:cc.Node,spIcon:cc.Sprite,sfIcons:[cc.SpriteFrame]},show:function(){this.node.active=!0},hide:function(){this.node.active=!1,cc.director.emit("show_aim_tips",!1)},onPauseClicked:function(){cc.director.emit("pause_menu"),cc.director.emit("game_pause",!0),cc.director.emit("play_sound","click")},onGameInit:function(){this.lbScore.string="0",this.scoreParent.destroyAllChildren(),this.updateEvolutionIcon(0)},onAddScore:function(e,i){var s=this,o=t("CameraController").instance,a=o.node,c=o.camera.zoomRatio,r=cc.v3((i.x-a.x)*c,(i.y-a.y)*c,0),h=this.lbScore.node.convertToWorldSpaceAR(cc.v3()),l=this.scoreParent.convertToNodeSpaceAR(h),d=cc.instantiate(this.pfScore);d.parent=this.scoreParent,d.getComponent(cc.Label).string="."+e,d.position=r,cc.tween(d).by(.5,{y:50},{easing:cc.easing.cubicInOut}).to(.3,{position:l},{easing:cc.easing.cubicOut}).call(function(){var t=n.instance;s.lbScore.string=t._score+"",d.destroy()}).start()},updateEvolutionIcon:function(t){this.sfIcons[t]&&(this.spIcon.spriteFrame=this.sfIcons[t])},onLoad:function(){cc.director.on("game_init",this.onGameInit,this),cc.director.on("add_score",this.onAddScore,this),cc.director.on("evolution_icon",this.updateEvolutionIcon,this)},onDestroy:function(){cc.director.off("game_init",this.onGameInit,this),cc.director.off("add_score",this.onAddScore,this),cc.director.off("evolution_icon",this.updateEvolutionIcon,this)},start:function(){},onClickBtnSuperAd:function(){cc.director.emit("play_sound","click"),cc.director.emit("game_pause",!0),s.default.showVideo(0,function(t){cc.director.emit("game_pause",!1),t?cc.director.emit("burstEx",!0):cc.director.emit("show_toast","\u770b\u5b8c\u89c6\u9891\u624d\u80fd\u83b7\u5f97\u5956\u52b1\u54e6")},function(){cc.director.emit("game_pause",!1),cc.director.emit("show_toast","\u64ad\u653e\u89c6\u9891\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5")})}}),cc._RF.pop()},{AdUtils:"AdUtils",CameraController:"CameraController",Game:"Game"}],GameWin:[function(t,e){"use strict";cc._RF.push(e,"410146KlmtFY5/OIaziqya9","GameWin");var i=t("TTUtils"),s=t("AdUtils"),n=t("ShareUtils"),o=t("SaveData"),a=t("MathUtils");cc.Class({extends:cc.Component,properties:{m_ndMode1:cc.Node,lbScore:cc.Label,lbPer:cc.Label,spine:sp.Skeleton,scoreNode:cc.Node,m_ndBtnPlay:cc.Node,m_ndMode0:cc.Node,m_lbRank:cc.Label,m_ndBtns:cc.Node},show:function(t){var e=this;switch(cc.director.emit("game_pause",!0),this.node.active=!0,this.m_ndMode0.active=!1,this.m_ndMode1.active=!1,s.showInterstitial(0),s.showBanner(0),s.showCustomAd(1,.5,.5,-160,-320),cc.director.emit("show_energy",!0),cc.RankMode){case 0:this.m_ndMode0.active=!0,this.m_lbRank.string="\u7b2c "+o.data.rank+" \u5173",this.m_ndBtns.active=!0;break;case 1:this.m_ndMode1.active=!0,this.spine.setAnimation(0,"open",!1),this.lbScore.string=t.score,this.lbPer.string=t.per+"",this.scoreNode.active=!1,this.m_ndBtnPlay.active=!1,this.m_ndBtns.active=!1,cc.Tween.stopAllByTarget(this.node),cc.tween(this.node).delay(1.5).call(function(){e.scoreNode.active=!0,e.m_ndBtnPlay.active=!0,e.m_ndBtns.active=!0,cc.sys.platform===cc.sys.BYTEDANCE_GAME&&(i.recordStop(),e.showTTShare())}).start()}},hide:function(){this.node.active=!1,cc.director.emit("show_energy",!1),s.hideCustomAd(1)},onConitnueClicked:function(){cc.director.emit("play_sound","click"),a.checkEnergy()&&(this.hide(),cc.director.emit("game_init"))},onRankListClicked:function(){cc.director.emit("rank_list"),cc.director.emit("play_sound","click")},onBackClicked:function(){this.hide(),cc.director.emit("main_menu"),cc.director.emit("play_sound","click")},showTTShare:function(){cc.director.emit("tt_share")},onShareClicked:function(){cc.sys.platform===cc.sys.BYTEDANCE_GAME?this.showTTShare():cc.sys.platform===cc.sys.WECHAT_GAME&&n.share(0,!0,!0,{},0)},onClickBtnNext:function(){cc.director.emit("play_sound","click"),a.checkEnergy()&&(this.hide(),cc.director.emit("game_init"))},start:function(){}}),cc._RF.pop()},{AdUtils:"AdUtils",MathUtils:"MathUtils",SaveData:void 0,ShareUtils:void 0,TTUtils:void 0}],Game:[function(t,e){"use strict";cc._RF.push(e,"8768fvbYwdGwbtm6tB6It/7","Game");var i=t("TTUtils"),s=t("AdUtils"),n=t("SaveData"),o=cc.Class({extends:cc.Component,properties:{_revived:!1,_time:0,_score:0,_skillLevels:[]},statics:{instance:null},ctor:function(){o.instance=this},onGameInit:function(){this._revived=!1,this._time=0,this._score=0,this._skillLevels=[0,0,0,0,0,0],this.scheduleOnce(function(){cc.director.emit("game_start"),cc.director.emit("game_pause",!0),cc.director.emit("show_skill_upgrade",!0,1),cc.sys.platform===cc.sys.BYTEDANCE_GAME&&(i.recordStart(),s.stopBanner())},0)},onSkillUpgradeClose:function(){cc.director.emit("block_on"),cc.director.emit("show_aim_panel",!0),this.scheduleOnce(function(){switch(cc.director.emit("block_off"),cc.director.emit("show_aim_panel",!1),cc.RankMode){case 0:cc.director.emit("show_aim_tips",!0),cc.director.emit("skill_select");break;case 1:cc.director.emit("skill_select");break;case 2:cc.director.emit("game_pause",!1)}},2)},onSkillSelectClose:function(){n.data.startBurst&&(cc.director.emit("burstEx",!0),n.data.startBurst=!1,n.save())},onUserDeath:function(){var e=this;i.recordPause(),this.onSubmitScore(),s.showBanner(0),this.scheduleOnce(function(){if(e._revived){var i=t("UserFishes").instance._maxLevel,s=e.getPercent(i);cc.director.emit("game_lose",{level:i,score:e._score,per:s})}else cc.director.emit("revive_menu")},2)},onGameRevive:function(){this._revived=!0,cc.sys.platform===cc.sys.BYTEDANCE_GAME&&(i.recordResume(),s.stopBanner())},onReviveFail:function(){var e=t("UserFishes").instance._maxLevel,i=this.getPercent(e);cc.director.emit("game_lose",{level:e,score:this._score,per:i})},onAddScore:function(t){this._score+=t},onSubmitScore:function(){var e=t("SubContextView"),i=t("SaveData");this._score>i.data.highScore&&(i.updateHighScore(this._score),i.save(),e.submitScore("score",this._score,function(){cc.director.emit("update_pass_rank")}))},getPercent:function(t){return Math.floor(5*t+7)},onUserVictory:function(){var t=this;this.scheduleOnce(function(){var e=t.getPercent(18);cc.director.emit("game_win",{score:t._score,per:e})},1)},onLoad:function(){cc.director.on("game_init",this.onGameInit,this),cc.director.on("user_death",this.onUserDeath,this),cc.director.on("user_victory",this.onUserVictory,this),cc.director.on("game_revive",this.onGameRevive,this),cc.director.on("revive_fail",this.onReviveFail,this),cc.director.on("add_score",this.onAddScore,this),cc.director.on("submit_score",this.onSubmitScore,this),cc.director.on("skill_upgrade_close",this.onSkillUpgradeClose,this),cc.director.on("skill_select_close",this.onSkillSelectClose,this)},onDestroy:function(){cc.director.off("game_init",this.onGameInit,this),cc.director.off("user_death",this.onUserDeath,this),cc.director.off("user_victory",this.onUserVictory,this),cc.director.off("game_revive",this.onGameRevive,this),cc.director.off("revive_fail",this.onReviveFail,this),cc.director.off("add_score",this.onAddScore,this),cc.director.off("submit_score",this.onSubmitScore,this),cc.director.off("skill_upgrade_close",this.onSkillUpgradeClose,this),cc.director.off("skill_select_close",this.onSkillSelectClose,this)},start:function(){cc.director.emit("main_menu")}});cc._RF.pop()},{AdUtils:"AdUtils",SaveData:void 0,SubContextView:"SubContextView",TTUtils:void 0,UserFishes:"UserFishes"}],GenerateFishData:[function(t,e,i){"use strict";cc._RF.push(e,"2d137ncyXtOmanG3353Sqcd","GenerateFishData"),i.__esModule=!0,i.DataModeEndless=i.DataModeSurvival=i.DataModeRank=i.RankModeFish=i.FishNames=i.EFFECTSCALE=i.CAMERA_RATIOS=i.MAX_FISH=void 0,i.MAX_FISH=300,i.CAMERA_RATIOS=[1,.85,.7,.55,.45,.42,.32,.22,.2,.2],i.EFFECTSCALE=[.7,.7,.8,.8,.85,.85,.9,.95,1,1.15,1.3,1.45,1.6,1.7,1.85,2,2.1,2.4,3];var s=[cc.isSpider?"\u5c0f\u8718\u86db":"\u5c0f\u874c\u86aa",cc.isSpider?"\u5927\u8718\u86db":"\u5927\u874c\u86aa","\u5c0f\u9752\u86d9","\u5927\u9752\u86d9","\u5c0f\u4e4c\u9f9f","\u5927\u4e4c\u9f9f","\u5c0f\u91d1\u9c7c","\u5927\u91d1\u9c7c","\u5c0f\u9526\u9ca4","\u5927\u9526\u9ca4","\u5c0f\u7535\u9cd7","\u5927\u7535\u9cd7","\u5c0f\u9ca8\u9c7c","\u5927\u9ca8\u9c7c","\u5c0f\u9cb8\u9c7c","\u5927\u9cb8\u9c7c","\u5c0f\u86df\u9f99","\u5927\u86df\u9f99"];i.FishNames=s,i.RankModeFish=[{start:0,end:6},{start:6,end:8},{start:8,end:10},{start:10,end:12},{start:12,end:14},{start:14,end:16}],i.DataModeRank=[{start:0,pers:[59,20,10,5,3,2,1]},{start:0,pers:[46,15,8,5,3,3,0,3,9,6,2]},{start:0,pers:[35,15,10,8,5,3,3,1,0,3,9,6,2]},{start:1,pers:[15,20,15,10,8,5,3,3,1,0,3,9,6,2]},{start:3,pers:[15,20,15,10,8,5,3,3,1,0,3,9,6,2]},{start:5,pers:[15,20,15,10,8,5,3,3,1,0,3,12,5]}],i.DataModeSurvival={start:0,pers:[80,14,3,2,1]},i.DataModeEndless=[{start:0,pers:[80,14,3,2,1]},{start:0,pers:[65,15,10,5,3,2]},{start:0,pers:[60,10,10,3,6,9,2]},{start:0,pers:[55,15,5,5,3,6,9,2]},{start:0,pers:[50,10,10,5,5,3,6,9,2]},{start:0,pers:[45,10,10,7,5,3,3,6,9,2]},{start:0,pers:[42,10,10,7,5,3,3,3,6,9,2]},{start:0,pers:[35,14,12,7,5,3,3,1,3,6,9,2]},{start:0,pers:[25,18,15,8,7,3,3,1,0,3,6,9,2]},{start:0,pers:[10,25,15,10,7,5,4,3,1,0,3,6,9,2]},{start:0,pers:[6,20,18,10,8,6,5,3,3,1,0,3,6,9,2]},{start:1,pers:[15,20,12,12,7,6,3,3,1,1,0,3,6,9,2]},{start:2,pers:[15,15,15,10,10,5,5,3,1,1,0,3,9,6,2]},{start:3,pers:[20,18,12,12,6,5,3,2,1,1,0,3,9,6,2]},{start:3,pers:[15,18,12,10,7,5,5,3,3,1,1,0,3,12,5]},{start:4,pers:[12,12,12,10,6,6,5,5,1,1,0,0,20,10]},{start:4,pers:[13,15,15,10,7,5,5,3,3,1,1,0,0,20]},{start:6,pers:[9,5,5,10,10,10,10,10,10,10,10,1]}],cc._RF.pop()},{}],ItemManager:[function(t,e){"use strict";cc._RF.push(e,"15392bM1TpHa5gEqHCsS47r","ItemManager");var i=t("SaveData"),s=[1,1,1,1];cc.Class({extends:cc.Component,properties:{m_pfItem:cc.Prefab,_cd:0,_isPause:!1,_count:0},runCD:function(t){this.node.children.length>=8||(this._cd-=t,this._cd<=0&&this.generateItem())},generateItem:function(){var e=0;if(cc.isFireworks&&i.data.fireworks<4&&1===cc.RankMode&&0===this._count)0===i.data.fireworks?e=4:i.data.rankCount>=5&&(e=4,i.data.rankCount=0,i.save());else if(this._count<3)e=1;else{for(var n=0,o=0;o<s.length;o++)n+=s[o];var a=Math.floor(Math.random()*n);n=0;for(var c=0;c<s.length&&(e=c,!(a<(n+=s[c])));c++);}var r=cc.instantiate(this.m_pfItem);r.getComponent("Item").initItem(e);var h=t("DecorationManager").instance.node.children,l=this.node.children,d=!1;do{d=!1;for(var u=(Math.random()-.5)*(this.node.width-100),f=(Math.random()-.5)*(this.node.height-100),p=0;p<h.length;p++){var m=h[p];if(!(u-r.width/2>=m.x+m.width/2||u+r.width/2<=m.x-m.width/2||f-r.height/2>=m.x+m.height/2||u-r.height/2>=m.x+m.height/2)){d=!0;break}}if(!d){for(var _=0;_<l.length;_++){var v=l[_];if(!(u-r.width/2>=v.x+v.width/2||u+r.width/2<=v.x-v.width/2||f-r.height/2>=v.x+v.height/2||u-r.height/2>=v.x+v.height/2)){d=!0;break}}d||(r.position=cc.v3(u,f,0))}}while(d);this.node.addChild(r),this._cd=20,this._count++},onGameInit:function(){this.node.destroyAllChildren(),this._cd=0,this._count=0},onGamePause:function(t){this._isPause=t},onLoad:function(){cc.director.on("game_init",this.onGameInit,this),cc.director.on("game_pause",this.onGamePause,this)},onDestroy:function(){cc.director.off("game_init",this.onGameInit,this),cc.director.off("game_pause",this.onGamePause,this)},start:function(){},update:function(t){this._isPause||this.runCD(t)}}),cc._RF.pop()},{DecorationManager:"DecorationManager",SaveData:void 0}],Item:[function(t,e){"use strict";cc._RF.push(e,"fb7f1Y4Q9NPGKOktMbLptNh","Item");var i=t("SaveData");cc.Class({extends:cc.Component,ctor:function(){this.m_iId=0},properties:{m_spIcon:cc.Sprite,m_arrSfIcon:[cc.SpriteFrame]},onLoad:function(){cc.tween(this.m_spIcon.node).by(.5,{y:10}).by(.5,{y:-10}).union().repeatForever().start()},initItem:function(t){this.m_iId=t;var e=t;cc.isSpider&&3===e&&(e=4),4===t&&(e=5),this.m_spIcon.spriteFrame=this.m_arrSfIcon[e]},onBeginContact:function(){switch(this.m_iId){case 0:cc.director.emit("add_shield");break;case 1:cc.director.emit("burst");break;case 2:cc.director.emit("copy_fish");break;case 3:cc.director.emit("tadpole_group");break;case 4:cc.director.emit("show_toast","\u606d\u559c\u83b7\u5f97\u4e00\u9897\u70df\u82b1\u5f69\u86cb\uff01"),i.data.fireworks++,i.save()}cc.director.emit("add_effect_itemDis",this.node.position),cc.director.emit("play_sound","getitem"),this.node.active=!1,this.node.destroy()}}),cc._RF.pop()},{SaveData:void 0}],Knife:[function(t,e){"use strict";cc._RF.push(e,"3ddd8oGKIJGjYmAKHhjCHD0","Knife");var i=t("CameraController"),s=t("UserFishes"),n=t("GenerateFishData");cc.Class({extends:cc.Component,properties:{},updateScale:function(){var t=i.instance.camera.zoomRatio;this.node.scale=1/t},onBeginContact:function(t,e,i){var o=i.getComponent("Fish");if(o){s.instance.getLevel()>=o.level&&cc.director.emit("add_fish",{level:o.level,user:!0});var a=n.EFFECTSCALE[o.level];cc.director.emit("add_effect_emyDis",o.node.position,a),cc.director.emit("add_score",Math.pow(3,o.level),o.node.position),o.removeSelf(),cc.director.emit("play_sound","sk_blade_hit")}},start:function(){},update:function(){this.updateScale()}}),cc._RF.pop()},{CameraController:"CameraController",GenerateFishData:"GenerateFishData",UserFishes:"UserFishes"}],MainMenu:[function(t,e){"use strict";cc._RF.push(e,"b8bdd+yb85O3KieTu7YP+lj","MainMenu");var i=t("AdUtils"),s=t("SaveData"),n=t("MathUtils"),o=t("FireWorks");cc.Class({extends:cc.Component,properties:{m_lbRankName:cc.Label,m_fireworks:o},show:function(){cc.RankMode=0,this.node.active=!0,i.showBanner(0),cc.sys.platform===cc.sys.BYTEDANCE_GAME&&tt.showFavoriteGuide&&tt.showFavoriteGuide({type:"tip",content:"\u4e00\u952e\u6dfb\u52a0\u5230\u6211\u7684\u5c0f\u7a0b\u5e8f"}),i.showCustomAd(2,1,.5,-70,-250),this.refreshRankInfo(),cc.director.emit("show_energy",!0),cc.isFireworks?this.m_fireworks.refreshFw():this.m_fireworks.node.active=!1},hide:function(){this.node.active=!1,i.hideCustomAd(2),cc.director.emit("show_energy",!1)},onStartClicked:function(){cc.director.emit("play_sound","click"),cc.director.emit("game_init"),this.hide()},onPrivacyAgreementClicked:function(){cc.director.emit("play_sound","click"),cc.director.emit("privacy_agreement",!0)},onMoreGameClicked:function(){cc.director.emit("play_sound","click"),i.showBoxAd(0)},onWxCustomClicked:function(){cc.director.emit("play_sound","click"),i.showCustomAd(0,0,.5,0,-150)},refreshRankInfo:function(){this.m_lbRankName.string="\u7b2c "+(s.data.rank+1)+" \u5173"},onClickBtnModeRank:function(){cc.director.emit("play_sound","click"),n.checkEnergy()&&(cc.RankMode=0,cc.director.emit("game_init"),this.hide())},onClickBtnModeEndless:function(){cc.director.emit("play_sound","click"),n.checkEnergy()&&(s.data.rankCount++,s.save(),cc.RankMode=1,cc.director.emit("game_init"),this.hide())},onClickBtnModeSurvival:function(){cc.director.emit("play_sound","click"),cc.RankMode=2},onClickBtnSkill:function(){cc.director.emit("play_sound","click"),cc.director.emit("show_skill_upgrade",!0)}}),cc._RF.pop()},{AdUtils:"AdUtils",FireWorks:"FireWorks",MathUtils:"MathUtils",SaveData:void 0}],MathUtils:[function(t,e,i){"use strict";cc._RF.push(e,"c7166blJcpFEqddzaavHQ8z","MathUtils");for(var s=t("SaveData"),n=2*Math.PI,o=[],a=0;a<4096;a++)o[a]=Math.sin((a+.5)/4096*n);for(a=0;a<360;a+=90)o[4095&Math.floor(a*(4096/360))]=Math.sin(cc.misc.degreesToRadians(a));i.sin=function(t){return o[4095&Math.floor(t*(4096/360))]},i.cos=function(t){return o[4095&Math.floor((t+90)*(4096/360))]},i.compareAngle=function(t,e){var i=(t-e)%360;return i<=180&&(i+=360),i>180&&(i-=360),i},i.atan2=function(t){var e=t.x,i=t.y,s=1-(Math.floor(i<0)<<1),n=i*s+2220446049250313e-31,o=Math.floor(e<0)<<1,a=1-o;return n=(e-a*n)/(a*e+n),180/Math.PI*(.7853981634*(o+1)+(.1821*n*n-.9675)*n)*s},i.atan2ByPoints=function(t,e){var i=cc.v2(t.x-e.x,t.y-e.y);return this.atan2(i)},i.aToH=function(t){return Math.PI/180*t},i.hToA=function(t){return 180/Math.PI*t},i.createVecByAngle=function(t){var e=this.cos(t),i=this.sin(t);return cc.v2(e,i)},i.createVecByAngle2=function(t,e){var i=this.cos(t)*e,s=this.sin(t)*e;return cc.v2(i,s)},i.distance2=function(t,e){var i=e.x-t.x,s=e.y-t.y;return i*i+s*s},i.getShortStr=function(t,e){if(!t)return t;e=e||8;for(var i=0,s=0;s<t.length;s++){var n=t.charCodeAt(s);if((i+=n>=0&&n<=128?1:2)>e)return t.substring(0,s)+"..."}return t},i.getCurWeek=function(t){t=t||0;var e=new Date;e.setHours(0,0,0,0);var i=Math.round(e/1e3),s=e.getDay()-t;return s<0&&(s+=7),i-86400*s},i.getNumStr=function(t){return t<1e4?t:t%1e4==0?t/1e4+"\u4e07":t<1e6?(t/1e4).toFixed(1)+"\u4e07":Math.floor(t/1e4)+"\u4e07"},i.getRandomArray=function(t,e){var i=[];if(e<=t)for(var s=0;s<e;s++)i.push(s);else for(var n=0;n<t;n++){for(var o=Math.floor(Math.random()*e),a=!1,c=0;c<i.length;c++)if(i[c]===o){a=!0;break}a?n--:i.push(o)}return i},i.addActionPopup=function(t){cc.Tween.stopAllByTarget(t),t.scale=.4,cc.tween(t).to(.1,{scale:1.2}).to(.05,{scale:1}).start()},i.checkEnergy=function(){return s.data.energy>0?(s.data.energy--,s.save(),cc.director.emit("check_energy",!0),cc.director.emit("refresh_energy"),!0):(cc.director.emit("show_energy_supply",!0),!1)},i.randomInt=function(t,e){var i=0,s=0;switch(arguments.length){case 1:i=0,s=t;break;case 2:if(t<e?(i=t,s=e):(s=t,i=e),i===s)return i;break;default:return 0}return Math.floor(Math.random()*(s-i+1))+i},cc.mathUtils=i,cc._RF.pop()},{SaveData:void 0}],NotchScreenFit:[function(t,e){"use strict";cc._RF.push(e,"96812TfUrRKgJkRr51k/q18","NotchScreenFit"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var t=this.getComponent(cc.Widget);this.widgetFit(t)},widgetFit:function(t){t&&cc.visibleRect.height>=1300&&(t.top+=50,t.bottom+=40)},start:function(){}}),cc._RF.pop()},{}],OVShortcutBtn:[function(t,e){"use strict";cc._RF.push(e,"3f7bfzvDoZHFZmcurmQ44x+","OVShortcutBtn"),cc.Class({extends:cc.Component,properties:{},onClicked:function(){var t=this;qg.installShortcut({success:function(){t.node.active=!1},fail:function(){},complete:function(){}})},start:function(){var t=this;cc.sys.platform===cc.sys.OPPO_GAME||cc.sys.platform===cc.sys.VIVO_GAME?qg.hasShortcutInstalled({success:function(e){t.node.active=!e},fail:function(){},complete:function(){}}):this.node.active=!1}}),cc._RF.pop()},{}],OppoNativeAd:[function(t,e){"use strict";cc._RF.push(e,"efa79Yq80tAS49QuLRJvklg","OppoNativeAd");var i=+new Date;cc.Class({extends:cc.Component,properties:{oppoAdId:"",adNode:cc.Node,spImg:cc.Sprite,spLogo:cc.Sprite,spIcon:cc.Sprite,lbTitle:cc.Label,lbDesc:cc.Label,lbBtnTxt:cc.Label,showOnLoad:!0,refreshTime:0,_nativeAd:null,_adData:null,_closeCount:0},onCloseClicked:function(){this.adNode.active=!1,this._closeCount++},onAdError:function(){},initAd:function(){var t=this;if(!(i+0-new Date>0)){this._nativeAd&&(this._nativeAd.destroy(),this._nativeAd=null);var e=null;console.log("native\u5e7f\u544a\u521d\u59cb\u5316"),cc.sys.platform===cc.sys.OPPO_GAME&&""!==this.oppoAdId&&(console.log("oppo native\u5e7f\u544a\u521b\u5efa"),e=qg.createNativeAd({adUnitId:this.oppoAdId})),e&&(e.onLoad(function(e){console.log("native\u5e7f\u544a\u52a0\u8f7d",e.adList),e.adList&&e.adList.length>0&&(t._adData=e.adList[0]),console.log(t._adData),t.showAd()}),e.onError(function(e){console.log("native\u5e7f\u544a\u52a0\u8f7d\u9519\u8bef"),console.log(e),t.onAdError(e)}),e.load(),this._nativeAd=e)}},showAd:function(){var t=this;if(this._adData){this.adNode.active=!0;var e=this._adData.imgUrlList[0];this.spImg&&e&&cc.loader.load(e,function(e,i){if(e)console.error(e);else{var s=new cc.SpriteFrame(i);t.spImg.spriteFrame=s}}),e=this._adData.logoUrl,this.spLogo&&e&&cc.loader.load(e,function(e,i){if(e)console.error(e);else{var s=new cc.SpriteFrame(i);t.spLogo.spriteFrame=s}}),e=this._adData.icon,this.spIcon&&e&&cc.loader.load(e,function(e,i){if(e)console.error(e);else{var s=new cc.SpriteFrame(i);t.spIcon.spriteFrame=s}}),this.lbBtnTxt&&(this.lbBtnTxt.string=this._adData.clickBtnTxt||""),this.lbTitle&&(this.lbTitle.string=this._adData.title||""),this.lbDesc&&(this.lbDesc.string=this._adData.desc||""),this._nativeAd.reportAdShow({adId:this._adData.adId.toString()})}},onClicked:function(){this._nativeAd&&this._adData&&this._nativeAd.reportAdClick({adId:this._adData.adId.toString()})},refreshAd:function(){this.initAd()},start:function(){var t=this;this.adNode.active=!1;var e=Math.max(i+0-new Date,0);this.showOnLoad&&setTimeout(function(){t.initAd()},e),this.refreshTime>0&&setTimeout(function(){setInterval(function(){t.refreshAd()},1e3*t.refreshTime)},e)}}),cc._RF.pop()},{}],OppoNativeBanner:[function(t,e){"use strict";cc._RF.push(e,"51440p8OXtFArzd01htd63l","OppoNativeBanner");var i=t("./OppoNativeAd");cc.Class({extends:i,properties:{baseBannerId:"",closeBtn:cc.Node,_bannerAd:null},show:function(){this.node.active=!0},hide:function(){this.node.active=!1,this._bannerAd&&this._bannerAd.hide()},isNative:function(){return this.node.active&&this.adNode.active},showAd:function(){this._bannerAd&&(this._bannerAd.hide(),this._bannerAd.destroy(),this._bannerAd=null),this._super()},onAdError:function(){this.showBaseBanner()},onGamePause:function(t){t?this.show():this.hide()},showBaseBanner:function(){var t=this;this._bannerAd&&(this._bannerAd.destroy(),this._bannerAd=null),this._bannerAd=qg.createBannerAd({adUnitId:this.baseBannerId,style:{top:300,left:0,width:900,height:300}}),this._bannerAd.onLoad(function(){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t.adNode.active=!1}),this._bannerAd.onResize(function(t){console.log("banner \u5bbd\u5ea6\uff1a"+t.width+", banner \u9ad8\u5ea6\uff1a"+t.height)}),this._bannerAd.show()},onLoad:function(){cc.sys.platform===cc.sys.OPPO_GAME&&this.closeBtn&&(this.closeBtn.opacity=cc.mgf.opacity)},onDestroy:function(){}}),cc._RF.pop()},{"./OppoNativeAd":"OppoNativeAd"}],OppoNativeIcon:[function(t,e){"use strict";cc._RF.push(e,"314a68LASFL4KpYSIEj+Pm7","OppoNativeIcon");var i=t("./OppoNativeAd");cc.Class({extends:i,properties:{closeBtn:cc.Node},onLoad:function(){cc.sys.platform===cc.sys.OPPO_GAME&&this.closeBtn&&(this.closeBtn.opacity=cc.mgf.opacity)}}),cc._RF.pop()},{"./OppoNativeAd":"OppoNativeAd"}],OppoNativeInterstitial:[function(t,e){"use strict";cc._RF.push(e,"b455fbLosVFRrxQkkRjyUN/","OppoNativeInterstitial");var i=t("./OppoNativeAd"),s=t("AdUtils");cc.Class({extends:i,properties:{closeBtn:cc.Node},onAdError:function(){console.log("\u65e0\u5e7f\u544a"),s.showBoxAd(0)},onLoad:function(){cc.sys.platform===cc.sys.OPPO_GAME&&(cc.director.on("oppo_intersitial",this.initAd,this),this.closeBtn&&(this.closeBtn.opacity=cc.mgf.opacity))},onDestroy:function(){cc.director.off("oppo_intersitial",this.initAd,this)}}),cc._RF.pop()},{"./OppoNativeAd":"OppoNativeAd",AdUtils:"AdUtils"}],PanelAim:[function(t,e){"use strict";function i(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=s(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=t[Symbol.iterator]()).next.bind(i)}function s(t,e){if(t){if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(t,e):void 0}}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}cc._RF.push(e,"029cb6I3XJEJZ+yTYg9Ke0B","PanelAim");var o=t("GenerateFishData"),a=o.RankModeFish,c=o.FishNames,r=t("SaveData"),h=t("MathUtils");cc.Class({extends:cc.Component,properties:{m_ndAimTips:cc.Node,m_ndAimPanel:cc.Node,m_lbAimName:cc.Label,m_lbPanelAimName:cc.Label,m_spPanelIcon:cc.Sprite,m_ndTips:[cc.Node],m_arrSfIcons:[cc.SpriteFrame]},onLoad:function(){this.m_ndAimTips.active=!1,this.m_ndAimPanel.active=!1},refreshPanelAim:function(){for(var t,e=i(this.m_ndTips);!(t=e()).done;)t.value.active=!1;switch(cc.RankMode){case 0:this.m_ndTips[0].active=!0;var s=a[r.data.rank].end;this.m_lbAimName.string=c[s],this.m_lbPanelAimName.string=c[s],this.m_spPanelIcon.spriteFrame=this.m_arrSfIcons[parseInt(s/2)],h.addActionPopup(this.m_ndTips[0]);break;case 1:this.m_ndTips[1].active=!0,h.addActionPopup(this.m_ndTips[1]);break;case 2:this.m_ndTips[2].active=!0,h.addActionPopup(this.m_ndTips[2])}}}),cc._RF.pop()},{GenerateFishData:"GenerateFishData",MathUtils:"MathUtils",SaveData:void 0}],ParticleAssembler2D:[function(t,e,i){"use strict";function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}cc._RF.push(e,"bff68EkKHlG8LskBWoY2SFa","ParticleAssembler2D"),i.__esModule=!0,i.default=void 0;var o=cc.dynamicAtlasManager,a=function(t){var e,i;function a(){var e;return(e=t.call(this)||this)._renderData=null,e._local=null,e._renderData=new cc.RenderData,e._renderData.init(n(e)),e.initLocal(),e.initData(),e}i=t,(e=a).prototype=Object.create(i.prototype),e.prototype.constructor=e,e.__proto__=i;var c,r,h=a.prototype;return h.initData=function(){this._renderData.createQuadData(0,this.verticesFloats,this.indicesCount)},h.initLocal=function(){this._local=[],this._local.length=4},h.updateColor=function(t,e){var i=this._renderData.uintVDatas[0];if(i){e=null!=e?e:t.node.color._val;for(var s=this.floatsPerVert,n=this.colorOffset,o=i.length;n<o;n+=s)i[n]=e}},h.getBuffer=function(){return cc.renderer._handle._meshBuffer},h.updateWorldVerts=function(t){var e=this._local,i=this._renderData.vDatas[0],s=t.node._worldMatrix.m,n=s[0],o=s[1],a=s[4],c=s[5],r=s[12],h=s[13],l=e[0],d=e[2],u=e[1],f=e[3],p=this.floatsPerVert,m=0;if(1===n&&0===o&&0===a&&1===c)i[m]=l+r,i[m+1]=u+h,i[m+=p]=d+r,i[m+1]=u+h,i[m+=p]=l+r,i[m+1]=f+h,i[m+=p]=d+r,i[m+1]=f+h;else{var _=n*l,v=n*d,g=o*l,y=o*d,S=a*u,w=a*f,A=c*u,C=c*f;i[m]=_+S+r,i[m+1]=g+A+h,i[m+=p]=v+S+r,i[m+1]=y+A+h,i[m+=p]=_+w+r,i[m+1]=g+C+h,i[m+=p]=v+w+r,i[m+1]=y+C+h}},h.fillBuffers=function(t,e){e.worldMatDirty&&this.updateWorldVerts(t);var i=this._renderData,s=i.vDatas[0],n=i.iDatas[0],o=this.getBuffer(e),a=o.request(this.verticesCount,this.indicesCount),c=a.byteOffset>>2,r=o._vData;s.length+c>r.length?r.set(s.subarray(0,r.length-c),c):r.set(s,c);for(var h=o._iData,l=a.indiceOffset,d=a.vertexOffset,u=0,f=n.length;u<f;u++)h[l++]=d+n[u]},h.packToDynamicAtlas=function(t,e){if(!e._original&&o&&e._texture.packable){var i=o.insertSpriteFrame(e);i&&e._setDynamicAtlasFrame(i)}var s=t._materials[0];s&&s.getProperty("texture")!==e._texture&&(t._vertsDirty=!0,t._updateMaterial())},c=a,(r=[{key:"verticesFloats",get:function(){return this.verticesCount*this.floatsPerVert}}])&&s(c.prototype,r),a}(cc.Assembler);i.default=a,cc.js.addon(a.prototype,{floatsPerVert:5,verticesCount:4,indicesCount:6,uvOffset:2,colorOffset:4}),e.exports=i.default,cc._RF.pop()},{}],ParticleEmitter:[function(t,e){"use strict";var i;cc._RF.push(e,"4df0cQPsnROUYudpbc4Hy/S","ParticleEmitter");var s=t("./ParticleMathUtils"),n=t("./ParticleSprite"),o=t("./ParticleSpriteAssembler"),a=cc.Enum({point:-1,line:-1,square:-1,ellipse:-1}),c=cc.Enum({both:-1,top:-1,bottom:-1}),r=cc.Enum({single:-1,random:-1,animated:-1}),h=cc.Class({extends:n,ctor:function(){this.delayValue=new u,this.lifeOffsetValue=new p,this.durationValue=new u,this.lifeValue=new p,this.emissionValue=new f,this.xScaleValue=new f,this.yScaleValue=new f,this.rotationValue=new f,this.velocityValue=new f,this.angleValue=new f,this.windValue=new f,this.gravityValue=new f,this.transparencyValue=new f,this.tintValue=new m,this.xOffsetValue=new f,this.yOffsetValue=new f,this.spawnWidthValue=new f,this.spawnHeightValue=new f,this.spawnShapeValue=new _,this.xSizeValues=[],this.ySizeValues=[],this.motionValues=[],this.accumulator=0,this.spriteMode=r.single,this.particles=[],this.minParticleCount=0,this.maxParticleCount=4,this.emitterName="",this.imagePaths=[],this.activeCount=0,this.actives=[],this.firstUpdate=!1,this._flipX=!1,this._flipY=!1,this.updateFlags=0,this._allowCompletion=!1,this.bounds=new cc.Rect,this.emission=this.emissionDiff=this.emissionDelta=0,this.lifeOffset=this.lifeOffsetDiff=0,this.life=this.lifeDiff=0,this.spawnWidth=this.spawnWidthDiff=0,this.spawnHeight=this.spawnHeightDiff=0,this.duration=1,this.durationTimer=0,this.delay=this.delayTimer=0,this.attached=!1,this.continuous=!1,this.aligned=!1,this.behind=!1,this.additive=!0,this.premultipliedAlpha=!1,this.cleansUpBlendFunction=!0,this.initialize()},properties:{sprites:{type:[cc.SpriteFrame],default:[]}},clone:function(t){this.sprites=t.sprites.slice(),this.emitterName=t.emitterName,this.imagePaths=t.imagePaths.slice(),this.setMaxParticleCount(t.maxParticleCount),this.minParticleCount=t.minParticleCount,this.delayValue.set(t.delayValue),this.durationValue.set(t.durationValue),this.emissionValue.set(t.emissionValue),this.lifeValue.set(t.lifeValue),this.lifeOffsetValue.set(t.lifeOffsetValue),this.xScaleValue.set(t.xScaleValue),this.yScaleValue.set(t.yScaleValue),this.rotationValue.set(t.rotationValue),this.velocityValue.set(t.velocityValue),this.angleValue.set(t.angleValue),this.windValue.set(t.windValue),this.gravityValue.set(t.gravityValue),this.transparencyValue.set(t.transparencyValue),this.tintValue.set(t.tintValue),this.xOffsetValue.set(t.xOffsetValue),this.yOffsetValue.set(t.yOffsetValue),this.spawnWidthValue.set(t.spawnWidthValue),this.spawnHeightValue.set(t.spawnHeightValue),this.spawnShapeValue.set(t.spawnShapeValue),this.attached=t.attached,this.continuous=t.continuous,this.aligned=t.aligned,this.behind=t.behind,this.additive=t.additive,this.premultipliedAlpha=t.premultipliedAlpha,this.cleansUpBlendFunction=t.cleansUpBlendFunction,this.spriteMode=t.spriteMode,this.setPosition(t.getX(),t.getY()),this.updateBlendFunc()},initialize:function(){this.imagePaths=[],this.durationValue.setAlwaysActive(!0),this.emissionValue.setAlwaysActive(!0),this.lifeValue.setAlwaysActive(!0),this.xScaleValue.setAlwaysActive(!0),this.transparencyValue.setAlwaysActive(!0),this.spawnShapeValue.setAlwaysActive(!0),this.spawnWidthValue.setAlwaysActive(!0),this.spawnHeightValue.setAlwaysActive(!0)},setMaxParticleCount:function(t){this.maxParticleCount=t,this.actives=[],this.activeCount=0,this.particles=[];for(var e=0;e<t;e++)this.actives.push(!1),this.particles.push(null)},addParticle:function(){var t=this.activeCount;if(t!=this.maxParticleCount)for(var e=this.actives,i=0,s=e.length;i<s;i++)if(!e[i]){this.activateParticle(i),this.actives[i]=!0,this.activeCount=t+1;break}},addParticles:function(t){if(0!=(t=Math.min(t,this.maxParticleCount-this.activeCount))){var e=this.actives,i=0,s=e.length;t:for(var n=0;n<t;n++){for(;i<s;i++)if(!e[i]){this.activateParticle(i),this.actives[i++]=!0;continue t}break}this.activeCount+=t}},updateEmitter:function(t){this.updateEmitterOnce(t),this.isLoopEnd()&&(this.restart(),this.durationTimer=0,this.updateEmitterOnce(t))},updateEmitterOnce:function(t){var e=this.accumulator;if(!((e+=1e3*t)<1)){var i=Math.floor(e);if(e-=i,this.delayTimer<this.delay)this.delayTimer+=i;else{var s=!1;if(this.firstUpdate&&(this.firstUpdate=!1,this.addParticle()),this.durationTimer<this.duration?this.durationTimer+=i:!this.continuous||this._allowCompletion?s=!0:this.restart(),!s){this.emissionDelta+=i;var n=this.emission+this.emissionDiff*this.emissionValue.getScale(this.durationTimer/this.duration);if(n>0&&(n=1e3/n,this.emissionDelta>=n)){var o=Math.floor(this.emissionDelta/n);o=Math.min(o,this.maxParticleCount-this.activeCount),this.emissionDelta-=o*n,this.emissionDelta%=n,this.addParticles(o)}this.activeCount<this.minParticleCount&&this.addParticles(this.minParticleCount-this.activeCount)}}for(var a=this.actives,c=this.activeCount,r=this.particles,h=0,l=a.length;h<l;h++)a[h]&&!this.updateParticle(r[h],t,i)&&(a[h]=!1,c--);this.activeCount=c}},startRun:function(){this.firstUpdate=!0,this._allowCompletion=!1,this.restart()},stop:function(){this.emissionDelta=0,this.durationTimer=this.duration;for(var t=this.actives,e=0,i=t.length;e<i;e++)t[e]=!1;this.activeCount=0,this.disableRender()},reset:function(){this.stop(),this.startRun()},restart:function(){this.delay=this.delayValue.active?this.delayValue.newLowValue():0,this.delayTimer=0,this.durationTimer-=this.duration,this.duration=this.durationValue.newLowValue(),this.emission=Math.floor(this.emissionValue.newLowValue()),this.emissionDiff=Math.floor(this.emissionValue.newHighValue()),this.emissionValue.isRelative()||(this.emissionDiff-=this.emission),this.lifeValue.independent||this.generateLifeValues(),this.lifeOffsetValue.independent||this.generateLifeOffsetValues(),this.spawnWidth=this.spawnWidthValue.newLowValue(),this.spawnWidthDiff=this.spawnWidthValue.newHighValue(),this.spawnWidthValue.isRelative()||(this.spawnWidthDiff-=this.spawnWidth),this.spawnHeight=this.spawnHeightValue.newLowValue(),this.spawnHeightDiff=this.spawnHeightValue.newHighValue(),this.spawnHeightValue.isRelative()||(this.spawnHeightDiff-=this.spawnHeight),this.updateFlags=0,this.angleValue.active&&this.angleValue.timeline.length>1&&(this.updateFlags|=2),this.velocityValue.active&&(this.updateFlags|=8),this.xScaleValue.timeline.length>1&&(this.updateFlags|=1),this.yScaleValue.active&&this.yScaleValue.timeline.length>1&&(this.updateFlags|=1),this.rotationValue.active&&this.rotationValue.timeline.length>1&&(this.updateFlags|=4),this.windValue.active&&(this.updateFlags|=16),this.gravityValue.active&&(this.updateFlags|=32),this.tintValue.timeline.length>1&&(this.updateFlags|=64),this.spriteMode==r.animated&&(this.updateFlags|=128)},newParticle:function(t){var e=new l;return e.setSprite(t),e},getParticles:function(){return this.particles},activateParticle:function(t){var e=null;switch(this.spriteMode){case r.single:case r.animated:e=this.sprites[0];break;case r.random:e=this.sprites[Math.floor(Math.random()*this.sprites.length)]}e=e||this.spriteFrame;var i=this.particles[t];null==i?(this.particles[t]=i=this.newParticle(e),i.flip(this._flipX,this._flipY)):(i.setSprite(e),i.x=i.y=0);var n=this.durationTimer/this.duration,o=this.updateFlags;this.lifeValue.independent&&this.generateLifeValues(),this.lifeOffsetValue.independent&&this.generateLifeOffsetValues(),i.currentLife=i.life=this.life+Math.floor(this.lifeDiff*this.lifeValue.getScale(n)),this.velocityValue.active&&(i.velocity=this.velocityValue.newLowValue(),i.velocityDiff=this.velocityValue.newHighValue(),this.velocityValue.isRelative()||(i.velocityDiff-=i.velocity)),i.angle=this.angleValue.newLowValue(),i.angleDiff=this.angleValue.newHighValue(),this.angleValue.isRelative()||(i.angleDiff-=i.angle);var h=0;0==(2&o)&&(h=i.angle+i.angleDiff*this.angleValue.getScale(0),i.angle=h,i.angleCos=s.cos(h),i.angleSin=s.sin(h));var l=0,d=0;if(e&&(l=e._originalSize.width,d=e._originalSize.height),i.xScale=this.xScaleValue.newLowValue()/l,i.xScaleDiff=this.xScaleValue.newHighValue()/l,this.xScaleValue.isRelative()||(i.xScaleDiff-=i.xScale),this.yScaleValue.active?(i.yScale=this.yScaleValue.newLowValue()/d,i.yScaleDiff=this.yScaleValue.newHighValue()/d,this.yScaleValue.isRelative()||(i.yScaleDiff-=i.yScale),i.setScale(i.xScale+i.xScaleDiff*this.xScaleValue.getScale(0),i.yScale+i.yScaleDiff*this.yScaleValue.getScale(0))):i.setScale(i.xScale+i.xScaleDiff*this.xScaleValue.getScale(0)),this.rotationValue.active){i.rotation=this.rotationValue.newLowValue(),i.rotationDiff=this.rotationValue.newHighValue(),this.rotationValue.isRelative()||(i.rotationDiff-=i.rotation);var u=i.rotation+i.rotationDiff*this.rotationValue.getScale(0);this.aligned&&(u+=h),i.curRotation=u}this.windValue.active&&(i.wind=this.windValue.newLowValue(),i.windDiff=this.windValue.newHighValue(),this.windValue.isRelative()||(i.windDiff-=i.wind)),this.gravityValue.active&&(i.gravity=this.gravityValue.newLowValue(),i.gravityDiff=this.gravityValue.newHighValue(),this.gravityValue.isRelative()||(i.gravityDiff-=i.gravity));var f=i.tint;null==f&&(i.tint=f=[0,0,0]);var p=this.tintValue.getColor(0);f[0]=p[0],f[1]=p[1],f[2]=p[2],i.transparency=this.transparencyValue.newLowValue(),i.transparencyDiff=this.transparencyValue.newHighValue()-i.transparency;var m=0;this.xOffsetValue.active&&(m+=this.xOffsetValue.newLowValue());var _=0;switch(this.yOffsetValue.active&&(_+=this.yOffsetValue.newLowValue()),this.spawnShapeValue.shape){case a.square:var v=this.spawnWidth+this.spawnWidthDiff*this.spawnWidthValue.getScale(n),g=this.spawnHeight+this.spawnHeightDiff*this.spawnHeightValue.getScale(n);m+=Math.random()*v-v/2,_+=Math.random()*g-g/2;break;case a.ellipse:var y=this.spawnWidth+this.spawnWidthDiff*this.spawnWidthValue.getScale(n),S=y/2,w=(this.spawnHeight+this.spawnHeightDiff*this.spawnHeightValue.getScale(n))/2;if(0==S||0==w)break;var A=S/w;if(this.spawnShapeValue.edges){var C;switch(this.spawnShapeValue.side){case c.top:C=179*-Math.random();break;case c.bottom:C=179*Math.random();break;default:C=360*Math.random()}var k=s.cos(C),b=s.sin(C);m+=k*S,_+=b*S/A,0==(2&o)&&(i.angle=C,i.angleCos=k,i.angleSin=b)}else for(var F=S*S;;){var M=Math.random()*y-S,D=Math.random()*y-S;if(M*M+D*D<=F){m+=M,_+=D/A;break}}break;case a.line:var E=this.spawnWidth+this.spawnWidthDiff*this.spawnWidthValue.getScale(n),x=this.spawnHeight+this.spawnHeightDiff*this.spawnHeightValue.getScale(n);if(0!=E){var R=E*Math.random();m+=R,_+=R*(x/E)}else _+=x*Math.random()}i.x=m,i.y=_;var V=Math.floor(this.lifeOffset+this.lifeOffsetDiff*this.lifeOffsetValue.getScale(n));V>0&&(V>=i.currentLife&&(V=i.currentLife-1),this.updateParticle(i,V/1e3,V))},updateParticle:function(t,e,i){var n=t.currentLife-i;if(n<=0)return!1;t.currentLife=n;var o,a=1-t.currentLife/t.life,c=this.updateFlags;if(0!=(1&c)&&(this.yScaleValue.active?t.setScale(t.xScale+t.xScaleDiff*this.xScaleValue.getScale(a),t.yScale+t.yScaleDiff*this.yScaleValue.getScale(a)):t.setScale(t.xScale+t.xScaleDiff*this.xScaleValue.getScale(a))),0!=(8&c)){var r,h,l=(t.velocity+t.velocityDiff*this.velocityValue.getScale(a))*e;if(0!=(2&c)){var d=t.angle+t.angleDiff*this.angleValue.getScale(a);if(r=l*s.cos(d),h=l*s.sin(d),0!=(4&c)){var u=t.rotation+t.rotationDiff*this.rotationValue.getScale(a);this.aligned&&(u+=d),t.curRotation=u}}else if(r=l*t.angleCos,h=l*t.angleSin,this.aligned||0!=(4&c)){var f=t.rotation+t.rotationDiff*this.rotationValue.getScale(a);this.aligned&&(f+=t.angle),t.curRotation=f}0!=(16&c)&&(r+=(t.wind+t.windDiff*this.windValue.getScale(a))*e),0!=(32&c)&&(h+=(t.gravity+t.gravityDiff*this.gravityValue.getScale(a))*e),t.translate(r,h)}else 0!=(4&c)&&(t.curRotation=t.rotation+t.rotationDiff*this.rotationValue.getScale(a));if(o=0!=(64&c)?this.tintValue.getColor(a):t.tint,this.premultipliedAlpha){var p=this.additive?0:1,m=t.transparency+t.transparencyDiff*this.transparencyValue.getScale(a);t.setColor(o[0]*m,o[1]*m,o[2]*m,m*p)}else t.setColor(o[0],o[1],o[2],t.transparency+t.transparencyDiff*this.transparencyValue.getScale(a));if(0!=(128&c)){var _=Math.min(Math.floor(a*this.sprites.length),this.sprites.length-1);if(t.frame!=_){var v=this.sprites[_],g=t.getWidth(),y=t.getHeight();t.translate((g-v._originalSize.width)/2,(y-v._originalSize.height)/2),t.frame=_,t.setSprite(v)}}return!0},generateLifeValues:function(){this.life=Math.floor(this.lifeValue.newLowValue()),this.lifeDiff=Math.floor(this.lifeValue.newHighValue()),this.lifeValue.isRelative()||(this.lifeDiff-=this.life)},generateLifeOffsetValues:function(){this.lifeOffset=this.lifeOffsetValue.active?Math.floor(this.lifeOffsetValue.newLowValue()):0,this.lifeOffsetDiff=Math.floor(this.lifeOffsetValue.newHighValue()),this.lifeOffsetValue.isRelative()||(this.lifeOffsetDiff-=this.lifeOffset)},setPosition:function(t,e){if(this.attached)for(var i=t-this.node.x,s=e-this.node.y,n=this.actives,o=0,a=n.length;o<a;o++)n[o]&&this.particles[o].translate(i,s);this.node.x=t,this.node.y=e},translateParticle:function(t,e){if(!this.attached)for(var i=this.actives,s=0,n=i.length;s<n;s++)i[s]&&this.particles[s].translate(t,e)},setSprites:function(t){var e=this.particles;if(this.sprites=t,0!=t.size)for(var i=0,s=e.length;i<s;i++){var n=e[i];if(null==n)break;var o=null;switch(this.spriteMode){case r.single:o=t[0];break;case r.random:o=t[Math.floor(Math.random()*t.length)];break;case r.animated:var a=1-n.currentLife/n.life;n.frame=Math.min(Math.floor(a*t.length),t.length-1),o=t[n.frame]}n.setSprite(o)}},setSpriteMode:function(t){this.spriteMode=t},preAllocateParticles:function(){for(var t=0;t<this.particles.length;t++){var e=this.particles[t];null==e&&(this.particles[t]=e=this.newParticle(this.sprites[0]),e.flip(this._flipX,this._flipY))}},allowCompletion:function(){this._allowCompletion=!0,this.durationTimer=this.duration},getSprites:function(){return this.sprites},getSpriteMode:function(){return this.spriteMode},getName:function(){return this.emitterName},setName:function(t){this.emitterName=t},getLife:function(){return this.lifeValue},getXScale:function(){return this.xScaleValue},getYScale:function(){return this.yScaleValue},getRotation:function(){return this.rotationValue},getTint:function(){return this.tintValue},getVelocity:function(){return this.velocityValue},getWind:function(){return this.windValue},getGravity:function(){return this.gravityValue},getAngle:function(){return this.angleValue},getEmission:function(){return this.emissionValue},getTransparency:function(){return this.transparencyValue},getDuration:function(){return this.durationValue},getDelay:function(){return this.delayValue},getLifeOffset:function(){return this.lifeOffsetValue},getXOffsetValue:function(){return this.xOffsetValue},getYOffsetValue:function(){return this.yOffsetValue},getSpawnWidth:function(){return this.spawnWidthValue},getSpawnHeight:function(){return this.spawnHeightValue},getSpawnShape:function(){return this.spawnShapeValue},isAttached:function(){return this.attached},setAttached:function(t){this.attached=t},isContinuous:function(){return this.continuous},setContinuous:function(t){this.continuous=t},isAligned:function(){return this.aligned},setAligned:function(t){this.aligned=t},isAdditive:function(){return this.additive},setAdditive:function(t){this.additive=t,this.updateBlendFunc()},updateBlendFunc:function(){var t=cc.macro.BlendFactor;this.premultipliedAlpha?(this.srcBlendFactor=t.ONE,this.dstBlendFactor=t.ONE_MINUS_SRC_ALPHA):this.additive?(this.srcBlendFactor=t.SRC_ALPHA,this.dstBlendFactor=t.ONE):(this.srcBlendFactor=t.SRC_ALPHA,this.dstBlendFactor=t.ONE_MINUS_SRC_ALPHA)},getCleansUpBlendFunction:function(){return this.cleansUpBlendFunction},setCleansUpBlendFunction:function(t){this.cleansUpBlendFunction=t},isBehind:function(){return this.behind},setBehind:function(t){this.behind=t},isPremultipliedAlpha:function(){return this.premultipliedAlpha},setPremultipliedAlpha:function(t){this.premultipliedAlpha=t,this.updateBlendFunc()},getMinParticleCount:function(){return this.minParticleCount},setMinParticleCount:function(t){this.minParticleCount=t},getMaxParticleCount:function(){return this.maxParticleCount},isComplete:function(){return!(this.continuous&&!this._allowCompletion)&&!(this.delayTimer<this.delay)&&this.durationTimer>=this.duration&&0==this.activeCount},isLoopEnd:function(){return!(!this.continuous||this._allowCompletion)&&!(this.delayTimer<this.delay)&&this.durationTimer>=this.duration&&0==this.activeCount},getPercentComplete:function(){return this.delayTimer<this.delay?0:Math.min(1,this.durationTimer/this.duration)},getX:function(){return this.node.x},getY:function(){return this.node.y},getActiveCount:function(){return this.activeCount},getImagePaths:function(){return this.imagePaths},setImagePaths:function(t){this.imagePaths=t},setFlip:function(t,e){if(this._flipX=t,this._flipY=e,null!=this.particles)for(var i=0,s=this.particles.length;i<s;i++){var n=this.particles[i];null!=n&&n.flip(t,e)}},flipY:function(){var t=this.angleValue;t.setHigh(-t.getHighMin(),-t.getHighMax()),t.setLow(-t.getLowMin(),-t.getLowMax());var e=this.gravityValue;e.setHigh(-e.getHighMin(),-e.getHighMax()),e.setLow(-e.getLowMin(),-e.getLowMax());var i=this.windValue;i.setHigh(-i.getHighMin(),-i.getHighMax()),i.setLow(-i.getLowMin(),-i.getLowMax());var s=this.rotationValue;s.setHigh(-s.getHighMin(),-s.getHighMax()),s.setLow(-s.getLowMin(),-s.getLowMax());var n=this.yOffsetValue;n.setLow(-n.getLowMin(),-n.getLowMax())},getBoundingBox:function(){null==this.bounds&&(this.bounds=new cc.Rect);for(var t=this.particles,e=this.actives,i=this.bounds,s=0,n=e.length;s<n;s++)if(e[s]){var o=t[s].getBoundingRectangle();i.union(o)}return i},getXSizeValues:function(){return null==this.xSizeValues&&(this.xSizeValues=new Array(3),this.xSizeValues[0]=this.xScaleValue,this.xSizeValues[1]=this.spawnWidthValue,this.xSizeValues[2]=this.xOffsetValue),this.xSizeValues},getYSizeValues:function(){return null==this.ySizeValues&&(this.ySizeValues=new Array(3),this.ySizeValues[0]=this.yScaleValue,this.ySizeValues[1]=this.spawnHeightValue,this.ySizeValues[2]=this.yOffsetValue),this.ySizeValues},getMotionValues:function(){return null==this.motionValues&&(this.motionValues=new Array(3),this.motionValues[0]=this.velocityValue,this.motionValues[1]=this.windValue,this.motionValues[2]=this.gravityValue),this.motionValues},scaleSize:function(t,e){if(null==e&&(e=t),1!=t||1!=e){for(var i in this.getXSizeValues())i.scale(t);for(var s in this.getYSizeValues())s.scale(e)}},scaleMotion:function(t){if(1!=t)for(var e in this.getMotionValues())e.scale(t)},matchSize:function(t){this.matchXSize(t),this.matchYSize(t)},matchXSize:function(t){for(var e=this.getXSizeValues(),i=t.getXSizeValues(),s=0;s<e.length;s++)e[s].set(i[s])},matchYSize:function(t){for(var e=this.getYSizeValues(),i=t.getYSizeValues(),s=0;s<e.length;s++)e[s].set(i[s])},matchMotion:function(t){for(var e=this.getMotionValues(),i=t.getMotionValues(),s=0;s<e.length;s++)e[s].set(i[s])},initFromData:function(t){this.emitterName=this.node.name=t.name,this.imagePaths=t.imagePaths,this.setMaxParticleCount(t.count.max),this.minParticleCount=t.count.min,this.delayValue.initFromData(t.delay),this.durationValue.initFromData(t.duration),this.emissionValue.initFromData(t.emission),this.lifeValue.initFromData(t.life),this.lifeOffsetValue.initFromData(t.lifeOffset),this.xScaleValue.initFromData(t.xScale),this.yScaleValue.initFromData(t.yScale),this.rotationValue.initFromData(t.rotation),this.velocityValue.initFromData(t.velocity),this.angleValue.initFromData(t.angle),this.windValue.initFromData(t.wind),this.gravityValue.initFromData(t.gravity),this.transparencyValue.initFromData(t.transparency),this.tintValue.initFromData(t.tint),this.xOffsetValue.initFromData(t.xOffset),this.yOffsetValue.initFromData(t.yOffset),this.spawnWidthValue.initFromData(t.spawnWidth),this.spawnHeightValue.initFromData(t.spawnHeight),this.spawnShapeValue.initFromData(t.spawnShape),t.options&&(this.attached=t.options.attached,this.continuous=t.options.continuous,this.aligned=t.options.aligned,this.behind=t.options.behind,this.additive=t.options.additive,this.premultipliedAlpha=t.options.premultipliedAlpha,this.spriteMode=r[t.options.spriteMode],this.updateBlendFunc())},loadSpritesInEditor:function(){},loadSprites:function(t){for(var e=this,i=this,s=function(s){var n=t+"/"+cc.path.mainFileName(e.imagePaths[s]),o=function(t,e){t?cc.error(t.message||t):(0==s&&(i.spriteFrame=e),i.sprites[s]=e)};cc.resources?cc.resources.load(n,cc.SpriteFrame,o):cc.loader.loadRes(n,cc.SpriteFrame,o)},n=0;n<this.imagePaths.length;n++)s(n)}}),l=cc.Class({ctor:function(){this.x=this.y=0,this.scaleX=this.scaleY=1,this.life=this.currentLife=0,this.xScale=this.xScaleDiff=0,this.yScale=this.yScaleDiff=0,this.rotation=this.rotationDiff=0,this.velocity=this.velocityDiff=0,this.angle=this.angleDiff=0,this.angleCos=this.angleSin=0,this.transparency=this.transparencyDiff=0,this.wind=this.windDiff=0,this.gravity=this.gravityDiff=0,this.tint=[1,1,1],this.frame=0,this.curRotation=0,this.color=4294967295,this.flipX=this.flipY=!1,this.spriteFrame=null},flip:function(t,e){this.filpX=t,this.flipY=e},translate:function(t,e){this.x+=t,this.y+=e},getWidth:function(){return this.spriteFrame._originalSize.width},getHeight:function(){return this.spriteFrame._originalSize.height},setScale:function(t,e){this.scaleX=t,this.scaleY=null==e?t:e},setColor:function(t,e,i,s){var n=Math.max(0,Math.min(Math.floor(255*t),255)),o=Math.max(0,Math.min(Math.floor(255*e),255)),a=Math.max(0,Math.min(Math.floor(255*i),255)),c=Math.max(0,Math.min(Math.floor(255*s),255));this.color=(c<<24>>>0)+(a<<16)+(o<<8)+n},setSprite:function(t){this.spriteFrame=t}}),d=cc.Class({ctor:function(){this.active=!1,this.alwaysActive=!1},initFromData:function(t){null!=t.active?this.active=t.active:this.active=!0},setAlwaysActive:function(t){this.alwaysActive=t},isAlwaysActive:function(){return this.alwaysActive},isActive:function(){return this.alwaysActive||this.active},setActive:function(t){this.active=t}}),u=(cc.Class({extends:d,ctor:function(){this.value=0},getValue:function(){return this.value},setValue:function(t){this.value=t}}),cc.Class({extends:d,ctor:function(){this.lowMin=0,this.lowMax=0},initFromData:function(t){this._super(t),null!=t.lowMin&&(this.lowMin=t.lowMin),null!=t.lowMax&&(this.lowMax=t.lowMax)},setLow:function(t,e){null==e&&(e=t),this.lowMin=t,this.lowMax=e},getLowMin:function(){return this.lowMin},setLowMin:function(t){this.lowMin=t},getLowMax:function(){return this.lowMax},setLowMax:function(t){this.lowMax=t},scale:function(t){this.lowMin*=t,this.lowMax*=t},set:function(t){this.lowMin=t.lowMin,this.lowMax=t.lowMax},newLowValue:function(){return this.lowMin+(this.lowMax-this.lowMin)*Math.random()}})),f=cc.Class(((i={extends:u,ctor:function(){this.scaling=[1],this.timeline=[0],this.highMin=0,this.highMax=0,this.relative=!1},initFromData:function(t){this._super(t),null!=t.highMin&&(this.highMin=t.highMin),null!=t.highMax&&(this.highMax=t.highMax),null!=t.scaling&&(this.scaling=t.scaling),null!=t.timeline&&(this.timeline=t.timeline),null!=t.relative&&(this.relative=t.relative)},newHighValue:function(){return this.highMin+(this.highMax-this.highMin)*Math.random()},setHigh:function(t,e){(e=null)&&(e=t),this.highMin=t,this.highMax=e},getHighMin:function(){return this.highMin},setHighMin:function(t){this.highMin=t},getHighMax:function(){return this.highMax},setHighMax:function(t){this.highMax=t},scale:function(t){this._super(t),this.highMin*=t,this.highMax*=t},set:function(t){this._super(t),t instanceof f&&(this.highMin=t.highMin,this.highMax=t.highMax,this.scaling=t.scaling.slice(),this.timeline=t.timeline.slice(),this.relative=t.relative)},getScaling:function(){return this.scaling},setScaling:function(t){this.scaling=t},getTimeline:function(){return this.timeline},setTimeline:function(t){this.timeline=t},isRelative:function(){return this.relative},setRelative:function(t){this.relative=t},getScale:function(t){for(var e=-1,i=this.timeline,s=i.length,n=1;n<s;n++)if(i[n]>t){e=n;break}if(-1==e)return this.scaling[s-1];var o=this.scaling,a=e-1,c=o[a],r=i[a];return c+(o[e]-c)*((t-r)/(i[e]-r))}}).newHighValue=function(){return this.highMin+(this.highMax-this.highMin)*Math.random()},i)),p=cc.Class({extends:f,ctor:function(){this.independent=!1},initFromData:function(t){this._super(t),null!=t.independent&&(this.independent=t.independent)},isIndependent:function(){return this.independent},setIndependent:function(t){this.independent=t},set:function(t){t instanceof p&&(this.independent=t.independent)}}),m=cc.Class({extends:d,ctor:function(){this.colors=[1,1,1],this.timeline=[0],this.alwaysActive=!0},statics:{temp:[0,0,0,0]},initFromData:function(t){this._super(t),null!=t.colors&&(this.colors=t.colors),null!=t.timeline&&(this.timeline=t.timeline)},getTimeline:function(){return this.timeline},setTimeline:function(t){this.timeline=t},getColors:function(){return this.colors},setColors:function(t){this.colors=t},getColor:function(t){for(var e=0,i=-1,s=this.timeline,n=s.length,o=m.temp,a=this.colors,c=1;c<n;c++){if(s[c]>t){i=c;break}e=c}var r=s[e],h=a[e*=3],l=a[e+1],d=a[e+2];if(-1==i)return o[0]=h,o[1]=l,o[2]=d,o;var u=(t-r)/(s[i]-r);return i*=3,o[0]=h+(a[i]-h)*u,o[1]=l+(a[i+1]-l)*u,o[2]=d+(a[i+2]-d)*u,o}}),_=cc.Class({extends:d,ctor:function(){this.shape=a.point,this.edges=!1,this.side=c.both},initFromData:function(t){this._super(t),null!=t.shape&&(this.shape=a[t.shape]),null!=t.edges&&(this.edges=t.edges),null!=t.side&&(this.side=c[t.side])},getShape:function(){return this.shape},setShape:function(t){this.shape=t},isEdges:function(){return this.edges},setEdges:function(t){this.edges=t},getSide:function(){return this.side},setSide:function(t){this.side=t}});e.exports=h,cc.Assembler.register(h,o),cc._RF.pop()},{"./ParticleMathUtils":"ParticleMathUtils","./ParticleSprite":"ParticleSprite","./ParticleSpriteAssembler":"ParticleSpriteAssembler","fire-url":void 0}],ParticleGdx:[function(t,e){"use strict";cc._RF.push(e,"221f4HRfOFBqoS5nrISUBOU","ParticleGdx");var i=t("./ParticleEmitter");cc.Class({extends:cc.Component,editor:!1,ctor:function(){this.emitters=[],this.bounds=null,this.ownsTexture=!1,this.xSizeScale=1,this.ySizeScale=1,this.motionScale=1,this.isPlay=!1,this.lastPos=null,this.completeCallback=null},properties:{data:{default:null,type:cc.JsonAsset,notify:function(){this.createEmittersInEditor(),this.preview&&this.startRun()}},preview:{default:!0,editorOnly:!0,notify:!1,animatable:!1,tooltip:!1},playOnLoad:!0,destroyOnFinished:!1},onFocusInEditor:!1,onLostFocusInEditor:!1,clone:function(t){this.emitters=[];for(var e=0;e<t.emitters.length;e++){var i=this.newEmitter(t.emitters[e]);this.emitters.push(i)}},startRun:function(){this.isPlay=!0;for(var t=0;t<this.emitters.length;t++)this.emitters[t].markForRender(!0),this.emitters[t].startRun()},reset:function(t){void 0===t&&(t=!0),this.stop(),!t||1==this.xSizeScale&&1==this.ySizeScale&&1==this.motionScale||(this.scaleEffect(1/this.xSizeScale,1/this.ySizeScale,1/this.motionScale),this.xSizeScale=this.ySizeScale=this.motionScale=1)},stop:function(){for(var t=0,e=this.emitters.length;t<e;t++)this.emitters[t].stop();this.isPlay=!1},update:function(t){if(this.isPlay){for(var e=!0,i=0,s=this.emitters.length;i<s;i++){var n=this.emitters[i];n.updateEmitter(t),n.isComplete()?n.disableRender():(e=!1,n.setVertsDirty())}e&&(this.isPlay=!1,this.completeCallback&&this.completeCallback(),this.destroyOnFinished&&this.node.destroy())}},allowCompletion:function(){for(var t=0,e=this.emitters.length;t<e;t++)this.emitters[t].allowCompletion()},isComplete:function(){for(var t=0,e=this.emitters.length;t<e;t++)if(!this.emitters[t].isComplete())return!1;return!0},setDuration:function(t){for(var e=0,i=this.emitters.length;e<i;e++){var s=this.emitters[e];s.setContinuous(!1),s.duration=t,s.durationTimer=0}},setPosition:function(t,e){for(var i=0,s=this.emitters.length;i<s;i++)this.emitters[i].setPosition(t,e)},setFlip:function(t,e){for(var i=0,s=this.emitters.length;i<s;i++)this.emitters[i].setFlip(t,e)},flipY:function(){for(var t=0,e=this.emitters.length;t<e;t++)this.emitters[t].flipY()},getEmitters:function(){return this.emitters},findEmitter:function(t){for(var e=0,i=this.emitters.length;e<i;e++){var s=this.emitters[e];if(s.getName()===t)return s}return null},preAllocateParticles:function(){for(var t=0;t<this.emitters.length;t++)this.emitters[t].preAllocateParticles()},newEmitter:function(t){var e=(new cc.Node).addComponent(i);return e.setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite")),t&&e.clone(t),e},getBoundingBox:function(){null==this.bounds&&(this.bounds=new cc.Rect);var t=this.bounds;for(var e in this.emitters)t.union(e.getBoundingBox());return t},scaleEffect:function(t,e,i){for(var s in xSizeScale*=t,ySizeScale*=e,motionScale*=i,this.emitters)s.scaleSize(t,e),s.scaleMotion(i)},setEmittersCleanUpBlendFunction:function(t){for(var e=0,i=this.emitters.length;e<i;e++)this.emitters[e].setCleansUpBlendFunction(t)},createEmittersInEditor:function(){},initFromData:function(){if(this.data)for(var t=this.data.json,e=0;e<this.emitters.length;e++)t[e]&&this.emitters[e].initFromData(t[e])},onPositionChanged:function(){if(0!=this.node.scaleX&&0!=this.node.scaleY){var t=(this.lastPos.x-this.node.x)/this.node.scaleX,e=(this.lastPos.y-this.node.y)/this.node.scaleY;this.translateParticle(t,e)}this.lastPos.x=this.node.x,this.lastPos.y=this.node.y},translateParticle:function(t,e){for(var i=0;i<this.emitters.length;i++)this.emitters[i].translateParticle(t,e)},setCompelteCallback:function(t){this.completeCallback=t},loadData:function(t){var e=this,i=function(i,s){if(i)cc.error(i.message||i);else if(s&&s.json){e.node.destroyAllChildren(),e.data=s;var n=s.json,o=cc.path.dirname(t);if(n&&n.length>0){for(var a=0;a<n.length;a++){var c=e.newEmitter();e.emitters.push(c),c.initFromData(n[a]),c.node.parent=e.node,c.loadSprites(o)}e.preAllocateParticles(),e.stop()}e.playOnLoad&&e.startRun()}};cc.resources?cc.resources.load(t,cc.JsonAsset,i):cc.loader.loadRes(t,cc.JsonAsset,i)},onLoad:function(){this.node.on(cc.Node.EventType.POSITION_CHANGED,this.onPositionChanged,this),this.lastPos=cc.v2(this.node.x,this.node.y),this.data&&(this.emitters=this.getComponentsInChildren("ParticleEmitter"),this.initFromData(),this.preAllocateParticles(),this.stop(),this.playOnLoad&&this.startRun())}}),cc._RF.pop()},{"./ParticleEmitter":"ParticleEmitter","fire-url":void 0}],ParticleMathUtils:[function(t,e,i){"use strict";cc._RF.push(e,"be7b72AGvZK245tT+A65GAK","ParticleMathUtils");for(var s=2*Math.PI,n=[],o=0;o<4096;o++)n[o]=Math.sin((o+.5)/4096*s);for(o=0;o<360;o+=90)n[4095&Math.floor(o*(4096/360))]=Math.sin(cc.misc.degreesToRadians(o));i.sin=function(t){return n[4095&Math.floor(t*(4096/360))]},i.cos=function(t){return n[4095&Math.floor((t+90)*(4096/360))]},cc._RF.pop()},{}],ParticleSpriteAssembler:[function(t,e,i){"use strict";cc._RF.push(e,"ae7d2GWdstAzZ6QvzUb72Fx","ParticleSpriteAssembler"),i.__esModule=!0,i.default=void 0;var s=t("./ParticleAssembler2D"),n=t("./ParticleMathUtils"),o=function(t){var e,i;function s(){return t.apply(this,arguments)||this}i=t,(e=s).prototype=Object.create(i.prototype),e.prototype.constructor=e,e.__proto__=i;var o=s.prototype;return o.initData=function(){this._renderData.createFlexData(0,4,6,this.getVfmt()),this.verticesCount=4,this.indicesCount=6,this.updateIndices()},o.updateRenderData=function(t){if(t._spriteFrame&&(this.packToDynamicAtlas(t,t._spriteFrame),t.spriteFrame)){var e=t.activeCount||0;this.verticesCount=4*e,this.indicesCount=6*e;var i=this._renderData._flexBuffer;i.reserve(this.verticesCount,this.indicesCount)&&(this.updateIndices(),t._vertsDirty=!0),i.used(this.verticesCount,this.indicesCount),t._vertsDirty&&(this.updateColor(t),this.updateUVs(t),this.updateVerts(t),t._vertsDirty=!1)}},o.updateColor=function(t){var e=this._renderData.uintVDatas[0];if(e)for(var i=t.particles,s=this.floatsPerVert,n=this.colorOffset,o=0,a=0;a<i.length;a++)if(t.actives[a]){var c=i[a],r=c?c.color:t.node.color._val,h=4*s*o+n;e[h]=r,e[h+s]=r,e[h+2*s]=r,e[h+3*s]=r,o++}},o.updateIndices=function(){for(var t=this._renderData.iDatas[0],e=0,i=0,s=t.length;e<s;e+=6,i+=4)t[e]=i,t[e+1]=i+1,t[e+2]=i+2,t[e+3]=i+1,t[e+4]=i+3,t[e+5]=i+2},o.updateUVs=function(t){for(var e=this.uvOffset,i=this.floatsPerVert,s=this._renderData.vDatas[0],n=t.particles,o=0,a=0;a<n.length;a++)if(t.actives[a]){var c=(t.particles[a].spriteFrame||t.spriteFrame).uv,r=4*i*o+e;s[r]=c[0],s[r+1]=c[1],s[r+=i]=c[2],s[r+1]=c[3],s[r+=i]=c[4],s[r+1]=c[5],s[r+=i]=c[6],s[r+1]=c[7],o++}},o.updateVerts=function(t){var e=t.particles;this._local.length!=8*e.length&&(this._local.length=8*e.length);for(var i=this._local,s=0,o=0;o<e.length;o++)if(t.actives[o]){var a=e[o].spriteFrame||t.spriteFrame,c=a._originalSize.width,r=a._originalSize.height,h=e[o].x,l=e[o].y,d=e[o].scaleX,u=e[o].scaleY,f=n.cos(e[o].curRotation),p=n.sin(e[o].curRotation),m=c/2*d,_=r/2*u,v=8*s;i[v++]=h-m*f+_*p,i[v++]=l-_*f-m*p,i[v++]=h+m*f+_*p,i[v++]=l-_*f+m*p,i[v++]=h-m*f-_*p,i[v++]=l+_*f-m*p,i[v++]=h+m*f-_*p,i[v++]=l+_*f+m*p,s++}this.updateWorldVerts(t)},o.updateWorldVerts=function(t){this.updateWorldVertsWebGL(t)},o.updateWorldVertsWebGL=function(t){for(var e=t.node._worldMatrix.m,i=e[0],s=e[1],n=e[4],o=e[5],a=e[12],c=e[13],r=this._local,h=this._renderData.vDatas[0],l=this.floatsPerVert,d=0,u=this.verticesCount;d<u;d++){var f=r[2*d],p=r[2*d+1];h[l*d]=f*i+p*n+a,h[l*d+1]=f*s+p*o+c}},o.updateWorldVertsNative=function(){for(var t=this._local,e=this._renderData.vDatas[0],i=this.floatsPerVert,s=0,n=this.verticesCount;s<n;s++)e[i*s]=t[2*s],e[i*s+1]=t[2*s+1]},s}(s);i.default=o,e.exports=i.default,cc._RF.pop()},{"./ParticleAssembler2D":"ParticleAssembler2D","./ParticleMathUtils":"ParticleMathUtils"}],ParticleSprite:[function(t,e){"use strict";cc._RF.push(e,"14689sh3idBvr4ZRaRmu2r1","ParticleSprite"),cc.Class({extends:cc.RenderComponent,mixins:[cc.BlendFunc],properties:{_spriteFrame:{default:null,type:cc.SpriteFrame},_atlas:{default:null,type:cc.SpriteAtlas,tooltip:!1,editorOnly:!0,visible:!0,animatable:!1},spriteFrame:{get:function(){return this._spriteFrame},set:function(t){var e=this._spriteFrame;e!==t&&(this._spriteFrame=t,this._applySpriteFrame(e),this.setVertsDirty())},type:cc.SpriteFrame}},onEnable:function(){this._super(),this._spriteFrame&&this._spriteFrame.ensureLoadTexture(),this.node.on(cc.Node.EventType.SIZE_CHANGED,this.setVertsDirty,this),this.node.on(cc.Node.EventType.ANCHOR_CHANGED,this.setVertsDirty,this)},onDisable:function(){this._super(),this.node.off(cc.Node.EventType.SIZE_CHANGED,this.setVertsDirty,this),this.node.off(cc.Node.EventType.ANCHOR_CHANGED,this.setVertsDirty,this)},__preload:function(){this._super(),this._applySpriteFrame()},_updateMaterial:function(){var t=this._spriteFrame&&this._spriteFrame.getTexture(),e=this.getMaterial(0);e&&(void 0!==e.getDefine("USE_TEXTURE")&&e.define("USE_TEXTURE",!0),e.setProperty("texture",t)),cc.BlendFunc.prototype._updateMaterial&&cc.BlendFunc.prototype._updateMaterial.call(this)},_applyAtlas:!1,_validateRender:function(){var t=this._spriteFrame;this._materials[0]&&t&&t.textureLoaded()||this.disableRender()},_applySpriteSize:function(){this._spriteFrame&&this.isValid&&this.setVertsDirty()},_applySpriteFrame:function(t){var e=t&&t.getTexture();e&&!e.loaded&&t.off("load",this._applySpriteSize,this),this._updateMaterial();var i=this._spriteFrame;if(i){var s=i.getTexture();s&&s.loaded?this._applySpriteSize():(this.disableRender(),i.once("load",this._applySpriteSize,this))}else this.disableRender()}}),cc._RF.pop()},{}],PauseMenu:[function(t,e){"use strict";cc._RF.push(e,"5954bj9KWBI9LCaLC0OHLC3","PauseMenu");var i=t("TTUtils"),s=t("AdUtils");cc.Class({extends:cc.Component,properties:{skills:cc.Node,_startPos:null},show:function(){this.node.active=!0,s.showInterstitial(0),s.showCustomAd(1,.5,.5,-160,-30),cc.sys.platform===cc.sys.BYTEDANCE_GAME&&(s.showBanner(0),i.recordPause()),cc.director.emit("show_aim_panel",!0)},hide:function(){this.node.active=!1,s.hideCustomAd(1),cc.sys.platform===cc.sys.BYTEDANCE_GAME&&(i.recordResume(),s.stopBanner()),cc.director.emit("show_aim_panel",!1)},onTouchStart:function(t){this._startPos=this.node.convertToNodeSpaceAR(t.getLocation()),this.hide(),cc.director.emit("game_pause",!1)},onLoad:function(){this.node.on("touchstart",this.onTouchStart,this)},onDestroy:function(){this.node.off("touchstart",this.onTouchStart,this)},start:function(){}}),cc._RF.pop()},{AdUtils:"AdUtils",TTUtils:void 0}],PlatformActive:[function(t,e){"use strict";cc._RF.push(e,"501348QiplK4oczeN9lFRXC","PlatformActive"),cc.Class({extends:cc.Component,properties:{wechat:!1,bytedance:!1,oppo:!1,vivo:!1,uc:!1,ks:!1,qq:!1,web:!1},isCurEnable:function(){var t=!1,e=cc.sys.platform;return e===cc.sys.BYTEDANCE_GAME?t=this.bytedance:e===cc.sys.OPPO_GAME?t=this.oppo:e===cc.sys.VIVO_GAME?t=this.vivo:window.qq?t=this.qq:window.ks?t=this.ks:window.uc?t=this.uc:e===cc.sys.WECHAT_GAME?t=this.wechat:cc.sys.isBrowser&&(t=this.web),t},start:function(){this.node.active=this.isCurEnable()}}),cc._RF.pop()},{}],PrivacyAgreement:[function(t,e){"use strict";cc._RF.push(e,"a114cPHsJNJzbWcbbs4vseG","PrivacyAgreement");var i=t("SaveData");cc.Class({extends:cc.Component,properties:{closeBtn:cc.Node,buttons:cc.Node},show:function(t){if(void 0===t&&(t=!1),!t){if(!window.qq&&cc.sys.platform!==cc.sys.OPPO_GAME&&cc.sys.platform!==cc.sys.VIVO_GAME)return;if(i.data.privacyAgreement)return}this.node.active=!0,this.buttons.active=!t,this.closeBtn.active=t},hide:function(){this.node.active=!1},onOkClicked:function(){cc.director.emit("play_sound","click"),i.data.privacyAgreement=!0,i.save(),this.hide()},onRejectClicked:function(){cc.director.emit("play_sound","click"),cc.sys.platform===cc.sys.OPPO_GAME||cc.sys.platform===cc.sys.VIVO_GAME?qg.exitApplication({}):window.qq?qq.exitMiniProgram():cc.game.end()},onCloseClicked:function(){cc.director.emit("play_sound","click"),this.hide()},start:function(){}}),cc._RF.pop()},{SaveData:void 0}],RankList:[function(t,e){"use strict";cc._RF.push(e,"1a26dvACcBBMLTmBbc/kYOG","RankList"),cc.Class({extends:cc.Component,properties:{},show:function(){this.node.active=!0},hide:function(){this.node.active=!1},onCloseClicked:function(){cc.director.emit("play_sound","click"),this.hide()},start:function(){}}),cc._RF.pop()},{}],ReviveMenu:[function(t,e){"use strict";cc._RF.push(e,"84996NrnddJUpQMTpOlikF0","ReviveMenu");var i=t("AdUtils"),s=t("SaveData"),n=t("OppoNativeBanner");cc.Class({extends:cc.Component,properties:{btnAd:cc.Node,oppoBanner:n,_lock:!1},show:function(){var t=this;this.node.active=!0,this.btnAd.active=!1,cc.sys.platform===cc.sys.OPPO_GAME&&cc.mgf.b1?(this.oppoBanner.isNative()||this.oppoBanner.initAd(),this._lock=!0,this.scheduleOnce(function(){t._lock=!1,t.oppoBanner.isNative()&&(t.btnAd.active=!0)},1)):i.showInterstitial(0),i.showCustomAd(1,.5,.5,-160,-320),s.data.reviveToday++},hide:function(){this.node.active=!1,i.showCustomAd(1)},onOkClicked:function(){var t=this;i.showVideo(0,function(e){e?(t.hide(),cc.director.emit("game_revive"),cc.director.emit("play_sound","click")):cc.director.emit("show_toast","\u770b\u5b8c\u89c6\u9891\u624d\u80fd\u83b7\u5f97\u5956\u52b1\u54e6")},function(){cc.director.emit("show_toast","\u64ad\u653e\u89c6\u9891\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5")})},onGiveUpClicked:function(){var t=this;if(!this._lock){var e=s.data.reviveToday;2!==e&&4!==e&&6!==e||!cc.mgf.v3?this.giveUp():i.showVideo(0,function(e){e?(t.hide(),cc.director.emit("game_revive"),cc.director.emit("play_sound","click")):t.giveUp()},function(){t.giveUp()})}},giveUp:function(){this.hide(),cc.director.emit("revive_fail"),cc.director.emit("play_sound","click")},onAdClicked:function(){cc.director.emit("play_sound","click"),this.oppoBanner.onClicked()},start:function(){}}),cc._RF.pop()},{AdUtils:"AdUtils",OppoNativeBanner:"OppoNativeBanner",SaveData:void 0}],RockAnim:[function(t,e){"use strict";cc._RF.push(e,"50d2bOKliVDYLjw14jzMLb1","RockAnim"),cc.Class({extends:cc.Component,properties:{},start:function(){cc.tween(this.node).repeatForever(cc.tween().to(.08,{angle:15},{easing:"quadOut"}).to(.16,{angle:-15},{easing:"quadInOut"}).to(.08,{angle:0},{easing:"quadIn"}).delay(3)).start()}}),cc._RF.pop()},{}],Role:[function(t,e){"use strict";cc._RF.push(e,"31222N18fpKbaVxk6e+Fu6h","Role");var i=t("MathUtils");cc.Class({extends:cc.Component,properties:{drawNode:cc.Node,_body:null,_isRun:!1,_speed:0,_angle:0,_angleSpeed:0,_isUser:!1,_isAlive:!0,_isInvincible:!1,_invincibleTime:0},setAngle:function(t){this.node.angle=t,this._angle=t},startRun:function(){this._isRun=!0},stopRun:function(){this._isRun=!1},runMove:function(t){if(this._isRun&&this._isAlive){var e=this.node.angle,s=(this._angle-e)%360;s=(s=s<=-180?s+360:s)>180?s-360:s;var n=this._angleSpeed*t;Math.abs(s)<=n?e=this._angle:s>0?e+=n:e-=n,this.node.angle=e;var o=this._speed,a=this.node.x+o*i.cos(e)*t,c=this.node.y+o*i.sin(e)*t,r=cc.v3(a,c,0);this.checkEdge(r),this.node.position=r}},runInvincible:function(t){this._isInvincible&&(this._invincibleTime-=t,this._invincibleTime<=0&&(this._isInvincible=!1))},checkEdge:function(){},onLoad:function(){this._body=this.getComponent(cc.RigidBody)},start:function(){},update:function(t){this.runMove(t),this.runInvincible(t)}}),cc._RF.pop()},{MathUtils:"MathUtils"}],ScaleAnim:[function(t,e){"use strict";cc._RF.push(e,"279d1qmrXdA2a2XkCtWzVRn","ScaleAnim"),cc.Class({extends:cc.Component,properties:{},start:function(){cc.tween(this.node).to(1.5,{scale:1.2},{easing:cc.easing.quadInOut}).to(1.5,{scale:1},{easing:cc.easing.quadInOut}).union().repeatForever().start()}}),cc._RF.pop()},{}],SkillData:[function(t,e){"use strict";cc._RF.push(e,"068bbI79lVDk6yegYpJw1YU","SkillData"),e.exports=[{id:0,name:"\u8eba\u5e73\u53d1\u80b2",baseMax:6,max:12,need:1,duration:0,cd:5,desc:"\u961f\u4f0d\u4e2d\u6bcf5\u79d2\u81ea\u52a8\u4ea7\u751f1\u53ea</var>\uff08\u7b49\u7ea7\u4e0d\u8d85\u8fc7\u81ea\u8eab\uff09",vars:[cc.isSpider?"\u5c0f\u8718\u86db":"\u5c0f\u874c\u86aa",cc.isSpider?"\u5927\u8718\u86db":"\u5927\u874c\u86aa","\u5c0f\u9752\u86d9","\u5927\u9752\u86d9","\u5c0f\u4e4c\u9f9f","\u5927\u4e4c\u9f9f","\u5c0f\u91d1\u9c7c","\u5927\u91d1\u9c7c","\u5c0f\u9526\u9ca4","\u5927\u9526\u9ca4","\u5c0f\u7535\u9cd7","\u5927\u7535\u9cd7"]},{id:1,name:"\u75af\u72c2\u6355\u98df",baseMax:6,max:12,need:1,cd:0,duration:0,desc:"\u81ea\u52a8\u6355\u98df\u4e00\u5b9a\u8303\u56f4\u5185\u7684\u751f\u7269\uff0c\u7b49\u7ea7\u4e0d\u8d85\u8fc7</var>",vars:[cc.isSpider?"\u5c0f\u8718\u86db":"\u5c0f\u874c\u86aa",cc.isSpider?"\u5927\u8718\u86db":"\u5927\u874c\u86aa","\u5c0f\u9752\u86d9","\u5927\u9752\u86d9","\u5c0f\u4e4c\u9f9f","\u5927\u4e4c\u9f9f","\u5c0f\u91d1\u9c7c","\u5927\u91d1\u9c7c","\u5c0f\u9526\u9ca4","\u5927\u9526\u9ca4","\u5c0f\u7535\u9cd7","\u5927\u7535\u9cd7"]},{id:2,name:"\u65cb\u8f6c\u98de\u5200",baseMax:9,max:18,need:1,cd:15,duration:5,desc:"\u6bcf15\u79d2\u81ea\u8eab\u5468\u56f4\u51fa\u73b0\u5200\u9635\uff0c\u6740\u6b7b\u63a5\u89e6\u5230\u7684\u654c\u4eba\uff0c\u6301\u7eed</var>\u79d2",vars:[5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]},{id:3,name:"\u6765\u6839\u534e\u5b50",baseMax:9,max:13,need:1,duration:5,cd:15,desc:"\u6bcf</var>\u79d2\u70b9\u71c3\u4e00\u6839\u534e\u5b50\uff0c\u6740\u6b7b\u9762\u524d\u6240\u6709\u654c\u4eba\uff0c\u6301\u7eed5\u79d2",vars:[15,14,13,12,11,10,9,8,7,6,5,4,3]},{id:4,name:"\u95ea\u7535\u8fde\u97ad",baseMax:9,max:18,need:1,duration:0,cd:10,desc:"\u6bcf10\u79d2\u968f\u673a\u51fb\u6655\u5f53\u524d\u5c4f\u5e55\u5185</var>\u4e2a\u5371\u9669\u76ee\u6807\uff0c\u660f\u8ff7\u65f6\u95f43\u79d2",vars:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]},{id:5,name:"\u534e\u5f3a\u4e70\u74dc",baseMax:9,max:18,need:1,duration:0,cd:20,desc:"\u6bcf</var>\u79d2\uff0c\u5c06\u5f53\u524d\u5c4f\u5e55\u5185\u6240\u6709\u654c\u4eba\u53d8\u6210\u897f\u74dc",vars:[20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3]}],cc._RF.pop()},{}],SkillItem:[function(t,e){"use strict";cc._RF.push(e,"c2b6ejAU4lBfI5pWsacvdlz","SkillItem"),cc.Class({extends:cc.Component,properties:{lbName:cc.Label,lbLevel:cc.Label,spIcon:cc.Sprite,lbDesc:cc.Label,sfIcons:[cc.SpriteFrame]},init:function(t,e){this.lbName.string=t.name,this.spIcon.spriteFrame=this.sfIcons[t.id],this.lbLevel.string="Lv."+e;var i=Math.max(0,e-1);this.lbDesc.string=t.desc.replace("</var>",t.vars[i].toString())},start:function(){}}),cc._RF.pop()},{}],SkillSelect:[function(t,e){"use strict";cc._RF.push(e,"25049vtq/JH3pkmvS3kZr5u","SkillSelect");var i=t("SkillData"),s=t("Game"),n=t("UserFishes"),o=t("TTUtils"),a=t("AdUtils"),c=t("SaveData");cc.Class({extends:cc.Component,properties:{content:cc.Node,skills:cc.Node,m_ndBtnFree:cc.Node,m_ndBtnAd:cc.Node,_skillIds:[],_isFirst:!0},show:function(){var t=this;if(this.initSkill(),!(this._skillIds.length<=0)){this.node.active=!0,this.content.opacity=0,cc.director.emit("block_on"),this.scheduleOnce(function(){t.content.active=!0,cc.Tween.stopAllByTarget(t.content),cc.tween(t.content).to(.5,{opacity:255}).call(function(){cc.director.emit("block_off")}).start()},1),o.recordPause(),a.showInterstitial(0),a.showBanner(0),a.showCustomAd(1,.5,.5,-160,-320);var e=c.data.isFreeSkill;this.m_ndBtnFree.active=!e,this.m_ndBtnAd.active=e,c.data.skillToday++}},hide:function(){this.node.active=!1,cc.director.emit("game_pause",!1),cc.director.emit("user_run",!0),cc.director.emit("user_invincible",1),cc.director.emit("skill_select_close"),a.hideCustomAd(1),cc.sys.platform===cc.sys.BYTEDANCE_GAME&&(o.recordResume(),a.stopBanner())},onGameInit:function(){this._isFirst=!0},initSkill:function(){var t=[],e=n.instance._maxLevel,o=s.instance._skillLevels;if(this._isFirst)t=[1,3,5],this._isFirst=!1;else for(var a=0;a<i.length;a++){var r=i[a];o[a]+c.data.skillLevels[a]+1<r.max&&e>=r.need&&t.push(a)}for(var h=0;h<t.length;h++){var l=Math.floor(Math.random()*t.length),d=t[l];t[l]=t[h],t[h]=d}for(var u=this.node.getComponentsInChildren("SkillItem"),f=0;f<3;f++)if(f>=t.length)u[f].node.active=!1;else{var p=t[f],m=i[p],_=o[p]+c.data.skillLevels[p]+1;u[f].node.active=!0,u[f].init(m,_)}this._skillIds=t},onSkill1Clicked:function(){this.onSkillClicked(0)},onSkill2Clicked:function(){this.onSkillClicked(1)},onSkill3Clicked:function(){this.onSkillClicked(2)},onSelectAllClicked:function(){var t=this;a.showVideo(0,function(e){e?t.getSkillAll():cc.director.emit("show_toast","\u770b\u5b8c\u89c6\u9891\u624d\u80fd\u83b7\u5f97\u5956\u52b1\u54e6")},function(){cc.director.emit("show_toast","\u64ad\u653e\u89c6\u9891\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5")})},onSkillClicked:function(t){var e=this,i=c.data.skillToday;2!==i&&4!==i&&6!==i||!cc.mgf.v2?this.getSkill(t):a.showVideo(0,function(i){i?e.getSkillAll():e.getSkill(t)},function(){e.getSkill(t)})},getSkill:function(t){this.hide();var e=this._skillIds[t];s.instance._skillLevels[e]++,cc.director.emit("play_sound","click"),cc.director.emit("add_effect_text","\u5b66\u4f1a "+i[e].name,1)},getSkillAll:function(){this.hide();for(var t=s.instance._skillLevels,e=0;e<3;e++)t[this._skillIds[e]]++,cc.director.emit("add_effect_text","\u5b66\u4f1a "+i[e].name,1)},onClickBtnFree:function(){cc.director.emit("play_sound","click"),c.data.isFreeSkill=!0,c.save(),this.getSkillAll()},test:function(){cc.director.emit("dragon_group")},onLoad:function(){cc.director.on("game_init",this.onGameInit,this)},onDestroy:function(){cc.director.off("game_init",this.onGameInit,this)},start:function(){}}),cc._RF.pop()},{AdUtils:"AdUtils",Game:"Game",SaveData:void 0,SkillData:"SkillData",TTUtils:void 0,UserFishes:"UserFishes"}],SkillUpgradeItem:[function(t,e){"use strict";cc._RF.push(e,"2cac56IRWBIuI9T7AxUIO6M","SkillUpgradeItem");var i=t("./SkillItem"),s=t("AdUtils"),n=t("SaveData"),o=t("SkillData"),a=t("ParticleGdx");cc.Class({extends:cc.Component,ctor:function(){this.m_iId=0},properties:{m_cptSkillItem:i,m_ndTagMax:cc.Node,m_ndBtnUpgrade:cc.Node,m_ndBtnNew:cc.Node,m_ndBtnFree:cc.Node,m_eft:a},initSkillUpgradeItem:function(t){this.m_iId=t,this.m_ndTagMax.active=!1,this.m_ndBtnUpgrade.active=!1,this.m_ndBtnNew.active=!1,this.m_ndBtnFree.active=!1;var e=n.data.skillLevels[this.m_iId]>=o[this.m_iId].baseMax;0===n.data.skillLevels[this.m_iId]?this.m_ndBtnNew.active=!0:e?this.m_ndTagMax.active=!0:this.m_ndBtnUpgrade.active=!0,this.m_cptSkillItem.init(o[this.m_iId],n.data.skillLevels[this.m_iId])},onClickBtnUpgrade:function(){var t=this;cc.director.emit("play_sound","click"),s.showVideo(0,function(e){e?t.skillUpgrade():cc.director.emit("show_toast","\u770b\u5b8c\u89c6\u9891\u624d\u80fd\u83b7\u5f97\u5956\u52b1\u54e6")},function(){cc.director.emit("show_toast","\u64ad\u653e\u89c6\u9891\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5")})},skillUpgrade:function(){this.m_eft.startRun(),n.data.skillLevels[this.m_iId]++,n.save(),this.initSkillUpgradeItem(this.m_iId),cc.director.emit("show_toast","\u6280\u80fd\u5347\u7ea7\u4e86")},onClickBtnFree:function(){cc.director.emit("play_sound","click"),this.skillUpgrade()}}),cc._RF.pop()},{"./SkillItem":"SkillItem",AdUtils:"AdUtils",ParticleGdx:"ParticleGdx",SaveData:void 0,SkillData:"SkillData"}],SkillUpgrade:[function(t,e){"use strict";cc._RF.push(e,"849050eE9lICJEqBd0UIAno","SkillUpgrade");var i=t("SkillData"),s=t("AdUtils");cc.Class({extends:cc.Component,properties:{m_ndContent:cc.Node,m_ndBtnHome:cc.Node,m_ndBtnClose:cc.Node,m_pfSkill:cc.Prefab,m_arrSkillCell:[]},onLoad:function(){this.m_arrSkillCell=[];for(var t=0;t<i.length;t++){var e=cc.instantiate(this.m_pfSkill),s=e.getComponent("SkillUpgradeItem");s.initSkillUpgradeItem(t),this.m_ndContent.addChild(e),this.m_arrSkillCell.push(s)}},showSkillUpgrade:function(t,e){if(void 0===e&&(e=0),this.node.active=t,t){s.showInterstitial(0);for(var i=0;i<this.m_arrSkillCell.length;i++)this.m_arrSkillCell[i].initSkillUpgradeItem(i);switch(this.m_ndBtnHome.active=!1,this.m_ndBtnClose.active=!1,e){case 0:this.m_ndBtnHome.active=!0;break;case 1:this.m_ndBtnClose.active=!0}}},onClickBtnHome:function(){cc.director.emit("play_sound","click"),this.showSkillUpgrade(!1)},onClickBtnClose:function(){cc.director.emit("play_sound","click"),cc.director.emit("skill_upgrade_close"),this.showSkillUpgrade(!1)}}),cc._RF.pop()},{AdUtils:"AdUtils",SkillData:"SkillData"}],SoundBtn:[function(t,e){"use strict";cc._RF.push(e,"f9b94oP6HNNJZOH4ua45E30","SoundBtn"),cc.Class({extends:cc.Component,properties:{sprite:cc.Sprite,sfOn:cc.SpriteFrame,sfOff:cc.SpriteFrame},updateIcon:function(){var e=t("SoundManager").instance;this.sprite.spriteFrame=e.isSilence()?this.sfOff:this.sfOn},onClicked:function(){var e=t("SoundManager").instance;e.setSilence(!e.isSilence()),e.saveToStorage(),this.updateIcon(),cc.director.emit("play_sound","click")},start:function(){this.updateIcon()}}),cc._RF.pop()},{SoundManager:"SoundManager"}],SoundManager:[function(t,e){"use strict";cc._RF.push(e,"408c1OQSQtD6pFc7+zNQuT9","SoundManager");var i=cc.Class({extends:cc.Component,properties:{bgmVolume:1,seVolume:1,bgmAudioID:-1,bgms:{default:[],type:[cc.AudioClip]},click:cc.AudioClip,compose:cc.AudioClip,dead:cc.AudioClip,eat:cc.AudioClip,getitem:cc.AudioClip,getskill:cc.AudioClip,hit:cc.AudioClip,item_shield_dis:cc.AudioClip,light:cc.AudioClip,sk_blade:cc.AudioClip,sk_blade_hit:cc.AudioClip,sk_brust:cc.AudioClip,sk_bushi:cc.AudioClip,sk_fire:cc.AudioClip,sk_fire_hit:cc.AudioClip,sk_gua:cc.AudioClip,sk_gua_hit:cc.AudioClip,fw_boom:cc.AudioClip,fw_start:cc.AudioClip,_soundCDs:null},statics:{instance:null},ctor:function(){i.instance=this,this._soundCDs={}},onLoad:function(){cc.director.on("play_sound",this.playSound,this),cc.director.on("play_bgm",this.playBGM,this),cc.director.on("sound_pause",this.onSoundPause,this),this.loadFromStorage(),this.isSilence()||this.playCurBGM()},onDestroy:function(){cc.director.off("play_sound",this.playSound,this),cc.director.off("play_bgm",this.playBGM,this),cc.director.off("sound_pause",this.onSoundPause,this)},onSoundPause:function(t){t?this.pauseAll():this.resumeAll()},playBGM:function(t){this.bgmAudioID>=0&&cc.audioEngine.stop(this.bgmAudioID),(this.bgmVolume>0||!cc.sys.isNative)&&(this.bgmAudioID=cc.audioEngine.play(this.bgms[t],!0,this.bgmVolume))},playCurBGM:function(){this.playBGM(0)},playSE:function(t){this.seVolume>0&&cc.audioEngine.play(t,!1,this.bgmVolume)},setSEVolume:function(t){this.seVolume!=t&&(this.seVolume=t)},setBGMVolume:function(t,e){(this.bgmVolume!=t||e)&&(cc.sys.isNative?this.bgmAudioID>=0&&(t>0?cc.audioEngine.resume(this.bgmAudioID):cc.audioEngine.pause(this.bgmAudioID),cc.audioEngine.setVolume(this.bgmAudioID,t)):cc.audioEngine.setVolume(this.bgmAudioID,t),this.bgmVolume=t)},setSilence:function(t){t?(this.setBGMVolume(0),this.setSEVolume(0),cc.audioEngine.stopAll()):(this.setBGMVolume(1),this.setSEVolume(1),this.playCurBGM())},saveToStorage:function(){var t={se:this.seVolume,bgm:this.bgmVolume};cc.sys.localStorage.setItem("dlm_sound_volume",JSON.stringify(t))},loadFromStorage:function(){var t=1,e=1;try{var i=cc.sys.localStorage.getItem("dlm_sound_volume");if(i){var s=JSON.parse(i);null!=s.se&&(t=s.se),null!=s.bgm&&(e=s.bgm)}}catch(n){cc.error(n)}this.setBGMVolume(e),this.setSEVolume(t)},pauseAll:function(){cc.audioEngine.pauseAll()},resumeAll:function(){cc.audioEngine.resumeAll()},isSilence:function(){return 0==this.bgmVolume&&0==this.seVolume},playSound:function(t){var e=this._soundCDs[t];null!=e&&e>0||(this.playSE(this[t]),this._soundCDs[t]=.2)},update:function(t){for(var e=Object.keys(this._soundCDs),i=0;i<e.length;i++){var s=e[i];this._soundCDs[s]-=t,this._soundCDs[s]<=0&&delete this._soundCDs[s]}}});cc._RF.pop()},{}],SubContextView:[function(t,e,i){"use strict";cc._RF.push(e,"09aad1tEHpHzLP6KKFD5ShM","SubContextView");var s,n=this&&this.__extends||(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__decorate||function(t,e,i,s){var n,o=arguments.length,a=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(a=(o<3?n(a):o>3?n(e,i,a):n(e,i))||a);return o>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0}),i.submitScore=i.SubRankType=void 0;var a,c=cc._decorator,r=c.ccclass,h=c.property,l=c.menu,d=c.requireComponent;(function(t){t[t.pass=0]="pass",t[t.friend=1]="friend",t[t.over=2]="over"})(a=i.SubRankType||(i.SubRankType={})),i.submitScore=function(t,e,i,s){if(!window.ks&&cc.sys.platform===cc.sys.WECHAT_GAME){var n={wxgame:{score:0,update_time:Math.round((new Date).getTime()/1e3)}},o=[];if(t instanceof Array)for(var a=0;a<t.length;a++)n.wxgame.score=e[a],o.push({key:t[a],value:JSON.stringify(n)});else n.wxgame.score=e,o.push({key:t,value:JSON.stringify(n)});wx.setUserCloudStorage({KVDataList:o,success:function(){i&&i(),console.log("submit score success!")},fail:function(){s&&s(),console.log("submit score fail!")}})}};var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=a.friend,e.strongRender=!1,e}var i;return n(e,t),i=e,e.prototype.onLoad=function(){cc.sys.platform===cc.sys.WECHAT_GAME&&(this.openDataContext=wx.getOpenDataContext(),this.texture=new cc.Texture2D,this.sprite=this.node.getComponent(cc.Sprite),this.sprite.spriteFrame=new cc.SpriteFrame(this.texture),i.SubComponentArr.push(this),this.strongRender=this.type==a.friend,this.type===a.pass&&cc.director.on("update_pass_rank",this.updatePassRank,this))},e.prototype.onEnable=function(){if(cc.sys.platform===cc.sys.WECHAT_GAME){for(var t=i.SubComponentArr.length-1;t>=0;t--){var e=i.SubComponentArr[t];e.type!==this.type&&(e.unscheduleAllCallbacks(),cc.isValid(e.node)?e.enabled=!1:i.SubComponentArr.splice(t,1))}this.updateSubContextViewport(),this.openDataContext.postMessage({event:a[this.type]}),this.strongRender||this.weakRender()}},e.prototype.onDestroy=function(){for(var t=i.SubComponentArr.length-1;t>=0;t--)if(i.SubComponentArr[t]==this){i.SubComponentArr.splice(t,1);break}cc.director.off("update_pass_rank",this.updatePassRank,this)},e.prototype.updateSubContextViewport=function(){this.openDataContext.canvas.width=this.node.width,this.openDataContext.canvas.height=this.node.height;var t=this.node.getBoundingBoxToWorld(),e=cc.view.getScaleX(),i=cc.view.getScaleY();this.openDataContext.postMessage({event:"viewport",data:{x:t.x*e+cc.view.getViewportRect().x,y:t.y*i+cc.view.getViewportRect().y,width:t.width*e,height:t.height*i}})},e.prototype.updatePassRank=function(t){cc.sys.platform===cc.sys.WECHAT_GAME&&(console.log("updatePass"),this.openDataContext.postMessage({event:"updatePass",data:t}),this.weakRender())},e.prototype.weakRender=function(){var t=this;this.unscheduleAllCallbacks(),this.schedule(function(){t.render()},.05,20)},e.prototype.render=function(){this.texture.initWithElement(this.openDataContext.canvas),this.sprite.spriteFrame.setTexture(this.texture)},e.prototype.update=function(){cc.sys.platform===cc.sys.WECHAT_GAME&&this.strongRender&&this.render()},e.SubComponentArr=[],o([h({type:cc.Enum(a)})],e.prototype,"type",void 0),i=o([r,d(cc.Sprite),l("\u5b50\u57df\u7ec4\u4ef6")],e)}(cc.Component);i.default=u,cc._RF.pop()},{}],TTShare:[function(t,e){"use strict";cc._RF.push(e,"dc4a6ZwrW9NYr84zAfkEDaD","TTShare");var i=t("TTUtils"),s=t("SaveData");cc.Class({extends:cc.Component,properties:{content:cc.Node},show:function(){this.node.active=!0,this.content.scale=0,cc.Tween.stopAllByTarget(this.content),cc.tween(this.content).to(.4,{scale:1},{easing:cc.easing.backOut}).start()},hide:function(){var t=this;this.content.scale=1,cc.Tween.stopAllByTarget(this.content),cc.tween(this.content).to(.4,{scale:0},{easing:cc.easing.backIn}).call(function(){t.node.active=!1}).start()},onShareClicked:function(){var t=this;cc.director.emit("play_sound","click"),i.shareRecord(function(){t.hide(),cc.director.emit("show_toast","\u5206\u4eab\u6210\u529f\uff0c\u83b7\u5f97\u5f00\u5c40\u5927\u5a01\u5929\u9f99\uff01"),s.data.startBurst=!0,s.save()},function(){cc.director.emit("show_toast","\u5206\u4eab\u5931\u8d25")})},onCloseClicked:function(){cc.director.emit("play_sound","click"),this.hide()},start:function(){}}),cc._RF.pop()},{SaveData:void 0,TTUtils:void 0}],Toast:[function(t,e){"use strict";cc._RF.push(e,"25ef9cQHrdBobrnY37OwyaK","Toast"),cc.Class({extends:cc.Component,properties:{label:cc.Label},onLoad:function(){cc.director.on("show_toast",this.showToast,this),cc.game.addPersistRootNode(this.node),this.node.zIndex=cc.macro.MAX_ZINDEX,this.node.active=!1},onDestroy:function(){cc.director.off("show_toast",this.showToast,this)},start:function(){},showToast:function(t,e){var i=this;e=e||1.5,this.label.string=t,this.node.active=!0,this.node.opacity=0,this.node.x=0,this.node.y=320,cc.Tween.stopAllByTarget(this.node),cc.tween(this.node).by(.2,{opacity:255,y:50}).delay(e).by(.1,{opacity:0,y:100}).call(function(){return i.node.active=!1}).start()}}),cc._RF.pop()},{}],TongueManager:[function(t,e){"use strict";cc._RF.push(e,"8776evibhFJpJy6mCmtp6Nk","TongueManager"),cc.Class({extends:cc.Component,properties:{prefab:cc.Prefab},onTongueEat:function(e){var i=cc.instantiate(this.prefab);this.node.addChild(i);var s=i.getComponent("Tongue"),n=t("CameraController").instance.camera.zoomRatio;s.setTongueScale(1/n),s.eatFish(e)},onLoad:function(){cc.director.on("tongue_eat",this.onTongueEat,this)},onDestroy:function(){cc.director.off("tongue_eat",this.onTongueEat,this)},start:function(){}}),cc._RF.pop()},{CameraController:"CameraController"}],Tongue:[function(t,e){"use strict";cc._RF.push(e,"e15a7N8Pr1O2bXKxo8fx4oK","Tongue");var i=t("MathUtils");cc.Class({extends:cc.Component,properties:{tongue:cc.Node,fishParent:cc.Node},eatFish:function(e){var s=this;e._isAlive=!1;var n=e.node.convertToWorldSpaceAR(cc.v2()),o=this.node.convertToWorldSpaceAR(cc.v2()),a=cc.v2(n.x-o.x,n.y-o.y),c=i.atan2(a),r=a.len();e.node.removeComponent(cc.PhysicsCollider),e.node.removeComponent(cc.RigidBody),this.node.angle=c-90,this.node.height=r+30,e.node.parent=null,e.node.parent=this.fishParent,e.node.position=cc.v3(),cc.Tween.stopAllByTarget(this.node),cc.tween(this.node).to(.3,{height:30}).call(function(){var i=t("UserFishes").instance.node.position;cc.director.emit("add_score",Math.pow(3,e.level),i),cc.director.emit("add_fish",{level:e.level,user:!0}),e.removeSelf(),s.node.destroy()}).start()},setTongueScale:function(t){this.tongue.scale=t},start:function(){}}),cc._RF.pop()},{MathUtils:"MathUtils",UserFishes:"UserFishes"}],TouchPad:[function(t,e){"use strict";cc._RF.push(e,"593c8irguxGbLnH/FId/PvC","TouchPad");var i=t("MathUtils");cc.Class({extends:cc.Component,properties:{virtualPad:cc.Node,ctrlNode:cc.Node,radius:50,_startPos:null},start:function(){this.node.on("touchstart",this.onTouchStart,this),this.node.on("touchmove",this.onTouchMove,this),this.node.on("touchend",this.onTouchEnd,this),this.node.on("touchcancel",this.onTouchEnd,this)},onTouchStart:function(t){this._startPos=this.node.convertToNodeSpaceAR(t.getLocation()),this.virtualPad&&(this.virtualPad.setPosition(this._startPos),this.virtualPad.active=!0),cc.director.emit("user_run",!0)},onTouchMove:function(t){if(this._startPos){var e=this.node.convertToNodeSpaceAR(t.getLocation());if(e.subSelf(this._startPos),0!==e.x||0!==e.y){var s=i.atan2(e);this.ctrlNode&&(e.x*e.x+e.y*e.y>this.radius*this.radius?(this.ctrlNode.x=i.cos(s)*this.radius,this.ctrlNode.y=i.sin(s)*this.radius):this.ctrlNode.setPosition(e)),cc.director.emit("user_angle",s)}}},onTouchEnd:function(){this._startPos=null,this.virtualPad&&(this.virtualPad.active=!1)}}),cc._RF.pop()},{MathUtils:"MathUtils"}],UIManager:[function(t,e){"use strict";cc._RF.push(e,"c32edvwd2xGBrDCorGx+ldV","UIManager");var i=t("./MainMenu"),s=t("./ReviveMenu"),n=t("./GameWin"),o=t("./GameLose"),a=t("./PauseMenu"),c=t("./RankList"),r=t("./SkillSelect"),h=t("./GameUI"),l=t("./TTShare"),d=t("./PrivacyAgreement"),u=t("./EnergyBar"),f=t("./PanelAim"),p=t("./EnergySupply"),m=t("./SkillUpgrade"),_=t("SaveData");cc.Class({extends:cc.Component,ctor:function(){this.m_bIsRunRecoverEnergy=!1,this.m_iRecoverEnergyTime=0},properties:{mainMenu:i,reviveMenu:s,gameWin:n,gameLose:o,pauseMenu:a,rankList:c,skillSelect:r,gameUI:h,ttShare:l,privacyAgreement:d,energyBar:u,aimPanel:f,energySupply:p,skillUpgrade:m},onGameInit:function(){},onGameStart:function(){this.mainMenu.hide(),this.gameUI.show()},onGameWin:function(t){this.gameUI.hide(),this.gameWin.show(t)},onGameLose:function(t){this.gameUI.hide(),this.gameLose.show(t)},onMainMenu:function(){this.mainMenu.show()},onReviveMenu:function(){this.reviveMenu.show()},onPauseMenu:function(){this.pauseMenu.show()},onRankList:function(){this.rankList.show()},onSkillSelect:function(){this.skillSelect.show()},onTTshare:function(){this.ttShare.show()},onPrivacyAgreement:function(t){this.privacyAgreement.show(t)},onLoad:function(){this.getOutLineEnergy(),cc.director.on("game_init",this.onGameInit,this),cc.director.on("game_start",this.onGameStart,this),cc.director.on("game_win",this.onGameWin,this),cc.director.on("game_lose",this.onGameLose,this),cc.director.on("main_menu",this.onMainMenu,this),cc.director.on("revive_menu",this.onReviveMenu,this),cc.director.on("pause_menu",this.onPauseMenu,this),cc.director.on("rank_list",this.onRankList,this),cc.director.on("skill_select",this.onSkillSelect,this),cc.director.on("tt_share",this.onTTshare,this),cc.director.on("privacy_agreement",this.onPrivacyAgreement,this),cc.director.on("check_energy",this.checkNeedRecoverEnergy,this),cc.director.on("refresh_energy",this.refreshEnergy,this),cc.director.on("show_energy",this.showEnergy,this),cc.director.on("show_aim_panel",this.showRankAimPanel,this),cc.director.on("show_aim_tips",this.showRankAimTips,this),cc.director.on("show_energy_supply",this.showEnergySupply,this),cc.director.on("show_skill_upgrade",this.showSkillUpgrade,this)},onDestroy:function(){cc.director.off("game_init",this.onGameInit,this),cc.director.off("game_start",this.onGameStart,this),cc.director.off("game_win",this.onGameWin,this),cc.director.off("game_lose",this.onGameLose,this),cc.director.off("main_menu",this.onMainMenu,this),cc.director.off("revive_menu",this.onReviveMenu,this),cc.director.off("pause_menu",this.onPauseMenu,this),cc.director.off("rank_list",this.onRankList,this),cc.director.off("skill_select",this.onSkillSelect,this),cc.director.off("tt_share",this.onTTshare,this),cc.director.off("privacy_agreement",this.onPrivacyAgreement,this),cc.director.off("check_energy",this.checkNeedRecoverEnergy,this),cc.director.off("refresh_energy",this.refreshEnergy,this),cc.director.off("show_energy",this.showEnergy,this),cc.director.off("show_aim_panel",this.showRankAimPanel,this),cc.director.off("show_aim_tips",this.showRankAimTips,this),cc.director.off("show_energy_supply",this.showEnergySupply,this),cc.director.off("show_skill_upgrade",this.showSkillUpgrade,this)},start:function(){this.privacyAgreement.show()},checkNeedRecoverEnergy:function(){this.m_bIsRunRecoverEnergy||_.data.energy<5&&(_.data.eryTimeTag=this.getTimeStamp(),_.save(),this.m_iRecoverEnergyTime=600,this.m_bIsRunRecoverEnergy=!0,this.schedule(this.runRecoverEnergy,1))},runRecoverEnergy:function(){if(_.data.energy>=5)return this.m_bIsRunRecoverEnergy=!1,void this.unschedule(this.runRecoverEnergy);this.m_iRecoverEnergyTime--,this.m_iRecoverEnergyTime<=0&&(_.data.energy++,_.data.eryTimeTag=this.getTimeStamp(),_.save(),this.m_iRecoverEnergyTime=600)},getTimeStamp:function(){return Math.floor((new Date).getTime()/1e3)},getOutLineEnergy:function(){if(!(_.data.energy>=5)){var t=this.getTimeStamp(),e=t-_.data.eryTimeTag,i=Math.floor(e/600),s=Math.min(5-_.data.energy,i);_.data.energy+=s,_.data.energy<5&&(this.m_iRecoverEnergyTime=600-e+600*i,_.data.eryTimeTag=t-600+this.m_iRecoverEnergyTime,this.m_bIsRunRecoverEnergy=!0,this.schedule(this.runRecoverEnergy,1)),_.save()}},refreshEnergy:function(){this.energyBar.refreshEnergy()},showEnergy:function(t){this.energyBar.showEnergy(t)},showRankAimPanel:function(t){this.aimPanel.m_ndAimPanel.active=t,t&&this.aimPanel.refreshPanelAim()},showRankAimTips:function(t){this.aimPanel.m_ndAimTips.active=t},showEnergySupply:function(t){this.energySupply.showEnergySupply(t)},showSkillUpgrade:function(t,e){void 0===e&&(e=0),this.skillUpgrade.showSkillUpgrade(t,e)}}),cc._RF.pop()},{"./EnergyBar":"EnergyBar","./EnergySupply":"EnergySupply","./GameLose":"GameLose","./GameUI":"GameUI","./GameWin":"GameWin","./MainMenu":"MainMenu","./PanelAim":"PanelAim","./PauseMenu":"PauseMenu","./PrivacyAgreement":"PrivacyAgreement","./RankList":"RankList","./ReviveMenu":"ReviveMenu","./SkillSelect":"SkillSelect","./SkillUpgrade":"SkillUpgrade","./TTShare":"TTShare",SaveData:void 0}],UIParent:[function(t,e){"use strict";cc._RF.push(e,"bb92dhVq1tCt6s0VznsIdsy","UIParent"),cc.Class({extends:cc.Component,properties:{uiPrefab:cc.Prefab},initUI:function(){this.uiPrefab&&this.node.addChild(cc.instantiate(this.uiPrefab))},onLoad:function(){this.initUI()}}),cc._RF.pop()},{}],UserFishes:[function(t,e){"use strict";cc._RF.push(e,"59c14VE0b9E95g36K9v2Woh","UserFishes");var i=t("Fish"),s=t("MathUtils"),n=t("ParticleGdx"),o=t("Game"),a=t("SkillData"),c=t("GenerateFishData"),r=c.EFFECTSCALE,h=c.RankModeFish,l=t("SaveData"),d=t("GenerateFishData").CAMERA_RATIOS,u=t("TTUtils"),f=cc.Class({extends:i,properties:{effCompose:n,effEvolution:n,effTail:n,waterFlowers:cc.Node,tongues:cc.Node,knife:cc.Node,_mainFish:null,_fishes:[],_followNodes:[],_maxLevel:0,_lastLevel:0,_isGame:!1,_isBurst:!1,_isShield:!1,_burstTime:0,_speedUpPer:0,_speedUpTime:0,_speedDownPer:0,_speedDownTime:0,_autoAddCD:0,_isKnife:!1,_knifeTime:0,_knifeCD:0,_isFire:!1,_fireTime:0,_fireCD:0,_lightningCD:0,_watermelonCD:0,_isBurstEx:!1},statics:{instance:null},ctor:function(){f.instance=this},onGameInit:function(){this._fishes=[],this._isAlive=!0,this._isGame=!1,this._mainFish=null,this._isInvincible=!1,this._isBurstEx=!1,this._maxLevel=0,this._lastLevel=0,this._isShield=!1,this._burstTime=0,this._speedUpPer=0,this._speedUpTime=0,this._speedDownPer=0,this._speedDownTime=0,this.node.position=cc.v3(),this._autoAddCD=.5,this._isKnife=!1,this._knifeCD=.5,this._isFire=!1,this._fireCD=.5,this._lightningCD=.5,this._watermelonCD=.5,this.knife.active=!1,this.stopRun(),cc.director.emit("camera_ratio",d[0],0),cc.director.emit("add_effect_shield",!1),cc.director.emit("add_effect_skFire",this.node,!1),cc.director.emit("add_effect_skBlade",!1)},onGameStart:function(){this._isGame=!0},onFishAdded:function(t){if(t._isUser){if(this._fishes.push(t),0===t.node.x&&0===t.node.y){var e=0,i=0;this._mainFish&&(e=(Math.random()-.5)*this._mainFish.node.height,i=(Math.random()-.5)*this._mainFish.node.width),t.node.active=!1;var s=this.node.x+e,n=this.node.y+i;t.node.position=cc.v3(s,n,0),t.node.active=!0}t.setAngle(this._angle),this._isBurst&&(t.node.scaleX*=2,t.node.scaleY*=2)}},onFishRemoved:function(t){if(t._isUser){t===this._mainFish&&(this._mainFish=null);for(var e=0;e<this._fishes.length;e++)if(t===this._fishes[e]){this._fishes.splice(e,1);break}}},onUserRun:function(t){this._isAlive&&(t?(this.startRun(),this.effTail.startRun()):this.stopRun())},onUserAngle:function(t){this._isAlive&&(this._angle=t||0)},onUserInvincible:function(t){void 0===t&&(t=1),this._isInvincible=!0,this._invincibleTime=t},getLevel:function(){return this._mainFish?this._mainFish.level:0},sortFishes:function(){this._fishes.sort(function(t,e){return t.level-e.level})},updateMainFish:function(){if(this.sortFishes(),this._fishes.length>0){var t=this._mainFish,e=this._fishes[this._fishes.length-1];e?(!t||e.level>t.level)&&(this._mainFish=e):this._mainFish=null;var i=this.getLevel();if(i>this._lastLevel){if(cc.director.emit("clear_fish",i),cc.director.emit("camera_ratio",d[Math.floor(i/2)],.3),cc.director.emit("add_effect_text","\u8fdb\u5316\u6210\u529f",1),cc.director.emit("play_sound","getskill"),this.effEvolution.startRun(),i>=this.getRankAimLevel())return cc.director.emit("game_pause",!0),this.stopRun(),this.onUserInvincible(1),cc.director.emit("user_victory"),0===cc.RankMode&&l.data.rank<5&&(l.data.rank++,l.save()),void(this._lastLevel=i);i>this._maxLevel&&(this._maxLevel=i,i%2==0&&(cc.director.emit("skill_select"),cc.director.emit("evolution_icon",i/2),this.stopRun(),this.onUserInvincible(1),this.scheduleOnce(function(){cc.director.emit("game_pause",!0)},.2)))}else i<this._lastLevel&&(cc.director.emit("camera_ratio",d[Math.floor(i/2)],.3),cc.director.emit("clear_big_fish",i+4));this._lastLevel=i}},getRankAimLevel:function(){switch(cc.RankMode){case 0:return h[l.data.rank].end;case 1:case 2:return 18}},updateFishes:function(){this._mainFish&&(this._mainFish.node.position=this.node.position);for(var t=0;t<this._fishes.length;t++){var e=this._fishes[t];e._angle=this._angle,e._speed=this._speed,e._isRun=this._isRun}},checkFishUpgrade:function(){this.sortFishes();for(var t=[],e=0,i=this._fishes.length-1;i>=0;i--){var s=this._fishes[i];if(s._isAlive&&(e!==s.level&&(e=s.level,t=[]),t.push(s),t.length>=3)){for(var n=0;n<t.length;n++)t[n].removeSelf();cc.director.emit("add_fish",{level:e+1,user:!0}),cc.director.emit("add_score",Math.pow(3,e+1),s.node.position),cc.director.emit("submit_score"),cc.director.emit("play_sound","compose"),this.effCompose.stop(),this.effCompose.startRun(),t=[]}}},checkDeath:function(){this._isAlive&&!this._mainFish&&(this.stopRun(),this._isAlive=!1,this._isGame=!1,this.effTail.stop(),cc.director.emit("user_death"),cc.director.emit("add_effect","death",{pos:this.node.position,scale:.5+.1*this._lastLevel}),cc.director.emit("play_sound","dead"))},initFollowNodes:function(){this._followNodes=[],this._followNodes.push(this.effTail.node),this._followNodes.push(this.tongues),this._followNodes.push(this.knife)},updateFollowNodes:function(){for(var t=0;t<this._followNodes.length;t++)this._followNodes[t].position=this.node.position},initWaterFlowers:function(){for(var t=this.waterFlowers.getComponentsInChildren("ParticleGdx"),e=0;e<t.length;e++)this.playWaterFlower(t[e])},stopWaterFlowers:function(){for(var t=this.waterFlowers.children,e=0;e<t.length;e++)cc.Tween.stopAllByTarget(t[e])},playWaterFlower:function(t){var e=this,i=1+1*Math.random(),s=this.node.x+720*(Math.random()-.5),n=this.node.y+1280*(Math.random()-.5),o=this.node.parent.width/2-200,a=this.node.parent.height/2-200;s=Math.max(-o,Math.min(s,o)),n=Math.max(-a,Math.min(n,a)),t.node.position=cc.v3(s,n,0),cc.tween(t.node).delay(i).call(function(){t.startRun(),e.playWaterFlower(t)}).start()},onGameRevive:function(){this.onUserInvincible(2),this._isAlive=!0,this._isGame=!0,cc.director.emit("add_fish",{level:this._lastLevel,user:!0})},onGamePause:function(t){this.pause(t),t?(this.stopWaterFlowers(),this.effTail.stop()):(this.initWaterFlowers(),this.effTail.startRun())},startBurst:function(t){var e=this;if(void 0===t&&(t=!1),!this._isBurstEx&&(t&&(this._isBurstEx=!0),cc.director.emit("add_effect_text",this._isBurstEx?"\u5927\u5a01\u5929\u9f99":"\u4e4c\u9e26\u5750\u98de\u673a",this._isBurstEx?1:0),cc.director.emit("add_effect_burst",this.node,2,!0,this._isBurstEx),cc.director.emit("play_sound","sk_brust"),this._burstTime=this._isBurstEx?20:5,this._speedUpTime=this._isBurstEx?20:5,this._speedUpPer=200,this.scheduleOnce(function(){u.recordClip(0,e._burstTime-1)},1),!this._isBurst)){this._isBurst=!0;for(var i=0;i<this._fishes.length;i++){var s=this._fishes[i];s.node.scaleX*=2,s.node.scaleY*=2}}},runBurst:function(t){this._isBurst&&!this._isPause&&(this._burstTime-=t,this._burstTime<=0&&this.burstEnd())},burstEnd:function(){cc.director.emit("add_effect_burst",this.node,2,!1,this._isBurstEx),this._isBurst=!1,this._isBurstEx=!1;for(var t=0;t<this._fishes.length;t++){var e=this._fishes[t];e.node.scaleX/=2,e.node.scaleY/=2}this.onUserInvincible(2)},runSpeedUp:function(t){this._speedUpTime<=0||this._isPause||(this._speedUpTime-=t,this._speedUpTime<=0&&(this._speedUpPer=0))},runSpeedDown:function(t){this._speedDownTime<=0||this._isPause||(this._speedDownTime-=t,this._speedDownTime<=0&&(this._speedDownPer=0))},copyFish:function(){for(var t=this._fishes.length-1;t>=0;t--){var e=this._fishes[t];e!==this._mainFish&&cc.director.emit("add_fish",{level:e.level,user:!0})}},onAddShield:function(){this._isShield=!0,cc.director.emit("add_effect_text","\u6ce1\u6ce1\u62a4\u76fe",0),cc.director.emit("add_effect_shield",!0)},shieldBreak:function(){this._isShield=!1,this.onUserInvincible(1),cc.director.emit("play_sound","item_shield_dis"),cc.director.emit("add_effect_shield",!1,!0)},updateSpeed:function(){this._speed=500*(100+this._speedUpPer)*(100-this._speedDownPer)/1e4},onSpeedUp:function(t,e){this._speedUpPer=t,this._speedUpTime=e},onSpeedDown:function(t,e){this._speedDownPer=t,this._speedDownTime=e},runAutoAdd:function(t){if(!this._isPause){var e=this.getSkillLevel(0),i=this.getLevel();(e=Math.min(e,i))<=0||(this._autoAddCD-=t,this._autoAddCD<=0&&(this._autoAddCD=a[0].cd,cc.director.emit("add_effect_text",a[0].name,0),cc.director.emit("add_effect_skillStart"),cc.director.emit("add_fish",{level:e-1,user:!0}),cc.log("\u4ea7\u751f\u751f\u7269\uff01")))}},runEat:function(){if(!this._isPause){var e=this.getSkillLevel(1);if(!(e<=0)){var i=this.getLevel();e=Math.min(e-1,i);for(var s=t("FishManager").instance._enemys,n=360/t("CameraController").instance.camera.zoomRatio,o=this.node.x,a=this.node.y,c=!1,r=0,h=s.length-1;h>=0;h--){var l=s[h];if(l._isAlive&&!(l.level>e)){var d=l.node.x-o,f=l.node.y-a;d*d+f*f<=n*n&&(c=!0,cc.director.emit("tongue_eat",l),r++)}}c&&cc.director.emit("play_sound","sk_bushi"),r>=5&&this.scheduleOnce(function(){u.recordClip(0,1)},.5)}}},runKnife:function(t){if(!this._isPause){var e=this.getSkillLevel(2);e<=0||(this._isKnife?(this._knifeTime-=t,this._knifeTime<=0&&(this._isKnife=!1,this._knifeCD=a[2].cd,this.stopKnife())):(this._knifeCD-=t,this._knifeCD<=0&&(this._isKnife=!0,this._knifeTime=a[2].vars[e-1],this.startKnife())))}},startKnife:function(){cc.log("\u98de\u5200\u5f00\u59cb\uff01"),this.scheduleOnce(function(){u.recordClip(0,2.5)},.5),cc.director.emit("add_effect_text",a[2].name,0),cc.director.emit("add_effect_skillStart"),cc.director.emit("add_effect_skBlade",!0),cc.director.emit("play_sound","sk_blade"),this.knife.active=!0},checkKnife:function(){for(var e=t("FishManager").instance._enemys,i=t("CameraController").instance.camera.zoomRatio,s=this.getLevel(),n=320/i,o=this.node.x,a=this.node.y,c=!1,h=e.length-1;h>=0;h--){var l=e[h];if(l._isAlive){var d=l.node.x-o,u=l.node.y-a;if(d*d+u*u<=n*n){s>=l.level&&cc.director.emit("add_fish",{level:l.level,user:!0});var f=r[l.level];cc.director.emit("add_effect_emyDis",l.node.position,f),cc.director.emit("add_score",Math.pow(3,l.level),l.node.position),l.removeSelf(),c=!0}}}c&&cc.director.emit("play_sound","sk_blade_hit")},stopKnife:function(){cc.log("\u98de\u5200\u7ed3\u675f\uff01"),cc.director.emit("add_effect_skBlade",!1),this.onUserInvincible(1),this.knife.active=!1},runFire:function(t){if(!this._isPause){var e=this.getSkillLevel(3);e<=0||(this._isFire?(this.checkFire(),this._fireTime-=t,this._fireTime<=0&&(this._isFire=!1,this._fireCD=a[3].vars[e-1],this.stopFire())):(this._fireCD-=t,this._fireCD<=0&&(this._isFire=!0,this._fireTime=a[3].duration,this.startFire())))}},startFire:function(){cc.log("\u55b7\u706b\u5f00\u59cb\uff01"),this.scheduleOnce(function(){u.recordClip(0,2.5,!0)},.5),cc.director.emit("add_effect_text",a[3].name,0),cc.director.emit("add_effect_skillStart"),cc.director.emit("add_effect_skFire",this.node,!0),cc.director.emit("play_sound","sk_fire")},checkFire:function(){for(var e=t("FishManager").instance._enemys,i=t("CameraController").instance.camera.zoomRatio,n=this.getLevel(),o=700/i,a=this.node.x,c=this.node.y,h=e.length-1;h>=0;h--){var l=e[h];if(l._isAlive){var d=l.node.x-a,u=l.node.y-c,f=!1;if(d*d+u*u<=o*o){var p=s.atan2(cc.v2(d,u)),m=s.compareAngle(p,this.node.angle);if(Math.abs(m)<=30){n>=l.level&&cc.director.emit("add_fish",{level:l.level,user:!0});var _=r[l.level];cc.director.emit("add_effect_emyDisFire",l.node.position,_),cc.director.emit("add_score",Math.pow(3,l.level),l.node.position),l.removeSelf(),f=!0}}f&&cc.director.emit("play_sound","sk_fire_hit")}}},stopFire:function(){cc.log("\u55b7\u706b\u7ed3\u675f\uff01"),cc.director.emit("add_effect_skFire",this.node,!1),this.onUserInvincible(1)},runLightning:function(t){if(!this._isPause){var e=this.getSkillLevel(4);e<=0||(this._lightningCD-=t,this._lightningCD<=0&&(this._lightningCD=a[4].cd,this.startLightning(e)))}},startLightning:function(e){cc.log("\u95ea\u7535\u68c0\u6d4b"),u.recordClip(0,1);for(var i=0,s=t("FishManager").instance._enemys,n=this.getLevel(),o=0;o<s.length;o++){var c=s[o];if(c._isAlive&&c.isInScreen()&&c.level>n){c.freeze(3);var h=r[c.level];if(cc.director.emit("add_effect_skLightLine",this.node.position,c.node.position),cc.director.emit("add_effect_skLightHit",c.node.position,h),++i>=e)break}}i>0&&(cc.director.emit("add_effect_text",a[4].name,0),cc.director.emit("add_effect_skillStart"),cc.director.emit("play_sound","light"))},runWatermelon:function(t){if(!this._isPause){var e=this.getSkillLevel(5);e<=0||(this._watermelonCD-=t,this._watermelonCD<=0&&(this._watermelonCD=a[5].vars[e-1],this.startWatermelon(e)))}},startWatermelon:function(){cc.director.emit("add_effect_skillStart"),cc.director.emit("add_effect_text",a[5].name,0),cc.director.emit("add_effect_skWatermelonStart"),cc.director.emit("play_sound","sk_gua"),this.scheduleOnce(function(){u.recordClip(0,1.5)},.5),this.scheduleOnce(function(){cc.log("\u53d8\u74dc\u68c0\u6d4b");for(var e=t("FishManager").instance._enemys,i=!1,s=0;s<e.length;s++){var n=e[s];if(n._isAlive&&n.isInScreen()){var o=r[n.level];cc.director.emit("add_effect_skWatermelonHit",n.node.position,o),cc.director.emit("add_watermelon",n.level,n.node.position),n.removeSelf(),i=!0}}i&&cc.director.emit("play_sound","sk_gua_hit")},.3)},onLoad:function(){this._isUser=!0,this._super(),this.initFollowNodes(),this.initWaterFlowers(),cc.director.on("game_init",this.onGameInit,this),cc.director.on("game_start",this.onGameStart,this),cc.director.on("game_revive",this.onGameRevive,this),cc.director.on("user_run",this.onUserRun,this),cc.director.on("user_angle",this.onUserAngle,this),cc.director.on("user_invincible",this.onUserInvincible,this),cc.director.on("fish_added",this.onFishAdded,this),cc.director.on("fish_removed",this.onFishRemoved,this),cc.director.on("game_pause",this.onGamePause,this),cc.director.on("add_shield",this.onAddShield,this),cc.director.on("copy_fish",this.copyFish,this),cc.director.on("speed_up",this.onSpeedUp,this),cc.director.on("speed_down",this.onSpeedDown,this),cc.director.on("burst",this.startBurst,this),cc.director.on("burstEx",this.startBurst,this)},onDestroy:function(){cc.director.off("game_init",this.onGameInit,this),cc.director.off("game_start",this.onGameStart,this),cc.director.off("game_revive",this.onGameRevive,this),cc.director.off("user_run",this.onUserRun,this),cc.director.off("user_angle",this.onUserAngle,this),cc.director.off("user_invincible",this.onUserInvincible,this),cc.director.off("fish_added",this.onFishAdded,this),cc.director.off("fish_removed",this.onFishRemoved,this),cc.director.off("game_pause",this.onGamePause,this),cc.director.off("add_shield",this.onAddShield,this),cc.director.off("copy_fish",this.copyFish,this),cc.director.off("speed_up",this.onSpeedUp,this),cc.director.off("speed_down",this.onSpeedDown,this),cc.director.off("burst",this.startBurst,this),cc.director.off("burstEx",this.startBurst,this)},start:function(){},update:function(t){this._isGame&&(this._super(t),this.updateSpeed(),this.runBurst(t),this.runSpeedUp(t),this.runSpeedDown(t),this.runAutoAdd(t),this.runEat(),this.runKnife(t),this.runFire(t),this.runWatermelon(t),this.runLightning(t))},lateUpdate:function(){this._isGame&&(this.checkFishUpgrade(),this.updateFishes(),this.updateMainFish(),this.updateFollowNodes(),this.checkDeath())},getSkillLevel:function(t){return o.instance._skillLevels[t]+l.data.skillLevels[t]}});cc._RF.pop()},{CameraController:"CameraController",Fish:"Fish",FishManager:"FishManager",Game:"Game",GenerateFishData:"GenerateFishData",MathUtils:"MathUtils",ParticleGdx:"ParticleGdx",SaveData:void 0,SkillData:"SkillData",TTUtils:void 0}],VibrateBtn:[function(t,e){"use strict";cc._RF.push(e,"5a5d8EUaIdCbIc/CUqYYN2e","VibrateBtn");var i=t("VibrateUtils");cc.Class({extends:cc.Component,properties:{sprite:cc.Sprite,sfOn:cc.SpriteFrame,sfOff:cc.SpriteFrame},updateIcon:function(){this.sprite.spriteFrame=i.isEnable()?this.sfOn:this.sfOff},onClicked:function(){i.setEnable(!i.isEnable()),i.save(),this.updateIcon(),cc.director.emit("play_sound","click")},start:function(){i.load(),this.updateIcon()}}),cc._RF.pop()},{VibrateUtils:"VibrateUtils"}],VibrateUtils:[function(t,e,i){"use strict";cc._RF.push(e,"0953cNSpodLZ5LICGmDESnH","VibrateUtils");var s=!0;i.load=function(){var t=cc.sys.localStorage.getItem("mgf_vibrate");"on"==t?s=!0:"off"==t&&(s=!1)},i.save=function(){cc.sys.localStorage.setItem("mgf_vibrate",s?"on":"off")},i.isEnable=function(){return s},i.setEnable=function(t){s=t},i.vibrateShort=function(){s&&(cc.sys.platform===cc.sys.WECHAT_GAME&&wx.vibrateShort({}),cc.sys.platform===cc.sys.BYTEDANCE_GAME?tt.vibrateShort({}):window.qg?qg.vibrateShort({}):window.navigator&&window.navigator.vibrate&&window.navigator.vibrate(20))},i.vibrateLong=function(){s&&(cc.sys.platform===cc.sys.WECHAT_GAME&&wx.vibrateLong({}),cc.sys.platform===cc.sys.BYTEDANCE_GAME?tt.vibrateLong({}):window.qg?qg.vibrateLong({}):window.navigator&&window.navigator.vibrate&&window.navigator.vibrate(400))},cc._RF.pop()},{}],VivoNativeAd:[function(t,e){"use strict";cc._RF.push(e,"0ff26YTpQFHOJ4GIoETghUL","VivoNativeAd"),cc.Class({extends:cc.Component,properties:{vivoAdId:"",adNode:cc.Node,spImg:cc.Sprite,spLogo:cc.Sprite,spIcon:cc.Sprite,lbTitle:cc.Label,lbDesc:cc.Label,lbBtnTxt:cc.Label,showOnLoad:!0,refreshTime:0,_nativeAd:null,_adData:null,_closeCount:0},onCloseClicked:function(){this.adNode.active=!1,this._closeCount++},initAd:function(){var t=this,e=null;console.log("native\u5e7f\u544a\u521d\u59cb\u5316",this.vivoAdId),cc.sys.platform===cc.sys.VIVO_GAME&&""!==this.vivoAdId&&(console.log("vivo native\u5e7f\u544a\u521b\u5efa"),e=qg.createNativeAd({posId:this.vivoAdId})),e&&(e.onLoad(function(e){console.log("native\u5e7f\u544a\u52a0\u8f7d",e.adList),e.adList&&e.adList.length>0&&(t._adData=e.adList[0]),console.log(t._adData),t.showAd()}),e.onError(function(t){console.log("native\u5e7f\u544a\u52a0\u8f7d\u9519\u8bef"),console.log(t)}),e.load(),this._nativeAd=e)},showAd:function(){var t=this;if(this._adData){this.adNode.active=!0;var e=this._adData.imgUrlList[0];this.spImg&&e&&cc.assetManager.loadRemote(e,{ext:".png"},function(e,i){if(e)console.error(e);else{var s=new cc.SpriteFrame(i);t.spImg.spriteFrame=s}}),e=this._adData.logoUrl,this.spLogo&&e&&cc.assetManager.loadRemote(e,{ext:".png"},function(e,i){if(e)console.error(e);else{var s=new cc.SpriteFrame(i);t.spLogo.spriteFrame=s}}),e=this._adData.icon,this.spIcon&&e&&cc.assetManager.loadRemote(e,{ext:".png"},function(e,i){if(e)console.error(e);else{var s=new cc.SpriteFrame(i);t.spIcon.spriteFrame=s}}),this.lbBtnTxt&&(this.lbBtnTxt.string=this._adData.clickBtnTxt||""),this.lbTitle&&(this.lbTitle.string=this._adData.title||""),this.lbDesc&&(this.lbDesc.string=this._adData.desc||""),this._nativeAd.reportAdShow({adId:this._adData.adId.toString()})}},onClicked:function(){this._nativeAd&&this._adData&&this._nativeAd.reportAdClick({adId:this._adData.adId.toString()})},refreshAd:function(){this.initAd()},start:function(){var t=this;this.adNode.active=!1,this.showOnLoad&&this.initAd(),this.refreshTime>0&&setInterval(function(){t.refreshAd()},1e3*this.refreshTime)}}),cc._RF.pop()},{}],VivoNativeBanner:[function(t,e){"use strict";cc._RF.push(e,"85cffmTJqNIXpkJ5KrC7xQu","VivoNativeBanner");var i=t("./VivoNativeAd");cc.Class({extends:i,properties:{baseBannerId:"",_bannerAd:null},show:function(){this.node.active=!0},hide:function(){this.node.active=!1,this._bannerAd&&this._bannerAd.hide()},onAdError:function(){this.showBaseBanner()},onGamePause:function(t){this.node.active=t},showBaseBanner:function(){this._bannerAd&&this._bannerAd.destroy(),this._banner=qg.createBannerAd({posId:VIVO_BANNER_IDS[id],adIntervals:30}),this._banner.onError(function(t){console.log("banner\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25",t),fail&&fail()}),this._banner.show().then(function(){console.log("banner\u5e7f\u544a\u5c55\u793a\u5b8c\u6210"),success&&success()}).catch(function(t){console.log("banner\u5e7f\u544a\u5c55\u793a\u5931\u8d25",JSON.stringify(t))})},onLoad:function(){},onDestroy:function(){}}),cc._RF.pop()},{"./VivoNativeAd":"VivoNativeAd"}],VivoNativeInterstitial:[function(t,e){"use strict";cc._RF.push(e,"9c03eOxfxJNUIcqTy6pjJKe","VivoNativeInterstitial");var i=t("./VivoNativeAd"),s=t("AdUtils");cc.Class({extends:i,onAdError:function(){console.log("\u65e0\u5e7f\u544a"),s.showBoxAd(0)},onLoad:function(){cc.sys.platform===cc.sys.VIVO_GAME&&cc.director.on("vivo_intersitial",this.initAd,this)},onDestroy:function(){cc.director.off("vivo_intersitial",this.initAd,this)}}),cc._RF.pop()},{"./VivoNativeAd":"VivoNativeAd",AdUtils:"AdUtils"}],WatermelonManager:[function(t,e){"use strict";cc._RF.push(e,"10b64CF3zJCe7ph7qCsRMub","WatermelonManager"),cc.Class({extends:cc.Component,properties:{prefab:cc.Prefab},onGameInit:function(){this.node.destroyAllChildren()},onAddWatermelon:function(t,e){var i=cc.instantiate(this.prefab);i.getComponent("Watermelon").init(t),i.position=e,this.node.addChild(i)},onLoad:function(){cc.director.on("game_init",this.onGameInit,this),cc.director.on("add_watermelon",this.onAddWatermelon,this)},onDestroy:function(){cc.director.off("game_init",this.onGameInit,this),cc.director.off("add_watermelon",this.onAddWatermelon,this)},start:function(){}}),cc._RF.pop()},{}],Watermelon:[function(t,e){"use strict";cc._RF.push(e,"008f3H1UelK14vZhTwzrINI","Watermelon"),cc.Class({extends:cc.Component,properties:{_level:0},onHited:function(){cc.director.emit("play_sound","getitem"),cc.director.emit("add_score",Math.pow(3,this._level),this.node.position),this.node.active=!1,this.node.destroy()},init:function(t){this._level=t,this.node.scale=.5+.2*t},onBeginContact:function(){this.onHited()},onLoad:function(){},start:function(){}}),cc._RF.pop()},{}],WxRankPass:[function(t,e){"use strict";cc._RF.push(e,"1c81dQQUXVK7KPInJ8KZFQs","WxRankPass"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],"physics-settings":[function(t,e){"use strict";cc._RF.push(e,"97741+Y/etHIa9xs+VUhE4G","physics-settings"),cc.game.on(cc.game.EVENT_ENGINE_INITED,function(){var t=cc.director.getPhysicsManager();t.enabled=!0,t.gravity=cc.v2(0,0),t.debugDrawFlags=0}),cc._RF.pop()},{}]},{},["BlockComp","NotchScreenFit","PlatformActive","RockAnim","ScaleAnim","SoundBtn","SoundManager","SubContextView","Toast","VibrateBtn","GenerateFishData","SkillData","CustomTouchPad","EffectManager","EffectReciver","Fish","FishAI","FishManager","Game","Item","ItemManager","Knife","Tongue","TongueManager","UserFishes","Watermelon","WatermelonManager","physics-settings","ParticleAssembler2D","ParticleEmitter","ParticleGdx","ParticleMathUtils","ParticleSprite","ParticleSpriteAssembler","AI","CameraController","DecorationManager","MathUtils","Role","TouchPad","VibrateUtils","EnergyBar","EnergySupply","FireWorks","GameLose","GameUI","GameWin","MainMenu","PanelAim","PauseMenu","PrivacyAgreement","RankList","ReviveMenu","SkillItem","SkillSelect","SkillUpgrade","SkillUpgradeItem","TTShare","UIManager","UIParent","WxRankPass","AdBase","AdKs","AdOppo","AdQQ","AdTT","AdUc","AdUtils","AdVivo","AdWx","AdManagerBase","OVShortcutBtn","OppoNativeAd","OppoNativeBanner","OppoNativeIcon","OppoNativeInterstitial","VivoNativeAd","VivoNativeBanner","VivoNativeInterstitial"]);